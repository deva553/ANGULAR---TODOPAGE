"use strict";(self.webpackChunktodoangular=self.webpackChunktodoangular||[]).push([[179],{2011:(ft,Se,L)=>{L.d(Se,{Dh:()=>le,GT:()=>de,cc:()=>xe,hO:()=>We,on:()=>H,pX:()=>ie,xv:()=>ve});var I=L(4650),ee=L(127),k=L(2680);ft=L.hmd(ft);const ae=["ngOnDestroy"],ie=(pe,qe,Qe,Te={})=>new Proxy(pe,{get:(me,we)=>Qe.runOutsideAngular(()=>{var je;if(pe[we])return!(null===(je=Te?.spy)||void 0===je)&&je.get&&Te.spy.get(we,pe[we]),pe[we];if(ae.indexOf(we)>-1)return()=>{};const Be=qe.toPromise().then(V=>{const ue=V&&V[we];return"function"==typeof ue?ue.bind(V):ue&&ue.then?ue.then(G=>Qe.run(()=>G)):Qe.run(()=>ue)});return new Proxy(()=>{},{get:(V,ue)=>Be[ue],apply:(V,ue,G)=>Be.then(Y=>{var ne;const te=Y&&Y(...G);return!(null===(ne=Te?.spy)||void 0===ne)&&ne.apply&&Te.spy.apply(we,G,te),te})})})}),de=(pe,qe)=>{qe.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Te=>{Object.defineProperty(pe.prototype,Te,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Te))})})};class he{constructor(qe){return qe}}const le=new I.OlP("angularfire2.app.options"),ve=new I.OlP("angularfire2.app.name");function H(pe,qe,Qe){const me="object"==typeof Qe&&Qe||{};me.name=me.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const je=ee.Z.apps.filter(Be=>Be&&Be.name===me.name)[0]||qe.runOutsideAngular(()=>ee.Z.initializeApp(pe,me));try{JSON.stringify(pe)!==JSON.stringify(je.options)&&U("error",`${je.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(je)}const U=(pe,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[pe](...qe)},Z={provide:he,useFactory:H,deps:[le,I.R0b,[new I.FiY,ve]]};let We=(()=>{class pe{constructor(Qe){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",I.q4F.full,Qe.toString())}static initializeApp(Qe,Te){return{ngModule:pe,providers:[{provide:le,useValue:Qe},{provide:ve,useValue:Te}]}}}return pe.\u0275fac=function(Qe){return new(Qe||pe)(I.LFG(I.Lbi))},pe.\u0275mod=I.oAB({type:pe}),pe.\u0275inj=I.cJS({providers:[Z]}),pe})();function xe(pe,qe,Qe,Te,me){const[,we,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===pe)||[];if(we)return function Ae(pe,qe){try{return pe.toString()===qe.toString()}catch{return pe===qe}}(me,je)||(fe("error",`${qe} was already initialized on the ${Qe} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:me,was:je})),we;{const Be=Te();return globalThis.\u0275AngularfireInstanceCache.push([pe,Be,me]),Be}}const ze=!!ft.hot,fe=(pe,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[pe](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(ft,Se,L)=>{L.d(Se,{q4:()=>Uc,iC:()=>Pn,HU:()=>bo,vb:()=>Eo,JM:()=>nt});var I=L(4650),ee=L(5867),k=L(5861),ae=L(9681),ie=L(2090),de=L(4859),he=L(1877),le=L(8766);const ve="@firebase/installations",H="0.5.16",Z=`w:${H}`,We="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(E){return E instanceof ie.ZR&&E.code.includes("request-failed")}function Te({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function me(E){return{token:E.token,requestStatus:2,expiresIn:Y(E.expiresIn),creationTime:Date.now()}}function we(E,b){return je.apply(this,arguments)}function je(){return(je=(0,k.Z)(function*(E,b){const P=(yield b.json()).error;return qe.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Be({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function V(E,{refreshToken:b}){const A=Be(E);return A.append("Authorization",function ne(E){return`${We} ${E}`}(b)),A}function ue(E){return G.apply(this,arguments)}function G(){return(G=(0,k.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function Y(E){return Number(E.replace("s","000"))}function te(E,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:A}){const P=Te(E),W=Be(E),J=b.getImmediate({optional:!0});if(J){const it=yield J.getHeartbeatsHeader();it&&W.append("x-firebase-client",it)}const Fe={method:"POST",headers:W,body:JSON.stringify({fid:A,authVersion:We,appId:E.appId,sdkVersion:Z})},Ke=yield ue(()=>fetch(P,Fe));if(Ke.ok){const it=yield Ke.json();return{fid:it.fid||A,registrationStatus:2,refreshToken:it.refreshToken,authToken:me(it.authToken)}}throw yield we("Create Installation",Ke)})).apply(this,arguments)}function Ne(E){return new Promise(b=>{setTimeout(b,E)})}const zt=/^[cdef][\w-]{21}$/;function Ye(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Xt(E){return function at(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return zt.test(A)?A:""}catch{return""}}function ln(E){return`${E.appName}!${E.appId}`}const Gt=new Map;function qt(E,b){const A=ln(E);rn(A,b),function Qi(E,b){const A=function br(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=E=>{rn(E.data.key,E.data.fid)}),ti}();A&&A.postMessage({key:E,fid:b}),function kr(){0===Gt.size&&ti&&(ti.close(),ti=null)}()}(A,b)}function rn(E,b){const A=Gt.get(E);if(A)for(const P of A)P(b)}let ti=null;const zr="firebase-installations-store";let qr=null;function Go(){return qr||(qr=(0,le.X3)("firebase-installations-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(zr)}})),qr}function Je(E,b){return yr.apply(this,arguments)}function yr(){return(yr=(0,k.Z)(function*(E,b){const A=ln(E),W=(yield Go()).transaction(zr,"readwrite"),J=W.objectStore(zr),Ie=yield J.get(A);return yield J.put(b,A),yield W.done,(!Ie||Ie.fid!==b.fid)&&qt(E,b.fid),b})).apply(this,arguments)}function Ji(E){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(E){const b=ln(E),P=(yield Go()).transaction(zr,"readwrite");yield P.objectStore(zr).delete(b),yield P.done})).apply(this,arguments)}function Kr(E,b){return pi.apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*(E,b){const A=ln(E),W=(yield Go()).transaction(zr,"readwrite"),J=W.objectStore(zr),Ie=yield J.get(A),Fe=b(Ie);return void 0===Fe?yield J.delete(A):yield J.put(Fe,A),yield W.done,Fe&&(!Ie||Ie.fid!==Fe.fid)&&qt(E,Fe.fid),Fe})).apply(this,arguments)}function Cn(E){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(E){let b;const A=yield Kr(E.appConfig,P=>{const W=on(P),J=pt(E,W);return b=J.registrationPromise,J.installationEntry});return""===A.fid?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}})).apply(this,arguments)}function on(E){return Tt(E||{fid:Ye(),registrationStatus:0})}function pt(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(qe.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},P=function ot(E,b){return Jt.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:P}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:rr(E)}:{installationEntry:b}}function Jt(){return(Jt=(0,k.Z)(function*(E,b){try{const A=yield te(E,b);return Je(E.appConfig,A)}catch(A){throw Qe(A)&&409===A.customData.serverCode?yield Ji(E.appConfig):yield Je(E.appConfig,{fid:b.fid,registrationStatus:0}),A}})).apply(this,arguments)}function rr(E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,k.Z)(function*(E){let b=yield Pr(E.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield Pr(E.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield Cn(E);return P||A}return b})).apply(this,arguments)}function Pr(E){return Kr(E,b=>{if(!b)throw qe.create("installation-not-found");return Tt(b)})}function Tt(E){return function Xi(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Zt(E,b){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:b},A){const P=Yt(E,A),W=V(E,A),J=b.getImmediate({optional:!0});if(J){const it=yield J.getHeartbeatsHeader();it&&W.append("x-firebase-client",it)}const Fe={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Z,appId:E.appId}})},Ke=yield ue(()=>fetch(P,Fe));if(Ke.ok)return me(yield Ke.json());throw yield we("Generate Auth Token",Ke)})).apply(this,arguments)}function Yt(E,{fid:b}){return`${Te(E)}/${b}/authTokens:generate`}function Vn(E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,k.Z)(function*(E,b=!1){let A;const P=yield Kr(E.appConfig,J=>{if(!xt(J))throw qe.create("not-registered");const Ie=J.authToken;if(!b&&B(Ie))return J;if(1===Ie.requestStatus)return A=tt(E,b),J;{if(!navigator.onLine)throw qe.create("app-offline");const Fe=z(J);return A=It(E,Fe),Fe}});return A?yield A:P.authToken})).apply(this,arguments)}function tt(E,b){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(E,b){let A=yield et(E.appConfig);for(;1===A.authToken.requestStatus;)yield Ne(100),A=yield et(E.appConfig);const P=A.authToken;return 0===P.requestStatus?Vn(E,b):P})).apply(this,arguments)}function et(E){return Kr(E,b=>{if(!xt(b))throw qe.create("not-registered");return function _e(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function It(E,b){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(E,b){try{const A=yield Zt(E,b),P=Object.assign(Object.assign({},b),{authToken:A});return yield Je(E.appConfig,P),A}catch(A){if(!Qe(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Je(E.appConfig,P)}else yield Ji(E.appConfig);throw A}})).apply(this,arguments)}function xt(E){return void 0!==E&&2===E.registrationStatus}function B(E){return 2===E.requestStatus&&!function F(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+36e5}(E)}function z(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}function He(){return(He=(0,k.Z)(function*(E){const b=E,{installationEntry:A,registrationPromise:P}=yield Cn(b);return P?P.catch(console.error):Vn(b).catch(console.error),A.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,k.Z)(function*(E,b=!1){const A=E;return yield sn(A),(yield Vn(A,b)).token})).apply(this,arguments)}function sn(E){return jt.apply(this,arguments)}function jt(){return(jt=(0,k.Z)(function*(E){const{registrationPromise:b}=yield Cn(E);b&&(yield b)})).apply(this,arguments)}function es(E){return qe.create("missing-app-config-values",{valueName:E})}const io="installations",hn=E=>{const b=E.getProvider("app").getImmediate(),A=function dn(E){if(!E||!E.options)throw es("App Configuration");if(!E.name)throw es("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!E.options[A])throw es(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,ae._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},As=E=>{const b=E.getProvider("app").getImmediate(),A=(0,ae._getProvider)(b,io).getImmediate();return{getId:()=>function K(E){return He.apply(this,arguments)}(A),getToken:W=>function ut(E){return Kt.apply(this,arguments)}(A,W)}};(function Xa(){(0,ae._registerComponent)(new de.wA(io,hn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("installations-internal",As,"PRIVATE"))})(),(0,ae.registerVersion)(ve,H),(0,ae.registerVersion)(ve,H,"esm2017");const mi="@firebase/remote-config",Rn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ch{constructor(b,A,P,W){this.client=b,this.storage=A,this.storageCache=P,this.logger=W}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,W=P<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var A=this;return(0,k.Z)(function*(){const[P,W]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(W&&A.isCachedDataFresh(b.cacheMaxAgeMillis,P))return W;b.eTag=W&&W.eTag;const J=yield A.client.fetch(b),Ie=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Ie.push(A.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Ie),J})()}}function mc(E=navigator){return E.languages&&E.languages[0]||E.language}class yc{constructor(b,A,P,W,J,Ie){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=P,this.projectId=W,this.apiKey=J,this.appId=Ie}fetch(b){var A=this;return(0,k.Z)(function*(){var P,W,J;const[Ie,Fe]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),it=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},dt={sdk_version:A.sdkVersion,app_instance_id:Ie,app_instance_id_token:Fe,app_id:A.appId,language_code:mc()},tr={method:"POST",headers:mt,body:JSON.stringify(dt)},Hn=fetch(it,tr),Ar=new Promise((Ii,_s)=>{b.signal.addEventListener(()=>{const ma=new Error("The operation was aborted.");ma.name="AbortError",_s(ma)})});let ys;try{yield Promise.race([Hn,Ar]),ys=yield Hn}catch(Ii){let _s="fetch-client-network";throw"AbortError"===(null===(P=Ii)||void 0===P?void 0:P.name)&&(_s="fetch-timeout"),Rn.create(_s,{originalErrorMessage:null===(W=Ii)||void 0===W?void 0:W.message})}let Ws=ys.status;const jc=ys.headers.get("ETag")||void 0;let $c,zs;if(200===ys.status){let Ii;try{Ii=yield ys.json()}catch(_s){throw Rn.create("fetch-client-parse",{originalErrorMessage:null===(J=_s)||void 0===J?void 0:J.message})}$c=Ii.entries,zs=Ii.state}if("INSTANCE_STATE_UNSPECIFIED"===zs?Ws=500:"NO_CHANGE"===zs?Ws=304:("NO_TEMPLATE"===zs||"EMPTY_CONFIG"===zs)&&($c={}),304!==Ws&&200!==Ws)throw Rn.create("fetch-status",{httpStatus:Ws});return{status:Ws,eTag:jc,config:$c}})()}}class rp{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,k.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,P)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:P}){var W=this;return(0,k.Z)(function*(){yield function Un(E,b){return new Promise((A,P)=>{const W=Math.max(b-Date.now(),0),J=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(J),P(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const J=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),J}catch(J){if(!function $l(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(J))throw J;const Ie={throttleEndTimeMillis:Date.now()+(0,ie.$s)(P),backoffCount:P+1};return yield W.storage.setThrottleMetadata(Ie),W.attemptFetch(b,Ie)}})()}}class Hl{constructor(b,A,P,W,J){this.app=b,this._client=A,this._storageCache=P,this._storage=W,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _c(E,b){var A;const P=E.target.error||void 0;return Rn.create(b,{originalErrorMessage:P&&(null===(A=P)||void 0===A?void 0:A.message)})}const is="app_namespace_store";class ap{constructor(b,A,P,W=function op(){return new Promise((E,b)=>{var A;try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=W=>{b(_c(W,"storage-open"))},P.onsuccess=W=>{E(W.target.result)},P.onupgradeneeded=W=>{0===W.oldVersion&&W.target.result.createObjectStore(is,{keyPath:"compositeKey"})}}catch(P){b(Rn.create("storage-open",{originalErrorMessage:null===(A=P)||void 0===A?void 0:A.message}))}})}()){this.appId=b,this.appName=A,this.namespace=P,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,k.Z)(function*(){const P=yield A.openDbPromise;return new Promise((W,J)=>{var Ie;const Ke=P.transaction([is],"readonly").objectStore(is),it=A.createCompositeKey(b);try{const mt=Ke.get(it);mt.onerror=dt=>{J(_c(dt,"storage-get"))},mt.onsuccess=dt=>{const tr=dt.target.result;W(tr?tr.value:void 0)}}catch(mt){J(Rn.create("storage-get",{originalErrorMessage:null===(Ie=mt)||void 0===Ie?void 0:Ie.message}))}})})()}set(b,A){var P=this;return(0,k.Z)(function*(){const W=yield P.openDbPromise;return new Promise((J,Ie)=>{var Fe;const it=W.transaction([is],"readwrite").objectStore(is),mt=P.createCompositeKey(b);try{const dt=it.put({compositeKey:mt,value:A});dt.onerror=tr=>{Ie(_c(tr,"storage-set"))},dt.onsuccess=()=>{J()}}catch(dt){Ie(Rn.create("storage-set",{originalErrorMessage:null===(Fe=dt)||void 0===Fe?void 0:Fe.message}))}})})()}delete(b){var A=this;return(0,k.Z)(function*(){const P=yield A.openDbPromise;return new Promise((W,J)=>{var Ie;const Ke=P.transaction([is],"readwrite").objectStore(is),it=A.createCompositeKey(b);try{const mt=Ke.delete(it);mt.onerror=dt=>{J(_c(dt,"storage-delete"))},mt.onsuccess=()=>{W()}}catch(mt){J(Rn.create("storage-delete",{originalErrorMessage:null===(Ie=mt)||void 0===Ie?void 0:Ie.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Wl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const A=b.storage.getLastFetchStatus(),P=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),J=yield A;J&&(b.lastFetchStatus=J);const Ie=yield P;Ie&&(b.lastSuccessfulFetchTimestampMillis=Ie);const Fe=yield W;Fe&&(b.activeConfig=Fe)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function nu(){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function ss(){(0,ae._registerComponent)(new de.wA("remote-config",function E(b,{instanceIdentifier:A}){const P=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!(0,ie.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:J,apiKey:Ie,appId:Fe}=P.options;if(!J)throw Rn.create("registration-project-id");if(!Ie)throw Rn.create("registration-api-key");if(!Fe)throw Rn.create("registration-app-id");const Ke=new ap(Fe,P.name,A=A||"firebase"),it=new Wl(Ke),mt=new he.Yd(mi);mt.logLevel=he.in.ERROR;const dt=new yc(W,ae.SDK_VERSION,A,J,Ie,Fe),tr=new rp(dt,Ke),Hn=new Ch(tr,Ke,it,mt),Ar=new Hl(P,Hn,it,Ke,mt);return function sr(E){const b=(0,ie.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ar),Ar},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(mi,"0.3.15"),(0,ae.registerVersion)(mi,"0.3.15","esm2017")}();const yi="/firebase-messaging-sw.js",Ri="/firebase-cloud-messaging-push-scope",ki="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qo="google.c.a.c_id",ru="google.c.a.c_l",vc="google.c.a.ts",Ah="google.c.a.e";var Pi=(()=>{return(E=Pi||(Pi={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",Pi;var E})();function Zr(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lr(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),W=new Uint8Array(P.length);for(let J=0;J<P.length;++J)W[J]=P.charCodeAt(J);return W}const so="fcm_token_details_db",or="fcm_token_object_Store";function xh(E){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,k.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(so))return null;let b=null;return(yield(0,le.X3)(so,5,{upgrade:(P=(0,k.Z)(function*(W,J,Ie,Fe){var Ke;if(J<2||!W.objectStoreNames.contains(or))return;const it=Fe.objectStore(or),mt=yield it.index("fcmSenderId").get(E);if(yield it.clear(),mt)if(2===J){const dt=mt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;b={token:dt.fcmToken,createTime:null!==(Ke=dt.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:Zr(dt.vapidKey)}}}else if(3===J){const dt=mt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Zr(dt.auth),p256dh:Zr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Zr(dt.vapidKey)}}}else if(4===J){const dt=mt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Zr(dt.auth),p256dh:Zr(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Zr(dt.vapidKey)}}}}),function(J,Ie,Fe,Ke){return P.apply(this,arguments)})})).close(),yield(0,le.Lj)(so),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),mn(b)?b:null;var P}),Mh.apply(this,arguments)}function mn(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Yr="firebase-messaging-store";let vr=null;function iu(){return vr||(vr=(0,le.X3)("firebase-messaging-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Yr)}})),vr}function oo(E){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,k.Z)(function*(E){const b=ii(E),P=yield(yield iu()).transaction(Yr).objectStore(Yr).get(b);if(P)return P;{const W=yield xh(E.appConfig.senderId);if(W)return yield $t(E,W),W}})).apply(this,arguments)}function $t(E,b){return su.apply(this,arguments)}function su(){return(su=(0,k.Z)(function*(E,b){const A=ii(E),W=(yield iu()).transaction(Yr,"readwrite");return yield W.objectStore(Yr).put(b,A),yield W.done,b})).apply(this,arguments)}function Rs(E){return ou.apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(E){const b=ii(E),P=(yield iu()).transaction(Yr,"readwrite");yield P.objectStore(Yr).delete(b),yield P.done})).apply(this,arguments)}function ii({appConfig:E}){return E.appId}const fn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dt(E,b){return uu.apply(this,arguments)}function uu(){return(uu=(0,k.Z)(function*(E,b){var A;const P=yield Ec(E),W=Ee(b),J={method:"POST",headers:P,body:JSON.stringify(W)};let Ie;try{Ie=yield(yield fetch(Li(E.appConfig),J)).json()}catch(Fe){throw fn.create("token-subscribe-failed",{errorInfo:null===(A=Fe)||void 0===A?void 0:A.toString()})}if(Ie.error)throw fn.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw fn.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function Nh(E,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,k.Z)(function*(E,b){var A;const P=yield Ec(E),W=Ee(b.subscriptionOptions),J={method:"PATCH",headers:P,body:JSON.stringify(W)};let Ie;try{Ie=yield(yield fetch(`${Li(E.appConfig)}/${b.token}`,J)).json()}catch(Fe){throw fn.create("token-update-failed",{errorInfo:null===(A=Fe)||void 0===A?void 0:A.toString()})}if(Ie.error)throw fn.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw fn.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function lu(E,b){return wc.apply(this,arguments)}function wc(){return(wc=(0,k.Z)(function*(E,b){var A;const W={method:"DELETE",headers:yield Ec(E)};try{const Ie=yield(yield fetch(`${Li(E.appConfig)}/${b}`,W)).json();if(Ie.error)throw fn.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(J){throw fn.create("token-unsubscribe-failed",{errorInfo:null===(A=J)||void 0===A?void 0:A.toString()})}})).apply(this,arguments)}function Li({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Ec(E){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*({appConfig:E,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Ee({p256dh:E,auth:b,endpoint:A,vapidKey:P}){const W={web:{endpoint:A,auth:b,p256dh:E}};return P!==ki&&(W.web.applicationPubKey=P),W}const Ft=6048e5;function du(E){return hu.apply(this,arguments)}function hu(){return(hu=(0,k.Z)(function*(E){const b=yield Dc(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:Zr(b.getKey("auth")),p256dh:Zr(b.getKey("p256dh"))},P=yield oo(E.firebaseDependencies);if(P){if(Zl(P.subscriptionOptions,A))return Date.now()>=P.createTime+Ft?ao(E,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield lu(E.firebaseDependencies,P.token)}catch(W){console.warn(W)}return Yo(E.firebaseDependencies,A)}return Yo(E.firebaseDependencies,A)})).apply(this,arguments)}function yn(E){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(E){const b=yield oo(E.firebaseDependencies);b&&(yield lu(E.firebaseDependencies,b.token),yield Rs(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function ao(E,b){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,k.Z)(function*(E,b){try{const A=yield Nh(E.firebaseDependencies,b),P=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield $t(E.firebaseDependencies,P),A}catch(A){throw yield yn(E),A}})).apply(this,arguments)}function Yo(E,b){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,k.Z)(function*(E,b){const P={token:yield Dt(E,b),createTime:Date.now(),subscriptionOptions:b};return yield $t(E,P),P.token})).apply(this,arguments)}function Dc(E,b){return bc.apply(this,arguments)}function bc(){return(bc=(0,k.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lr(b)})})).apply(this,arguments)}function Zl(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}function Jo(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function _n(E,b){if(!b.notification)return;E.notification={};const A=b.notification.title;A&&(E.notification.title=A);const P=b.notification.body;P&&(E.notification.body=P);const W=b.notification.image;W&&(E.notification.image=W);const J=b.notification.icon;J&&(E.notification.icon=J)}(b,E),function _i(E,b){!b.data||(E.data=b.data)}(b,E),function Tc(E,b){var A,P,W,J,Ie;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Fe=null!==(W=null===(P=b.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==W?W:null===(J=b.notification)||void 0===J?void 0:J.click_action;Fe&&(E.fcmOptions.link=Fe);const Ke=null===(Ie=b.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Ke&&(E.fcmOptions.analyticsLabel=Ke)}(b,E),b}function ks(E){return"object"==typeof E&&!!E&&qo in E}function Fi(E,b){const A=[];for(let P=0;P<E.length;P++)A.push(E.charAt(P)),P<b.length&&A.push(b.charAt(P));return A.join("")}function Xo(E){return fn.create("missing-app-config-values",{valueName:E})}Fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lp{constructor(b,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function cp(E){if(!E||!E.options)throw Xo("App Configuration Object");if(!E.name)throw Xo("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const P of b)if(!A[P])throw Xo(P);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Cc(E){return pu.apply(this,arguments)}function pu(){return(pu=(0,k.Z)(function*(E){var b;try{E.swRegistration=yield navigator.serviceWorker.register(yi,{scope:Ri}),E.swRegistration.update().catch(()=>{})}catch(A){throw fn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=A)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function ea(E,b){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield Cc(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function ta(E,b){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,k.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=ki)})).apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(E,b){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield ta(E,b?.vapidKey),yield ea(E,b?.serviceWorkerRegistration),du(E)})).apply(this,arguments)}function xc(E,b,A){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(E,b,A){const P=Nc(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[qo],message_name:A[ru],message_time:A[vc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nc(E){switch(E){case Pi.NOTIFICATION_CLICKED:return"notification_open";case Pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ps(){return(Ps=(0,k.Z)(function*(E,b){const A=b.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===Pi.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Jo(A)):E.onMessageHandler.next(Jo(A)));const P=A.data;ks(P)&&"1"===P[Ah]&&(yield xc(E,A.messageType,P))})).apply(this,arguments)}const Os="@firebase/messaging",jn=E=>{const b=new lp(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Yl(E,b){return Ps.apply(this,arguments)}(b,A)),b},Fr=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:P=>function gu(E,b){return mu.apply(this,arguments)}(b,P)}};function Ql(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function an(){(0,ae._registerComponent)(new de.wA("messaging",jn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("messaging-internal",Fr,"PRIVATE")),(0,ae.registerVersion)(Os,"0.11.0"),(0,ae.registerVersion)(Os,"0.11.0","esm2017")}();const co="analytics",ed="firebase_id",Fs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iu="https://www.googletagmanager.com/gtag/js",vn=new he.Yd("@firebase/analytics");function wu(E){return Promise.all(E.map(b=>b.catch(A=>A)))}function Eu(E,b){const A=document.createElement("script");A.src=`${Iu}?l=${E}&id=${b}`,A.async=!0,document.head.appendChild(A)}function kh(E,b,A,P,W,J){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(E,b,A,P,W,J){const Ie=P[W];try{if(Ie)yield b[Ie];else{const Ke=(yield wu(A)).find(it=>it.measurementId===W);Ke&&(yield b[Ke.appId])}}catch(Fe){vn.error(Fe)}E("config",W,J)})).apply(this,arguments)}function ho(E,b,A,P,W){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,k.Z)(function*(E,b,A,P,W){try{let J=[];if(W&&W.send_to){let Ie=W.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Fe=yield wu(A);for(const Ke of Ie){const it=Fe.find(dt=>dt.measurementId===Ke),mt=it&&b[it.appId];if(!mt){J=[];break}J.push(mt)}}0===J.length&&(J=Object.values(b)),yield Promise.all(J),E("event",P,W||{})}catch(J){vn.error(J)}})).apply(this,arguments)}function nd(E){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(Iu)&&A.src.includes(E))return A;return null}const Xn=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sa=new class vi{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function id(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function oa(E){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,k.Z)(function*(E){var b;const{appId:A,apiKey:P}=E,W={method:"GET",headers:id(P)},J=Fs.replace("{app-id}",A),Ie=yield fetch(J,W);if(200!==Ie.status&&304!==Ie.status){let Fe="";try{const Ke=yield Ie.json();null!==(b=Ke.error)&&void 0!==b&&b.message&&(Fe=Ke.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Fe})}return Ie.json()})).apply(this,arguments)}function Sn(E){return si.apply(this,arguments)}function si(){return(si=(0,k.Z)(function*(E,b=sa,A){const{appId:P,apiKey:W,measurementId:J}=E.options;if(!P)throw Xn.create("no-app-id");if(!W){if(J)return{measurementId:J,appId:P};throw Xn.create("no-api-key")}const Ie=b.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new Cu;return setTimeout((0,k.Z)(function*(){Fe.abort()}),void 0!==A?A:6e4),bu({appId:P,apiKey:W,measurementId:J},Ie,Fe,b)})).apply(this,arguments)}function bu(E,b,A){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,k.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:A},P,W=sa){var J,Ie;const{appId:Fe,measurementId:Ke}=E;try{yield aa(P,b)}catch(it){if(Ke)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${null===(J=it)||void 0===J?void 0:J.message}]`),{appId:Fe,measurementId:Ke};throw it}try{const it=yield oa(E);return W.deleteThrottleMetadata(Fe),it}catch(it){const mt=it;if(!Tu(mt)){if(W.deleteThrottleMetadata(Fe),Ke)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:Fe,measurementId:Ke};throw it}const dt=503===Number(null===(Ie=mt?.customData)||void 0===Ie?void 0:Ie.httpStatus)?(0,ie.$s)(A,W.intervalMillis,30):(0,ie.$s)(A,W.intervalMillis),tr={throttleEndTimeMillis:Date.now()+dt,backoffCount:A+1};return W.setThrottleMetadata(Fe,tr),vn.debug(`Calling attemptFetch again in ${dt} millis`),bu(E,tr,P,W)}})).apply(this,arguments)}function aa(E,b){return new Promise((A,P)=>{const W=Math.max(b-Date.now(),0),J=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(J),P(Xn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Tu(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Cu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let us,la;function cs(){return(cs=(0,k.Z)(function*(E,b,A,P,W){if(W&&W.global)E("event",A,P);else{const J=yield b;E("event",A,Object.assign(Object.assign({},P),{send_to:J}))}})).apply(this,arguments)}function js(E){la=E}function Fc(E){us=E}function ds(){return Au.apply(this,arguments)}function Au(){return(Au=(0,k.Z)(function*(){var E;if(!(0,ie.hl)())return vn.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(b){return vn.warn(Xn.create("indexeddb-unavailable",{errorInfo:null===(E=b)||void 0===E?void 0:E.toString()}).message),!1}return!0})).apply(this,arguments)}function po(){return(po=(0,k.Z)(function*(E,b,A,P,W,J,Ie){var Fe;const Ke=Sn(E);Ke.then(Hn=>{A[Hn.measurementId]=Hn.appId,E.options.measurementId&&Hn.measurementId!==E.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hn=>vn.error(Hn)),b.push(Ke);const it=ds().then(Hn=>{if(Hn)return P.getId()}),[mt,dt]=yield Promise.all([Ke,it]);nd(J)||Eu(J,mt.measurementId),la&&(W("consent","default",la),js(void 0)),W("js",new Date);const tr=null!==(Fe=Ie?.config)&&void 0!==Fe?Fe:{};return tr.origin="firebase",tr.update=!0,null!=dt&&(tr[ed]=dt),W("config",mt.measurementId,tr),us&&(W("set",us),Fc(void 0)),mt.measurementId})).apply(this,arguments)}class xu{constructor(b){this.app=b}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},hs=[];const go={};let yo,$s,mo="dataLayer",da=!1;function wm(E,b,A){!function dp(){const E=[];if((0,ie.ru)()&&E.push("This is a browser extension environment."),(0,ie.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((P,W)=>`(${W+1}) ${P}`).join(" "),A=Xn.create("invalid-analytics-context",{errorInfo:b});vn.warn(A.message)}}();const P=E.options.appId;if(!P)throw Xn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Xn.create("no-api-key");vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[P])throw Xn.create("already-exists",{id:P});if(!da){!function td(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(mo);const{wrappedGtag:J,gtagCore:Ie}=function na(E,b,A,P,W){let J=function(...Ie){window[P].push(arguments)};return window[W]&&"function"==typeof window[W]&&(J=window[W]),window[W]=function Du(E,b,A,P){function J(){return(J=(0,k.Z)(function*(Ie,Fe,Ke){try{"event"===Ie?yield ho(E,b,A,Fe,Ke):"config"===Ie?yield kh(E,b,A,P,Fe,Ke):"consent"===Ie?E("consent","update",Ke):E("set",Fe)}catch(it){vn.error(it)}})).apply(this,arguments)}return function W(Ie,Fe,Ke){return J.apply(this,arguments)}}(J,E,b,A),{gtagCore:J,wrappedGtag:window[W]}}(Vr,hs,go,mo,"gtag");$s=J,yo=Ie,da=!0}return Vr[P]=function fo(E,b,A,P,W,J,Ie){return po.apply(this,arguments)}(E,hs,go,b,yo,mo,A),new xu(E)}function Dm(){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const Bc="@firebase/analytics";!function Ir(){(0,ae._registerComponent)(new de.wA(co,(b,{options:A})=>wm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ae._registerComponent)(new de.wA("analytics-internal",function E(b){try{const A=b.getProvider(co).getImmediate();return{logEvent:(P,W,J)=>function Br(E,b,A,P){E=(0,ie.m9)(E),function sd(E,b,A,P,W){return cs.apply(this,arguments)}($s,Vr[E.app.options.appId],b,A,P).catch(W=>vn.error(W))}(A,P,W,J)}}catch(A){throw Xn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ae.registerVersion)(Bc,"0.8.4"),(0,ae.registerVersion)(Bc,"0.8.4","esm2017")}();var ar=L(4408),vo=L(7565);const ha=new class fs extends vo.v{}(class $n extends ar.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(b,A,P):(b.flush(this),0)}});var fa=L(4986),Jr=L(576),gs=L(4482),ur=L(5403),Ur=L(4671),Hs=L(9468),ad=L(5363);const Uc=new I.GfV("7.5.0"),Io="__angularfire_symbol__analyticsIsSupportedValue",ud="__angularfire_symbol__analyticsIsSupported",ga="__angularfire_symbol__remoteConfigIsSupportedValue",ge="__angularfire_symbol__remoteConfigIsSupported",ai="__angularfire_symbol__messagingIsSupportedValue",wo="__angularfire_symbol__messagingIsSupported";function nt(E,b,A){if(b){if(1===b.length)return b[0];const J=b.filter(Ie=>Ie.app===A);if(1===J.length)return J[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[ud]||(globalThis[ud]=Dm().then(E=>globalThis[Io]=E).catch(()=>globalThis[Io]=!1)),globalThis[wo]||(globalThis[wo]=Ql().then(E=>globalThis[ai]=E).catch(()=>globalThis[ai]=!1)),globalThis[ge]||(globalThis[ge]=nu().then(E=>globalThis[ga]=E).catch(()=>globalThis[ga]=!1));const Eo=(E,b)=>{const A=b?[b]:(0,ee.C6)(),P=[];return A.forEach(W=>{W.container.getProvider(E).instances.forEach(Ie=>{P.includes(Ie)||P.push(Ie)})}),P};function gt(){}class Gs{constructor(b,A=ha){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,P){const W=this.zone;return this.delegate.schedule(function(Ie){W.runGuarded(()=>{b.apply(this,[Ie])})},A,P)}}class Do{constructor(b){this.zone=b,this.task=null}call(b,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gt,{},gt,gt)),A.pipe(function pa(E,b,A){const P=(0,Jr.m)(E)||b||A?{next:E,error:b,complete:A}:E;return P?(0,gs.e)((W,J)=>{var Ie;null===(Ie=P.subscribe)||void 0===Ie||Ie.call(P);let Fe=!0;W.subscribe((0,ur.x)(J,Ke=>{var it;null===(it=P.next)||void 0===it||it.call(P,Ke),J.next(Ke)},()=>{var Ke;Fe=!1,null===(Ke=P.complete)||void 0===Ke||Ke.call(P),J.complete()},Ke=>{var it;Fe=!1,null===(it=P.error)||void 0===it||it.call(P,Ke),J.error(Ke)},()=>{var Ke,it;Fe&&(null===(Ke=P.unsubscribe)||void 0===Ke||Ke.call(P)),null===(it=P.finalize)||void 0===it||it.call(P)}))}):Ur.y}({next:P,complete:P,error:P})).subscribe(b).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bo=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Gs(Zone.current)),this.insideAngular=A.run(()=>new Gs(Zone.current,fa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(I.LFG(I.R0b))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function jr(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Pn(E){return jr(),function To(E){return function(A){return(A=A.lift(new Do(E.ngZone))).pipe((0,Hs.R)(E.outsideAngular),(0,ad.Q)(E.insideAngular))}}(jr())(E)}},2090:(ft,Se,L)=>{L.d(Se,{$s:()=>et,BH:()=>Pt,G6:()=>we,L:()=>le,LL:()=>Gt,Pz:()=>zt,Sg:()=>Ye,UG:()=>Ae,US:()=>de,ZB:()=>U,ZR:()=>ln,aH:()=>at,b$:()=>pe,eu:()=>Be,hl:()=>je,jU:()=>ze,m9:()=>xt,ne:()=>xn,pd:()=>pi,r3:()=>ni,ru:()=>fe,tV:()=>ve,uI:()=>xe,vZ:()=>Je,w1:()=>Qe,xO:()=>Fn,xb:()=>qr,z$:()=>We,zI:()=>V,zd:()=>Kr});const ae=function(B){const F=[];let z=0;for(let _e=0;_e<B.length;_e++){let K=B.charCodeAt(_e);K<128?F[z++]=K:K<2048?(F[z++]=K>>6|192,F[z++]=63&K|128):55296==(64512&K)&&_e+1<B.length&&56320==(64512&B.charCodeAt(_e+1))?(K=65536+((1023&K)<<10)+(1023&B.charCodeAt(++_e)),F[z++]=K>>18|240,F[z++]=K>>12&63|128,F[z++]=K>>6&63|128,F[z++]=63&K|128):(F[z++]=K>>12|224,F[z++]=K>>6&63|128,F[z++]=63&K|128)}return F},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let K=0;K<B.length;K+=3){const He=B[K],ut=K+1<B.length,Kt=ut?B[K+1]:0,sn=K+2<B.length,jt=sn?B[K+2]:0;let Rt=(15&Kt)<<2|jt>>6,Qn=63&jt;sn||(Qn=64,ut||(Rt=64)),_e.push(z[He>>2],z[(3&He)<<4|Kt>>4],z[Rt],z[Qn])}return _e.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(ae(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let z=0,_e=0;for(;z<B.length;){const K=B[z++];if(K<128)F[_e++]=String.fromCharCode(K);else if(K>191&&K<224){const He=B[z++];F[_e++]=String.fromCharCode((31&K)<<6|63&He)}else if(K>239&&K<365){const sn=((7&K)<<18|(63&B[z++])<<12|(63&B[z++])<<6|63&B[z++])-65536;F[_e++]=String.fromCharCode(55296+(sn>>10)),F[_e++]=String.fromCharCode(56320+(1023&sn))}else{const He=B[z++],ut=B[z++];F[_e++]=String.fromCharCode((15&K)<<12|(63&He)<<6|63&ut)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const z=F?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let K=0;K<B.length;){const He=z[B.charAt(K++)],Kt=K<B.length?z[B.charAt(K)]:0;++K;const jt=K<B.length?z[B.charAt(K)]:64;++K;const $e=K<B.length?z[B.charAt(K)]:64;if(++K,null==He||null==Kt||null==jt||null==$e)throw Error();_e.push(He<<2|Kt>>4),64!==jt&&(_e.push(Kt<<4&240|jt>>2),64!==$e&&_e.push(jt<<6&192|$e))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const F=ae(B);return de.encodeByteArray(F,!0)}(B).replace(/\./g,"")},ve=function(B){try{return de.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function U(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const z in F)!F.hasOwnProperty(z)||!Z(z)||(B[z]=U(B[z],F[z]));return B}function Z(B){return"__proto__"!==B}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function fe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const B=We();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function we(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function Be(){return new Promise((B,F)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(_e);K.onsuccess=()=>{K.result.close(),z||self.indexedDB.deleteDatabase(_e),B(!0)},K.onupgradeneeded=()=>{z=!1},K.onerror=()=>{var He;F((null===(He=K.error)||void 0===He?void 0:He.message)||"")}}catch(z){F(z)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&ve(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},at=()=>{var B;return null===(B=te())||void 0===B?void 0:B.config},zt=B=>{var F;return null===(F=te())||void 0===F?void 0:F[`_${B}`]};class Pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,z)=>{this.resolve=F,this.reject=z})}wrapCallback(F){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(z):F(z,_e))}}}function Ye(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=F||"demo-project",K=B.iat||0,He=B.sub||B.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:K,exp:K+3600,auth_time:K,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ut)),""].join(".")}class ln extends Error{constructor(F,z,_e){super(z),this.code=F,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(F,z,_e){this.service=F,this.serviceName=z,this.errors=_e}create(F,...z){const _e=z[0]||{},K=`${this.service}/${F}`,He=this.errors[F],ut=He?function qt(B,F){return B.replace(Dr,(z,_e)=>{const K=F[_e];return null!=K?String(K):`<${_e}?>`})}(He,_e):"Error";return new ln(K,`${this.serviceName}: ${ut} (${K}).`,_e)}}const Dr=/\{\$([^}]+)}/g;function ni(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function qr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function Je(B,F){if(B===F)return!0;const z=Object.keys(B),_e=Object.keys(F);for(const K of z){if(!_e.includes(K))return!1;const He=B[K],ut=F[K];if(yr(He)&&yr(ut)){if(!Je(He,ut))return!1}else if(He!==ut)return!1}for(const K of _e)if(!z.includes(K))return!1;return!0}function yr(B){return null!==B&&"object"==typeof B}function Fn(B){const F=[];for(const[z,_e]of Object.entries(B))Array.isArray(_e)?_e.forEach(K=>{F.push(encodeURIComponent(z)+"="+encodeURIComponent(K))}):F.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return F.length?"&"+F.join("&"):""}function Kr(B){const F={};return B.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[K,He]=_e.split("=");F[decodeURIComponent(K)]=decodeURIComponent(He)}}),F}function pi(B){const F=B.indexOf("?");if(!F)return"";const z=B.indexOf("#",F);return B.substring(F,z>0?z:void 0)}function xn(B,F){const z=new on(B,F);return z.subscribe.bind(z)}class on{constructor(F,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{F(this)}).catch(_e=>{this.error(_e)})}next(F){this.forEachObserver(z=>{z.next(F)})}error(F){this.forEachObserver(z=>{z.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,z,_e){let K;if(void 0===F&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");K=function ot(B,F){if("object"!=typeof B||null===B)return!1;for(const z of F)if(z in B&&"function"==typeof B[z])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:z,complete:_e},void 0===K.next&&(K.next=Jt),void 0===K.error&&(K.error=Jt),void 0===K.complete&&(K.complete=Jt);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),He}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,F)}sendOne(F,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{z(this.observers[F])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jt(){}function et(B,F=1e3,z=2){const _e=F*Math.pow(z,B),K=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+K)}function xt(B){return B&&B._delegate?B._delegate:B}},1258:(ft,Se,L)=>{var I=L(4650);let ee=null;function k(){return ee}const he=new I.OlP("DocumentToken");let en=(()=>{class n{constructor(t,i,a,c){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Wo{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ms=(()=>{class n{constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,c,p)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Wo(a.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)i.remove(null===c?void 0:c);else if(null!==c){const y=i.get(c);i.move(y,p),rs(y,a)}});for(let a=0,c=i.length;a<c;a++){const y=i.get(a).context;y.index=a,y.count=c,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{rs(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function rs(n,e){n.context.$implicit=e.item}let Ko=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({}),n})();function or(n){return"server"===n}class Ps extends class Yl extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new Ps)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yu(){return Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null}();return null==t?null:function Fr(n){jn=jn||document.createElement("a"),jn.setAttribute("href",n);const e=jn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function eu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,c]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let jn,Os=null;const an=new I.OlP("TRANSITION_ID"),Rc=[{provide:I.ip1,useFactory:function Ql(n,e,t){return()=>{t.get(I.CZH).donePromise.then(()=>{const i=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)i.remove(a[c])})}},deps:[an,he,I.zs3],multi:!0}];let kc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=new I.OlP("EventManagerPlugins");let Jl=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}addGlobalEventListener(t,i,a){return this._findPluginFor(i).addGlobalEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const a=this._plugins;for(let c=0;c<a.length;c++){const p=a[c];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(_u),I.LFG(I.R0b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class vu{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,i)}}let Ls=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),i.add(a))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})(),uo=(()=>{class n extends Ls{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,a){t.forEach(c=>{const p=this._doc.createElement("style");p.textContent=c,a.push(i.appendChild(p))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Xl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,a)=>{this._addStylesToHost(t,a,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xl))}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();function Xl(n){k().remove(n)}const co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ed=/%COMP%/g;function Eu(n,e,t){for(let i=0;i<e.length;i++){let a=e[i];Array.isArray(a)?Eu(n,a,t):(a=a.replace(ed,n),t.push(a))}return t}function td(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let lo=(()=>{class n{constructor(t,i,a){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new ho(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case I.ifc.Emulated:{let a=this.rendererByCompId.get(i.id);return a||(a=new nd(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(t),a}case 1:case I.ifc.ShadowDom:return new rd(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const a=Eu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Jl),I.LFG(uo),I.LFG(I.AFp))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(na(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(na(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const c=co[a];c?e.setAttributeNS(c,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=co[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(t,i,a&I.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&I.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,td(i)):this.eventManager.addEventListener(e,t,td(i))}}function na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nd extends ho{constructor(e,t,i,a){super(e),this.component=i;const c=Eu(a+"-"+i.id,i.styles,[]);t.addStyles(c),this.contentAttr=function vn(n){return"_ngcontent-%COMP%".replace(ed,n)}(a+"-"+i.id),this.hostAttr=function wu(n){return"_nghost-%COMP%".replace(ed,n)}(a+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class rd extends ho{constructor(e,t,i,a){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Eu(a.id,a.styles,[]);for(let p=0;p<c.length;p++){const y=document.createElement("style");y.textContent=c[p],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Xn=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const ra=["alt","control","meta","shift"],ia={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let sa=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const c=n.parseEventName(i),p=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,p))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(i.pop());let p="",y=i.indexOf("code");if(y>-1&&(i.splice(y,1),p="code."),ra.forEach(T=>{const M=i.indexOf(T);M>-1&&(i.splice(M,1),p+=T+".")}),p+=c,0!=i.length||0===c.length)return null;const D={};return D.domEventName=a,D.fullKey=p,D}static matchEventFullKeyCode(t,i){let a=ia[t.key]||t.key,c="";return i.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ra.forEach(p=>{p!==a&&(0,vi[p])(t)&&(c+=p+".")}),c+=a,c===i)}static eventCallback(t,i,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>i(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function bu(){Ps.makeCurrent()},multi:!0},{provide:he,useFactory:function aa(){return(0,I.RDi)(document),document},deps:[]}]),us=new I.OlP(""),sd=[{provide:I.rWj,useClass:class Rh{addToWindow(e){I.dqk.getAngularTestability=(i,a=!0)=>{const c=e.findTestabilityInTree(i,a);if(null==c)throw new Error("Could not find testability for element.");return c},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(i=>{const a=I.dqk.getAllAngularTestabilities();let c=a.length,p=!1;const y=function(D){p=p||D,c--,0==c&&i(p)};a.forEach(function(D){D.whenStable(y)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],cs=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function Bs(){return new I.qLn},deps:[]},{provide:_u,useClass:Xn,multi:!0,deps:[he,I.R0b,I.Lbi]},{provide:_u,useClass:sa,multi:!0,deps:[he]},{provide:lo,useClass:lo,deps:[Jl,uo,I.AFp]},{provide:I.FYo,useExisting:lo},{provide:Ls,useExisting:uo},{provide:uo,useClass:uo,deps:[he]},{provide:Jl,useClass:Jl,deps:[_u,I.R0b]},{provide:class oo{},useClass:kc,deps:[]},[]];let Oc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:I.AFp,useValue:t.appId},{provide:an,useExisting:I.AFp},Rc]}}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(us,12))},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[...cs,...sd],imports:[Ko,I.hGG]}),n})();typeof window<"u"&&window;var Br=L(2011),_o=L(4986),Bc=L(8306),oi=L(8996),Ir=L(7669);function ar(...n){const e=(0,Ir.yG)(n);return(0,oi.D)(n,e)}var $n=L(2680),vo=L(6131);function ha(...n){return function fs(){return(0,vo.J)(1)}()((0,oi.D)(n,(0,Ir.yG)(n)))}var ps=L(4482);function fa(...n){const e=(0,Ir.yG)(n);return(0,ps.e)((t,i)=>{(e?ha(n,t,e):ha(n,t)).subscribe(i)})}var Jr=L(5403);function gs(){return(0,ps.e)((n,e)=>{let t,i=!1;n.subscribe((0,Jr.x)(e,a=>{const c=t;t=a,i&&e.next([c,a]),i=!0}))})}var ur=L(4004);function Ur(n,e,t,i,a){return(c,p)=>{let y=t,D=e,T=0;c.subscribe((0,Jr.x)(p,M=>{const O=T++;D=y?n(D,M,O):(y=!0,M),i&&p.next(D)},a&&(()=>{y&&p.next(D),p.complete()})))}}function pa(n,e){return(0,ps.e)(Ur(n,e,arguments.length>=2,!0))}var Hs=L(4671);function Uc(n,e){return n===e}function Io(n,e){return(0,ps.e)((t,i)=>{let a=0;t.subscribe((0,Jr.x)(i,c=>n.call(e,c,a++)&&i.next(c)))})}L(1277);var nt,ga=L(3942),ge=L(5861),ai=L(9681),wo=L(4859),Sr=L(1877),Vt=L(2090),Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr={},Eo=Eo||{},gt=Cm||self;function Gs(){}function Do(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vi="closure_uid_"+(1e9*Math.random()>>>0),ms=0;function kn(n,e,t){return n.call.apply(n.bind,arguments)}function Oh(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Pn(n,e,t){return(Pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kn:Oh).apply(null,arguments)}function To(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function In(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,c){for(var p=Array(arguments.length-2),y=2;y<arguments.length;y++)p[y-2]=arguments[y];return e.prototype[a].apply(i,p)}}function Bi(){this.s=this.s,this.o=this.o}Bi.prototype.s=!1,Bi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function jr(n){Object.prototype.hasOwnProperty.call(n,Vi)&&n[Vi]||(n[Vi]=++ms)}(this)},Bi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function A(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function P(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Do(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let p=0;p<c;p++)n[a+p]=i[p]}else n.push(i)}}function W(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{gt.addEventListener("test",Gs,e),gt.removeEventListener("test",Gs,e)}catch{}return n}();function Ie(n){return/^[\s\xa0]*$/.test(n)}var Fe=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ke(n,e){return n<e?-1:n>e?1:0}function it(){var n=gt.navigator;return n&&(n=n.userAgent)?n:""}function mt(n){return-1!=it().indexOf(n)}function dt(n){return dt[" "](n),n}dt[" "]=Gs;var Ii,n,Hn=mt("Opera"),Ar=mt("Trident")||mt("MSIE"),ys=mt("Edge"),Ws=ys||Ar,jc=mt("Gecko")&&!(-1!=it().toLowerCase().indexOf("webkit")&&!mt("Edge"))&&!(mt("Trident")||mt("MSIE"))&&!mt("Edge"),$c=-1!=it().toLowerCase().indexOf("webkit")&&!mt("Edge");function zs(){var n=gt.document;return n?n.documentMode:void 0}e:{var _s="",ma=(n=it(),jc?/rv:([^\);]+)(\)|;)/.exec(n):ys?/Edge\/([\d\.]+)/.exec(n):Ar?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$c?/WebKit\/(\S+)/.exec(n):Hn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ma&&(_s=ma?ma[1]:""),Ar){var Nu=zs();if(null!=Nu&&Nu>parseFloat(_s)){Ii=String(Nu);break e}}Ii=_s}var Hc={};var fp=gt.document&&Ar&&(zs()||parseInt(Ii,10))||void 0;function ld(n,e){if(W.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jc){e:{try{dt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xm[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ld.X.h.call(this)}}In(ld,W);var xm={2:"touch",3:"pen",4:"mouse"};ld.prototype.h=function(){ld.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gc="closure_listenable_"+(1e6*Math.random()|0),Lh=0;function pp(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++Lh,this.ba=this.ea=!1}function Fh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Wc(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Mm(n){const e={};for(const t in n)e[t]=n[t];return e}const Nm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rm(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<Nm.length;c++)t=Nm[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function dd(n){this.src=n,this.g={},this.h=0}function gp(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=b(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(Fh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vh(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==i)return a}return-1}dd.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var p=Vh(n,e,i,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new pp(e,this.src,c,!!i,a)).ea=t,n.push(e)),e};var hd="closure_lm_"+(1e6*Math.random()|0),zc={};function qc(n,e,t,i,a){if(i&&i.once)return Ui(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)qc(n,e[c],t,i,a);return null}return t=$h(t),n&&n[Gc]?n.N(e,t,bo(i)?!!i.capture:!!i,a):Bh(n,e,t,!1,i,a)}function Bh(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var p=bo(a)?!!a.capture:!!a,y=Ru(n);if(y||(n[hd]=y=new dd(n)),(t=y.add(e,t,i,p,c)).proxy)return t;if(i=function fd(){const e=mp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)J||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(pd(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Ui(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ui(n,e[c],t,i,a);return null}return t=$h(t),n&&n[Gc]?n.O(e,t,bo(i)?!!i.capture:!!i,a):Bh(n,e,t,!0,i,a)}function Uh(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Uh(n,e[c],t,i,a);else i=bo(i)?!!i.capture:!!i,t=$h(t),n&&n[Gc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vh(c=n.g[e],t,i,a))&&(Fh(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Ru(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vh(e,t,i,a)),(t=-1<n?e[n]:null)&&jh(t))}function jh(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Gc])gp(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(pd(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Ru(e))?(gp(t,n),0==t.h&&(t.src=null,e[hd]=null)):Fh(n)}}}function pd(n){return n in zc?zc[n]:zc[n]="on"+n}function mp(n,e){if(n.ba)n=!0;else{e=new ld(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&jh(n),n=t.call(i,e)}return n}function Ru(n){return(n=n[hd])instanceof dd?n:null}var gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function $h(n){return"function"==typeof n?n:(n[gd]||(n[gd]=function(e){return n.handleEvent(e)}),n[gd])}function lr(){Bi.call(this),this.i=new dd(this),this.P=this,this.I=null}function dr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new W(e,n);else if(e instanceof W)e.target=e.target||n;else{var a=e;Rm(e=new W(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=md(p,i,!0,e)&&a}if(a=md(p=e.g=n,i,!0,e)&&a,a=md(p,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=md(p=e.g=t[c],i,!1,e)&&a}function md(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.ba&&p.capture==t){var y=p.listener,D=p.ha||p.src;p.ea&&gp(n.i,p),a=!1!==y.call(D,i)&&a}}return a&&!i.defaultPrevented}In(lr,Bi),lr.prototype[Gc]=!0,lr.prototype.removeEventListener=function(n,e,t,i){Uh(this,n,e,t,i)},lr.prototype.M=function(){if(lr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Fh(t[i]);delete n.g[e],n.h--}}this.I=null},lr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},lr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Hh=gt.JSON.stringify;function xr(){var n=Wh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Pu,yp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qs,n=>n.reset());class qs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Mr(n){gt.setTimeout(()=>{throw n},0)}function ku(n,e){Pu||function km(){var n=gt.Promise.resolve(void 0);Pu=function(){n.then(Pm)}}(),Kc||(Pu(),Kc=!0),Wh.add(n,e)}var Kc=!1,Wh=new class Gh{constructor(){this.h=this.g=null}add(e,t){const i=yp.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function Pm(){for(var n;n=xr();){try{n.h.call(n.g)}catch(t){Mr(t)}var e=yp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Kc=!1}function ya(n,e){lr.call(this),this.h=n||1,this.g=e||gt,this.j=Pn(this.lb,this),this.l=Date.now()}function zh(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function yd(n,e,t){if("function"==typeof n)t&&(n=Pn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pn(n.handleEvent,n)}return 2147483647<Number(e)?-1:gt.setTimeout(n,e||0)}function _d(n){n.g=yd(()=>{n.g=null,n.i&&(n.i=!1,_d(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}In(ya,lr),(nt=ya.prototype).ca=!1,nt.R=null,nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dr(this,"tick"),this.ca&&(zh(this),this.start()))}},nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){ya.X.M.call(this),zh(this),delete this.g};class Om extends Bi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_d(this)}M(){super.M(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _a(n){Bi.call(this),this.h=n,this.g={}}In(_a,Bi);var vd=[];function _p(n,e,t,i){Array.isArray(t)||(t&&(vd[0]=t.toString()),t=vd);for(var a=0;a<t.length;a++){var c=qc(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function qh(n){Wc(n.g,function(e,t){this.g.hasOwnProperty(t)&&jh(e)},n),n.g={}}function Zc(){this.g=!0}function Ou(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Qc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return Hh(t)}catch{return e}}(n,t)+(i?" "+i:"")})}_a.prototype.M=function(){_a.X.M.call(this),qh(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zc.prototype.Aa=function(){this.g=!1},Zc.prototype.info=function(){};var Co={},Fm=null;function wi(){return Fm=Fm||new lr}function Id(n){W.call(this,Co.Pa,n)}function Lu(n){const e=wi();dr(e,new Id(e))}function vp(n,e){W.call(this,Co.STAT_EVENT,n),this.stat=e}function hr(n){const e=wi();dr(e,new vp(e,n))}function Ip(n,e){W.call(this,Co.Qa,n),this.size=e}function Jc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){n()},e)}Co.Pa="serverreachability",In(Id,W),Co.STAT_EVENT="statevent",In(vp,W),Co.Qa="timingevent",In(Ip,W);var wd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},wp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ia(){}function Ed(){}Ia.prototype.h=null;var Kh,wa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Dd(){W.call(this,"d")}function Xc(){W.call(this,"c")}function el(){}function So(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new _a(this),this.O=Ao,this.T=new ya(n=Ws?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tl}function tl(){this.i=null,this.g="",this.h=!1}In(Dd,W),In(Xc,W),In(el,Ia),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},Kh=new el;var Ao=45e3,bd={},Ea={};function Zh(n,e,t){n.K=1,n.v=Mo(Ei(e)),n.s=t,n.P=!0,ui(n,null)}function ui(n,e){n.F=Date.now(),xo(n),n.A=Ei(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),N(t.i,"t",i),n.C=0,t=n.l.H,n.h=new tl,n.g=Ym(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Om(Pn(n.La,n,n.g),n.N)),_p(n.S,n.g,"readystatechange",n.ib),e=n.H?Mm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Lu(),function va(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var p="",y=c.split("&"),D=0;D<y.length;D++){var T=y[D].split("=");if(1<T.length){var M=T[0];T=T[1];var O=M.split("_");p=2<=O.length&&"type"==O[1]?p+(M+"=")+T+"&":p+(M+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Ks(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Yh(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=Dp(n,t),a==Ea){4==e&&(n.o=4,hr(14),i=!1),Ou(n.j,n.m,null,"[Incomplete Response]");break}if(a==bd){n.o=4,hr(15),Ou(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Ou(n.j,n.m,a,null),ci(n,a)}Ks(n)&&a!=Ea&&a!=bd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Km(e),e.K=!0,hr(11))):(Ou(n.j,n.m,t,"[Invalid Chunked Response]"),vs(n),Da(n))}function Dp(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?Ea:(t=Number(e.substring(t,i)),isNaN(t)?bd:(i+=1)+t>e.length?Ea:(e=e.substr(i,t),n.C=i+t,e))}function xo(n){n.V=Date.now()+n.O,nl(n,n.O)}function nl(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jc(Pn(n.gb,n),e)}function Fu(n){n.B&&(gt.clearTimeout(n.B),n.B=null)}function Da(n){0==n.l.G||n.I||Uv(n.l,n)}function vs(n){Fu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,zh(n.T),qh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ci(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||zn(t.h,n)))if(!n.J&&zn(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Np(t),Ap(t)}qm(t),hr(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Jc(Pn(t.cb,t),6e3));if(1>=Wn(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Md(t,11)}else if((n.J||t.g==n)&&Np(t),!Ie(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let T=a[e];if(t.T=T[0],T=T[1],2==t.G)if("c"==T[0]){t.I=T[1],t.ka=T[2];const M=T[3];null!=M&&(t.ma=M,t.j.info("VER="+t.ma));const O=T[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const q=T[5];null!=q&&"number"==typeof q&&0<q&&(t.J=i=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const X=n.g;if(X){const ce=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var c=i.h;c.g||-1==ce.indexOf("spdy")&&-1==ce.indexOf("quic")&&-1==ce.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Is(c,c.h),c.h=null))}if(i.D){const Le=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(i.za=Le,tn(i.F,i.D,Le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((i=t).sa=Zm(i,i.H?i.ka:null,i.V),p.J){tf(i.h,p);var y=p,D=i.J;D&&y.setTimeout(D),y.B&&(Fu(y),xo(y)),i.g=p}else zm(i);0<t.i.length&&Mp(t)}else"stop"!=T[0]&&"close"!=T[0]||Md(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?Md(t,7):xd(t):"noop"!=T[0]&&t.l&&t.l.wa(T),t.A=0)}Lu()}catch{}}function Td(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Do(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Jh(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Do(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Qh(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Do(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(nt=So.prototype).setTimeout=function(n){this.O=n},nt.ib=function(n){n=n.target;const e=this.L;e&&3==Ro(n)?e.l():this.La(n)},nt.La=function(n){try{if(n==this.g)e:{const M=Ro(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>M)&&(3!=M||Ws||this.g&&(this.h.h||this.g.fa()||Lv(this.g)))){this.I||4!=M||7==e||Lu(),Fu(this);var t=this.g.aa();this.Y=t;t:if(Ks(this)){var i=Lv(this.g);n="";var a=i.length,c=4==Ro(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vs(this),Da(this);var p="";break t}this.h.i=new gt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function Lm(n,e,t,i,a,c,p){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.U,M,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ie(y)){var T=y;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,hr(12),vs(this),Da(this);break e}Ou(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ci(this,t)}this.P?(Yh(this,M,p),Ws&&this.i&&3==M&&(_p(this.S,this.T,"tick",this.hb),this.T.start())):(Ou(this.j,this.m,p,null),ci(this,p)),4==M&&vs(this),this.i&&!this.I&&(4==M?Uv(this.l,this):(this.i=!1,xo(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,hr(12)):(this.o=0,hr(13)),vs(this),Da(this)}}}catch{}},nt.hb=function(){if(this.g){var n=Ro(this.g),e=this.g.fa();this.C<e.length&&(Fu(this),Yh(this,n,e),this.i&&4!=n&&xo(this))}},nt.cancel=function(){this.I=!0,vs(this)},nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Yc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lu(),hr(17)),vs(this),this.o=2,Da(this)):nl(this,this.V-n)};var Cd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gn(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Gn){this.h=void 0!==e?e:n.h,Bu(this,n.j),this.s=n.s,this.g=n.g,Sd(this,n.m),this.l=n.l,e=n.i;var t=new d;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ji(this,t),this.o=n.o}else n&&(t=String(n).match(Cd))?(this.h=!!e,Bu(this,t[1]||"",!0),this.s=No(t[2]||""),this.g=No(t[3]||"",!0),Sd(this,t[4]),this.l=No(t[5]||"",!0),ji(this,t[6]||"",!0),this.o=No(t[7]||"")):(this.h=!!e,this.i=new d(null,this.h))}function Ei(n){return new Gn(n)}function Bu(n,e,t){n.j=t?No(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ji(n,e,t){e instanceof d?(n.i=e,function se(n,e){e&&!n.j&&(f(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(_(this,i),N(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=$i(e,ef)),n.i=new d(e,n.h))}function tn(n,e,t){n.i.set(e,t)}function Mo(n){return tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function No(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $i(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Xh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Xh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gn.prototype.toString=function(){var n=[],e=this.j;e&&n.push($i(e,bp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($i(e,bp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push($i(t,"/"==t.charAt(0)?Vm:Pv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$i(t,g)),n.join("")};var bp=/[#\/\?@]/g,Pv=/[#\?:]/g,Vm=/[#\?]/g,ef=/[#\?@]/g,g=/#/g;function d(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function f(n){n.g||(n.g=new Map,n.h=0,n.i&&function Vu(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _(n,e){f(n),e=$(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function S(n,e){return f(n),e=$(n,e),n.g.has(e)}function N(n,e,t){_(n,e),0<t.length&&(n.i=null,n.g.set($(n,e),A(t)),n.h+=t.length)}function $(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xe(n){this.l=n||vt,n=gt.PerformanceNavigationTiming?0<(n=gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(gt.g&&gt.g.Ga&&gt.g.Ga()&&gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=d.prototype).add=function(n,e){f(this),this.i=null,n=$(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){f(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},nt.oa=function(){f(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},nt.W=function(n){f(this);let e=[];if("string"==typeof n)S(this,n)&&(e=e.concat(this.g.get($(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return f(this),this.i=null,S(this,n=$(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),p=this.W(i);for(i=0;i<p.length;i++){var a=c;""!==p[i]&&(a+="="+encodeURIComponent(String(p[i]))),n.push(a)}}return this.i=n.join("&")};var vt=10;function ht(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Wn(n){return n.h?1:n.g?n.g.size:0}function zn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Is(n,e){n.g?n.g.add(e):n.h=e}function tf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return A(n.i)}function rf(){}function Bm(){this.g=new rf}function Tp(n,e,t){const i=t||"";try{Td(n,function(a,c){let p=a;bo(a)&&(p=Hh(a)),e.push(i+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Uu(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function ba(n){this.l=n.ac||null,this.j=n.jb||!1}function rl(n,e){lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xe.prototype.cancel=function(){if(this.i=nf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rf.prototype.stringify=function(n){return gt.JSON.stringify(n,void 0)},rf.prototype.parse=function(n){return gt.JSON.parse(n,void 0)},In(ba,Ia),ba.prototype.g=function(){return new rl(this.l,this.j)},ba.prototype.i=function(n){return function(){return n}}({}),In(rl,lr);var sf=0;function Ad(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ta(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hi(n)}function Hi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=rl.prototype).open=function(n,e){if(this.readyState!=sf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hi(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ta(this)),this.readyState=sf},nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ad(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ta(this):Hi(this),3==this.readyState&&Ad(this)}},nt.Va=function(n){this.g&&(this.response=this.responseText=n,Ta(this))},nt.Ua=function(n){this.g&&(this.response=n,Ta(this))},nt.ga=function(){this.g&&Ta(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var of=gt.JSON.parse;function On(n){lr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jm,this.K=this.L=!1}In(On,lr);var jm="",Ov=/^https?$/i,fb=["POST","PUT"];function xw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cp(n),$m(n)}function Cp(n){n.D||(n.D=!0,dr(n,"complete"),dr(n,"error"))}function Sp(n){if(n.h&&typeof Eo<"u"&&(!n.C[1]||4!=Ro(n)||2!=n.aa()))if(n.v&&4==Ro(n))yd(n.Ha,0,n);else if(dr(n,"readystatechange"),4==Ro(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===y){var a=String(n.H).match(Cd)[1]||null;if(!a&&gt.self&&gt.self.location){var c=gt.self.location.protocol;a=c.substr(0,c.length-1)}i=!Ov.test(a?a.toLowerCase():"")}t=i}if(t)dr(n,"complete"),dr(n,"success");else{n.m=6;try{var p=2<Ro(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",Cp(n)}}finally{$m(n)}}}function $m(n,e){if(n.g){Mw(n);const t=n.g,i=n.C[0]?Gs:null;n.g=null,n.C=null,e||dr(n,"ready");try{t.onreadystatechange=i}catch{}}}function Mw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(gt.clearTimeout(n.A),n.A=null)}function Ro(n){return n.g?n.g.readyState:0}function Lv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Fv(n){let e="";return Wc(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Hm(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Fv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tn(n,e,t))}function af(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gm(n){this.Ca=0,this.i=[],this.j=new Zc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=af("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=af("baseRetryDelayMs",5e3,n),this.bb=af("retryDelaySeedMs",1e4,n),this.$a=af("forwardChannelMaxRetries",2,n),this.ta=af("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Xe(n&&n.concurrentRequestLimit),this.Fa=new Bm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function xd(n){if(xp(n),3==n.G){var e=n.U++,t=Ei(n.F);tn(t,"SID",n.I),tn(t,"RID",e),tn(t,"TYPE","terminate"),uf(n,t),(e=new So(n,n.j,e,void 0)).K=2,e.v=Mo(Ei(t)),t=!1,gt.navigator&&gt.navigator.sendBeacon&&(t=gt.navigator.sendBeacon(e.v.toString(),"")),!t&&gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ym(e.l,null),e.g.da(e.v)),e.F=Date.now(),xo(e)}Nd(n)}function Ap(n){n.g&&(Km(n),n.g.cancel(),n.g=null)}function xp(n){Ap(n),n.u&&(gt.clearTimeout(n.u),n.u=null),Np(n),n.h.cancel(),n.m&&("number"==typeof n.m&&gt.clearTimeout(n.m),n.m=null)}function Mp(n){ht(n.h)||n.m||(n.m=!0,ku(n.Ja,n),n.C=0)}function Vv(n,e){var t;t=e?e.m:n.U++;const i=Ei(n.F);tn(i,"SID",n.I),tn(i,"RID",t),tn(i,"AID",n.T),uf(n,i),n.o&&n.s&&Hm(i,n.o,n.s),t=new So(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Wm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Is(n.h,t),Zh(t,i,e)}function uf(n,e){n.ia&&Wc(n.ia,function(t,i){tn(e,i,t)}),n.l&&Td({},function(t,i){tn(e,i,t)})}function Wm(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Pn(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].h,p.push("ofs="+c)):c=0:p.push("ofs="+c);let y=!0;for(let D=0;D<t;D++){let T=a[D].h;const M=a[D].g;if(T-=c,0>T)c=Math.max(0,a[D].h-100),y=!1;else try{Tp(M,p,"req"+T+"_")}catch{i&&i(M)}}if(y){i=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function zm(n){n.g||n.u||(n.Z=1,ku(n.Ia,n),n.A=0)}function qm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Jc(Pn(n.Ia,n),Nw(n,n.A)),n.A++,0))}function Km(n){null!=n.B&&(gt.clearTimeout(n.B),n.B=null)}function Bv(n){n.g=new So(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ei(n.sa);tn(e,"RID","rpc"),tn(e,"SID",n.I),tn(e,"CI",n.L?"0":"1"),tn(e,"AID",n.T),tn(e,"TYPE","xmlhttp"),uf(n,e),n.o&&n.s&&Hm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Mo(Ei(e)),t.s=null,t.P=!0,ui(t,n)}function Np(n){null!=n.v&&(gt.clearTimeout(n.v),n.v=null)}function Uv(n,e){var t=null;if(n.g==e){Np(n),Km(n),n.g=null;var i=2}else{if(!zn(n.h,e))return;t=e.D,tf(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;dr(i=wi(),new Ip(i,t)),Mp(n)}else zm(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function fr(n,e){return!(Wn(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Jc(Pn(n.Ja,n,e),Nw(n,n.C)),n.C++,0)))}(n,e)||2==i&&qm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Md(n,5);break;case 4:Md(n,10);break;case 3:Md(n,6);break;default:Md(n,2)}}function Nw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Md(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Pn(n.kb,n);t||(t=new Gn("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||Bu(t,"https"),Mo(t)),function Um(n,e){const t=new Zc;if(gt.Image){const i=new Image;i.onload=To(Uu,t,i,"TestLoadImage: loaded",!0,e),i.onerror=To(Uu,t,i,"TestLoadImage: error",!1,e),i.onabort=To(Uu,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=To(Uu,t,i,"TestLoadImage: timeout",!1,e),gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else hr(2);n.G=0,n.l&&n.l.va(e),Nd(n),xp(n)}function Nd(n){if(n.G=0,n.la=[],n.l){const e=nf(n.h);(0!=e.length||0!=n.i.length)&&(P(n.la,e),P(n.la,n.i),n.h.i.length=0,A(n.i),n.i.length=0),n.l.ua()}}function Zm(n,e,t){var i=t instanceof Gn?Ei(t):new Gn(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Sd(i,i.m);else{var a=gt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Gn(null,void 0);i&&Bu(c,i),e&&(c.g=e),a&&Sd(c,a),t&&(c.l=t),i=c}return e=n.za,(t=n.D)&&e&&tn(i,t,e),tn(i,"VER",n.ma),uf(n,i),i}function Ym(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t&&n.Da&&!n.ra?new ba({jb:!0}):n.ra)).Ka(n.H),e}function Qm(){}function cf(){if(Ar&&!(10<=Number(fp)))throw Error("Environmental error: no available transport.")}function Gi(n,e){lr.call(this),this.g=new Gm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ie(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ie(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ju(this)}function Jm(n){Dd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Xm(){Xc.call(this),this.status=1}function ju(n){this.g=n}(nt=On.prototype).Ka=function(n){this.L=n},nt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kh.g(),this.C=function Ep(n){return n.h||(n.h=n.i())}(this.u?this.u:Kh),this.g.onreadystatechange=Pn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void xw(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=gt.FormData&&n instanceof gt.FormData,!(0<=b(fb,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mw(this),0<this.B&&((this.K=function pb(n){return Ar&&function Sm(){return function tr(n){var e=Hc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Fe(String(Ii)).split("."),t=Fe("9").split("."),i=Math.max(e.length,t.length);for(let p=0;0==n&&p<i;p++){var a=e[p]||"",c=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=Ke(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||Ke(0==a[2].length,0==c[2].length)||Ke(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.qa,this)):this.A=yd(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){xw(this,c)}},nt.qa=function(){typeof Eo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dr(this,"complete"),dr(this,"abort"),$m(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$m(this,!0)),On.X.M.call(this)},nt.Ha=function(){this.s||(this.F||this.v||this.l?Sp(this):this.fb())},nt.fb=function(){Sp(this)},nt.aa=function(){try{return 2<Ro(this)?this.g.status:-1}catch{return-1}},nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),of(e)}},nt.Ea=function(){return this.m},nt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Gm.prototype).ma=8,nt.G=1,nt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new So(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=Mm(c),Rm(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wm(this,a,e),tn(t=Ei(this.F),"RID",n),tn(t,"CVER",22),this.D&&tn(t,"X-HTTP-Session-Id",this.D),uf(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(Fv(c)))+"&"+e:this.o&&Hm(t,this.o,c)),Is(this.h,a),this.Ya&&tn(t,"TYPE","init"),this.O?(tn(t,"$req",e),tn(t,"SID","null"),a.Z=!0,Zh(a,t,null)):Zh(a,t,e),this.G=2}}else 3==this.G&&(n?Vv(this,n):0==this.i.length||ht(this.h)||Vv(this))},nt.Ia=function(){if(this.u=null,Bv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Jc(Pn(this.eb,this),n)}},nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,hr(10),Ap(this),Bv(this))},nt.cb=function(){null!=this.v&&(this.v=null,Ap(this),qm(this),hr(19))},nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),hr(2)):(this.j.info("Failed to ping google.com"),hr(1))},(nt=Qm.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Ra=function(){},cf.prototype.g=function(n,e){return new Gi(n,e)},In(Gi,lr),Gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;hr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Zm(n,null,n.V),Mp(n)},Gi.prototype.close=function(){xd(this.g)},Gi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Mp(e)},Gi.prototype.M=function(){this.g.l=null,delete this.j,xd(this.g),delete this.g,Gi.X.M.call(this)},In(Jm,Dd),In(Xm,Xc),In(ju,Qm),ju.prototype.xa=function(){dr(this.g,"a")},ju.prototype.wa=function(n){dr(this.g,new Jm(n))},ju.prototype.va=function(n){dr(this.g,new Xm)},ju.prototype.ua=function(){dr(this.g,"b")},cf.prototype.createWebChannel=cf.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,wd.NO_ERROR=0,wd.TIMEOUT=8,wd.HTTP_ERROR=6,wp.COMPLETE="complete",Ed.EventType=wa,wa.OPEN="a",wa.CLOSE="b",wa.ERROR="c",wa.MESSAGE="d",lr.prototype.listen=lr.prototype.N,On.prototype.listenOnce=On.prototype.O,On.prototype.getLastError=On.prototype.Oa,On.prototype.getLastErrorCode=On.prototype.Ea,On.prototype.getStatus=On.prototype.aa,On.prototype.getResponseJson=On.prototype.Sa,On.prototype.getResponseText=On.prototype.fa,On.prototype.send=On.prototype.da,On.prototype.setWithCredentials=On.prototype.Ka;var gb=cr.createWebChannelTransport=function(){return new cf},Rw=cr.getStatEventTarget=function(){return wi()},lf=cr.ErrorCode=wd,jv=cr.EventType=wp,$v=cr.Event=Co,$u=cr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},kw=cr.FetchXmlHttpFactory=ba,Rd=cr.WebChannel=Ed,Rp=cr.XhrIo=On;const Hv="@firebase/firestore";class pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");let Ca="9.14.0";const Wi=new Sr.Yd("@firebase/firestore");function kp(){return Wi.logLevel}function Me(n,...e){if(Wi.logLevel<=Sr.in.DEBUG){const t=e.map(Gu);Wi.debug(`Firestore (${Ca}): ${n}`,...t)}}function nr(n,...e){if(Wi.logLevel<=Sr.in.ERROR){const t=e.map(Gu);Wi.error(`Firestore (${Ca}): ${n}`,...t)}}function Hu(n,...e){if(Wi.logLevel<=Sr.in.WARN){const t=e.map(Gu);Wi.warn(`Firestore (${Ca}): ${n}`,...t)}}function Gu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function bt(n,e){n||rt()}function Ze(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pr.UNAUTHENTICATED))}shutdown(){}}class mb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ow{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=T=>this.i!==a?(a=this.i,t(T)):Promise.resolve();let p=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new gr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const T=p;e.enqueueRetryable((0,ge.Z)(function*(){yield T.promise,yield c(i.currentUser)}))},D=T=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(T=>D(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?D(T):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new gr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt("string"==typeof i.accessToken),new Gv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new pr(e)}}class Pp{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Lw{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new Pp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class il{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class df{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=c=>{null!=c.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.A;return this.A=c.token,Me("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.A=t.token,new il(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _b(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class ty{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=_b(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%e.length))}return i}}function At(n,e){return n<e?-1:n>e?1:0}function kd(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function zv(n){return n+"\0"}class wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wn.fromMillis(Date.now())}static fromDate(e){return wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new wn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new wn(0,0))}static max(){return new wt(new wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sl{constructor(e,t,i){void 0===t?t=0:t>e.length&&rt(),void 0===i?i=e.length-t:i>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===sl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends sl{construct(e,t,i){return new Wt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const Fw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends sl{construct(e,t,i){return new An(e,t,i)}static isValidIdentifier(e){return Fw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let p=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,a+=2}else"`"===y?(p=!p,a++):"."!==y||p?(i+=y,a++):(c(),a++)}if(c(),p)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Wt.fromString(e))}static fromName(e){return new Ue(Wt.fromString(e).popFirst(5))}static empty(){return new Ue(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Wt(e.slice()))}}class Op{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function ny(n){return n.fields.find(e=>2===e.kind)}function ol(n){return n.fields.filter(e=>2!==e.kind)}Op.UNKNOWN_ID=-1;class Lp{constructor(e,t){this.fieldPath=e,this.kind=t}}class hf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hf(0,zi.min())}}function al(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=wt.fromTimestamp(1e9===i?new wn(t+1,0):new wn(t,i));return new zi(a,Ue.empty(),e)}function ko(n){return new zi(n.readTime,n.key,-1)}class zi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new zi(wt.min(),Ue.empty(),-1)}static max(){return new zi(wt.max(),Ue.empty(),-1)}}function ry(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const Uw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Sa(n){return qv.apply(this,arguments)}function qv(){return qv=(0,ge.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Uw)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),qv.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,i)=>{t(e)})}static reject(e){return new re((t,i)=>{i(e)})}static waitFor(e){return new re((t,i)=>{let a=0,c=0,p=!1;e.forEach(y=>{++a,y.next(()=>{++c,p&&c===a&&t()},D=>i(D))}),p=!0,c===a&&t()})}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next(a=>a?re.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new re((i,a)=>{const c=e.length,p=new Array(c);let y=0;for(let D=0;D<c;D++){const T=D;t(e[T]).next(M=>{p[T]=M,++y,y===c&&i(p)},M=>a(M))}})}static doWhile(e,t){return new re((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new gr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Pd(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=Fp(i.target.error);this.P.reject(new Pd(e,a))}}static open(e,t,i,a){try{return new iy(t,e.transaction(a,i))}catch(c){throw new Pd(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hw(t)}}class ws{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===ws.D((0,Vt.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),$r(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Vt.hl)())return!1;if(ws.N())return!0;const e=(0,Vt.z$)(),t=ws.D(e),i=0<t&&t<10,a=ws.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{i(p.target.result)},c.onblocked=()=>{a(new Pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const y=p.target.error;a("VersionError"===y.name?new Ce(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ce(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Pd(e,y))},c.onupgradeneeded=p=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.S.$(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,ge.Z)(function*(){const p="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const D=iy.open(c.db,e,p?"readonly":"readwrite",i),T=a(D).next(M=>(D.V(),M)).catch(M=>(D.abort(M),re.reject(M))).toPromise();return T.catch(()=>{}),yield D.v,T}catch(D){const T=D,M="FirebaseError"!==T.name&&y<3;if(Me("SimpleDb","Transaction failed with error:",T.message,"Retrying:",M),c.close(),!M)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class $w{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return $r(this.U.delete())}}class Pd extends Ce{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wu(n){return"IndexedDbTransactionError"===n.name}class Hw{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),$r(i)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),$r(this.store.add(e))}get(e){return $r(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),$r(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),$r(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.H(a,(p,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(i.range);return new re((c,p)=>{a.onerror=y=>{p(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new re((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}Y(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(c,p,y)=>y.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new re((i,a)=>{t.onerror=c=>{const p=Fp(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(y=>{y?p.continue():i()}):i()}})}H(e,t){const i=[];return new re((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const y=p.target.result;if(!y)return void a();const D=new $w(y),T=t(y.primaryKey,y.value,D);if(T instanceof re){const M=T.catch(O=>(D.done(),re.reject(O)));i.push(M)}D.isDone?a():null===D.G?y.continue():y.continue(D.G)}}).next(()=>re.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $r(n){return new re((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Fp(i.target.error);t(a)}})}let Kv=!1;function Fp(n){const e=ws.D((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kv||(Kv=!0,setTimeout(()=>{throw i},0)),i}}return n}class Gw{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Me("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Wu(i)?Me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Sa(i)}yield t.nt(6e4)}))}}class Ww{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,c=!0;return re.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!i.has(p))return Me("IndexBackiller",`Processing collection: ${p}`),this.rt(e,p,a).next(y=>{a-=y,i.add(p)});c=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ot(a,c)).next(y=>(Me("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>p.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,c)=>{const p=ko(c);ry(p,i)>0&&(i=p)}),new zi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Zv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Di.at=-1;class qn{constructor(e,t){this.comparator=e,this.root=t||ct.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vp(this.root,e,this.comparator,!0)}}class Vp{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??ct.RED,this.left=a??ct.EMPTY,this.right=c??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new ct(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ct.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1,ct.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,i,a){return this}insert(n,e,t){return new ct(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sy(this.data.getIterator())}getIteratorFrom(e){return new sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ul(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new qi([])}unionWith(e){let t=new cn(An.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const qw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(n){if(bt(!!n),"string"==typeof n){let e=0;const t=qw.exec(n);if(bt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cl(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function Qv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oy(n){const e=n.mapValue.fields.__previous_value__;return Qv(e)?oy(e):e}function Od(n){const e=Aa(n.mapValue.fields.__local_write_time__.timestampValue);return new wn(e.seconds,e.nanos)}class ll{constructor(e,t,i,a,c,p,y,D){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.useFetchStreams=D}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}function dl(n){return null==n}function hl(n){return 0===n&&1/n==-1/0}function Jv(n){return"number"==typeof n&&Number.isInteger(n)&&!hl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const fl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ay={nullValue:"NULL_VALUE"};function Ld(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qv(n)?4:tI(n)?9007199254740991:10:rt()}function Po(n,e){if(n===e)return!0;const t=Ld(n);if(t!==Ld(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Od(n).isEqual(Od(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Aa(i.timestampValue),p=Aa(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,cl(n.bytesValue).isEqual(cl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Kn(i.geoPointValue.latitude)===Kn(a.geoPointValue.latitude)&&Kn(i.geoPointValue.longitude)===Kn(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Kn(i.integerValue)===Kn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=Kn(i.doubleValue),p=Kn(a.doubleValue);return c===p?hl(c)===hl(p):isNaN(c)&&isNaN(p)}return!1}(n,e);case 9:return kd(n.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:return function(i,a){const c=i.mapValue.fields||{},p=a.mapValue.fields||{};if(Zv(c)!==Zv(p))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===p[y]||!Po(c[y],p[y])))return!1;return!0}(n,e);default:return rt()}var a}function Fd(n,e){return void 0!==(n.values||[]).find(t=>Po(t,e))}function pl(n,e){if(n===e)return 0;const t=Ld(n),i=Ld(e);if(t!==i)return At(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(a,c){const p=Kn(a.integerValue||a.doubleValue),y=Kn(c.integerValue||c.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1}(n,e);case 3:return Xv(n.timestampValue,e.timestampValue);case 4:return Xv(Od(n),Od(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(a,c){const p=cl(a),y=cl(c);return p.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),y=c.split("/");for(let D=0;D<p.length&&D<y.length;D++){const T=At(p[D],y[D]);if(0!==T)return T}return At(p.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const p=At(Kn(a.latitude),Kn(c.latitude));return 0!==p?p:At(Kn(a.longitude),Kn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],y=c.values||[];for(let D=0;D<p.length&&D<y.length;++D){const T=pl(p[D],y[D]);if(T)return T}return At(p.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===fl.mapValue&&c===fl.mapValue)return 0;if(a===fl.mapValue)return 1;if(c===fl.mapValue)return-1;const p=a.fields||{},y=Object.keys(p),D=c.fields||{},T=Object.keys(D);y.sort(),T.sort();for(let M=0;M<y.length&&M<T.length;++M){const O=At(y[M],T[M]);if(0!==O)return O;const q=pl(p[y[M]],D[T[M]]);if(0!==q)return q}return At(y.length,T.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Xv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Aa(n),i=Aa(e),a=At(t.seconds,i.seconds);return 0!==a?a:At(t.nanos,i.nanos)}function Zs(n){return uy(n)}function uy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=Aa(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cl(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const p of i.values||[])c?c=!1:a+=",",a+=uy(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",p=!0;for(const y of a)p?p=!1:c+=",",c+=`${y}:${uy(i.fields[y])}`;return c+"}"}(n.mapValue):rt();var e}function Ku(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vd(n){return!!n&&"integerValue"in n}function ff(n){return!!n&&"arrayValue"in n}function cy(n){return!!n&&"nullValue"in n}function eI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bp(n){return!!n&&"mapValue"in n}function pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=pf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kw(n){return"nullValue"in n?ay:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ku(qu.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function nI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ku(qu.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fl:rt()}function rI(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ly(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=An.emptyPath(),i={},a=[];e.forEach((p,y)=>{if(!t.isImmediateParentOf(y)){const D=this.getFieldsMap(t);this.applyChanges(D,i,a),i={},a=[],t=y.popLast()}p?i[y.lastSegment()]=pf(p):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());Bp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Bp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){zu(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new Nr(pf(this.value))}}function Up(n){const e=[];return zu(n.fields,(t,i)=>{const a=new An([t]);if(Bp(i)){const c=Up(i.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new qi(e)}class En{constructor(e,t,i,a,c,p){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.data=c,this.documentState=p}static newInvalidDocument(e){return new En(e,0,wt.min(),wt.min(),Nr.empty(),0)}static newFoundDocument(e,t,i){return new En(e,1,t,wt.min(),i,0)}static newNoDocument(e,t){return new En(e,2,t,wt.min(),Nr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,wt.min(),Nr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dy{constructor(e,t=null,i=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.ht=null}}function iI(n,e=null,t=[],i=[],a=null,c=null,p=null){return new dy(n,e,t,i,a,c,p)}function Bd(n){const e=Ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(a=i).field.canonicalString()+a.op.toString()+Zs(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),dl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zs(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zs(i)).join(",")),e.ht=t}return e.ht}function gf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!yy(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(i=e.filters[a]).op||!t.field.isEqual(i.field)||!Po(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$p(n.startAt,e.startAt)&&$p(n.endAt,e.endAt)}function mf(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gl(n,e){return n.filters.filter(t=>t instanceof Hr&&t.field.isEqual(e))}function Es(n,e,t){let i=ay,a=!0;for(const c of gl(n,e)){let p=ay,y=!0;switch(c.op){case"<":case"<=":p=Kw(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,y=!1;break;case"!=":case"not-in":p=ay}rI({value:i,inclusive:a},{value:p,inclusive:y})<0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];rI({value:i,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}function hy(n,e,t){let i=fl,a=!0;for(const c of gl(n,e)){let p=fl,y=!0;switch(c.op){case">=":case">":p=nI(c.value),y=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,y=!1;break;case"!=":case"not-in":p=fl}ly({value:i,inclusive:a},{value:p,inclusive:y})>0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];ly({value:i,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}class Hr extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new fy(e,t,i):"array-contains"===t?new my(e,i):"in"===t?new vb(e,i):"not-in"===t?new sI(e,i):"array-contains-any"===t?new Ib(e,i):new Hr(e,t,i)}static lt(e,t,i){return"in"===t?new xa(e,i):new py(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(pl(t,this.value)):null!==t&&Ld(this.value)===Ld(t)&&this.ft(pl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fy extends Hr{constructor(e,t,i){super(e,t,i),this.key=Ue.fromName(i.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.ft(t)}}class xa extends Hr{constructor(e,t){super(e,"in",t),this.keys=gy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class py extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=gy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ue.fromName(i.referenceValue))}class my extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ff(t)&&Fd(t.arrayValue,this.value)}}class vb extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fd(this.value.arrayValue,t)}}class sI extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fd(this.value.arrayValue,t)}}class Ib extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Fd(this.value.arrayValue,i))}}class Ys{constructor(e,t){this.position=e,this.inclusive=t}}class Ma{constructor(e,t="asc"){this.field=e,this.dir=t}}function yy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jp(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],p=n.position[a];if(i=c.field.isKeyField()?Ue.comparator(Ue.fromName(p.referenceValue),t.key):pl(p,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function $p(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Po(n.position[t],e.position[t]))return!1;return!0}class Zu{constructor(e,t=null,i=[],a=[],c=null,p="F",y=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=D,this._t=null,this.wt=null}}function oI(n,e,t,i,a,c,p,y){return new Zu(n,e,t,i,a,c,p,y)}function jd(n){return new Zu(n)}function aI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _y(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Hp(n){for(const e of n.filters)if(e.dt())return e.field;return null}function uI(n){return null!==n.collectionGroup}function $d(n){const e=Ze(n);if(null===e._t){e._t=[];const t=Hp(e),i=_y(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new Ma(t)),e._t.push(new Ma(An.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ma(An.keyField(),c))}}}return e._t}function bi(n){const e=Ze(n);if(!e.wt)if("F"===e.limitType)e.wt=iI(e.path,e.collectionGroup,$d(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of $d(e))t.push(new Ma(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new Ys(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Ys(e.startAt.position,e.startAt.inclusive):null;e.wt=iI(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e.wt}function yf(n,e,t){return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hd(n,e){return gf(bi(n),bi(e))&&n.limitType===e.limitType}function cI(n){return`${Bd(bi(n))}|lt:${n.limitType}`}function _f(n){return`Query(target=${function Ud(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Zs(i.value)}`;var i}).join(", ")}]`),dl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Zs(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Zs(t)).join(",")),`Target(${e})`}(bi(n))}; limitType=${n.limitType})`}function lI(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ue.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,p){const y=jp(a,c,p);return a.inclusive?y<=0:y<0}(t.startAt,$d(t),i)||t.endAt&&!function(a,c,p){const y=jp(a,c,p);return a.inclusive?y>=0:y>0}(t.endAt,$d(t),i)));var t,i}function Zw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yw(n){return(e,t)=>{let i=!1;for(const a of $d(n)){const c=wb(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function wb(n,e,t){const i=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(a,c,p){const y=c.data.field(a),D=p.data.field(a);return null!==y&&null!==D?pl(y,D):rt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return rt()}}function Qw(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hl(e)?"-0":e}}function Jw(n){return{integerValue:""+n}}function Xw(n,e){return Jv(e)?Jw(e):Qw(n,e)}class vy{constructor(){this._=void 0}}function Eb(n,e,t){return n instanceof Yu?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof ml?Iy(n,e):n instanceof Ra?wy(n,e):function(i,a){const c=Na(i,a),p=dI(c)+dI(i.yt);return Vd(c)&&Vd(i.yt)?Jw(p):Qw(i.It,p)}(n,e)}function Db(n,e,t){return n instanceof ml?Iy(n,e):n instanceof Ra?wy(n,e):t}function Na(n,e){return n instanceof Qu?Vd(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Yu extends vy{}class ml extends vy{constructor(e){super(),this.elements=e}}function Iy(n,e){const t=ka(e);for(const i of n.elements)t.some(a=>Po(a,i))||t.push(i);return{arrayValue:{values:t}}}class Ra extends vy{constructor(e){super(),this.elements=e}}function wy(n,e){let t=ka(e);for(const i of n.elements)t=t.filter(a=>!Po(a,i));return{arrayValue:{values:t}}}class Qu extends vy{constructor(e,t){super(),this.It=e,this.yt=t}}function dI(n){return Kn(n.integerValue||n.doubleValue)}function ka(n){return ff(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gd{constructor(e,t){this.field=e,this.transform=t}}class tE{constructor(e,t){this.version=e,this.transformResults=t}}class Dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wp{}function vf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _l(n.key,Dn.none()):new Pa(n.key,n.data,Dn.none());{const t=n.data,i=Nr.empty();let a=new cn(An.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?i.delete(c):i.set(c,p),a=a.add(c)}return new Oo(n.key,i,new qi(a.toArray()),Dn.none())}}function Wd(n,e,t){n instanceof Pa?function(i,a,c){const p=i.value.clone(),y=qp(i.fieldTransforms,a,c.transformResults);p.setAll(y),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Oo?function(i,a,c){if(!Gp(i.precondition,a))return void a.convertToUnknownDocument(c.version);const p=qp(i.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(Ey(i)),y.setAll(p),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yl(n,e,t,i){return n instanceof Pa?function(a,c,p,y){if(!Gp(a.precondition,c))return p;const D=a.value.clone(),T=Kp(a.fieldTransforms,y,c);return D.setAll(T),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,i):n instanceof Oo?function(a,c,p,y){if(!Gp(a.precondition,c))return p;const D=Kp(a.fieldTransforms,y,c),T=c.data;return T.setAll(Ey(a)),T.setAll(D),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(M=>M.field))}(n,e,t,i):(p=t,Gp(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function zd(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=Na(i.transform,a||null);null!=c&&(null===t&&(t=Nr.empty()),t.set(i.field,c))}return t||null}function zp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&kd(t,i,(a,c)=>function eE(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof ml&&i instanceof ml||t instanceof Ra&&i instanceof Ra?kd(t.elements,i.elements,Po):t instanceof Qu&&i instanceof Qu?Po(t.yt,i.yt):t instanceof Yu&&i instanceof Yu);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Pa extends Wp{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Oo extends Wp{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ey(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function qp(n,e,t){const i=new Map;bt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],p=c.transform,y=e.data.field(c.field);i.set(c.field,Db(p,y,t[a]))}return i}function Kp(n,e,t){const i=new Map;for(const a of n){const c=a.transform,p=t.data.field(a.field);i.set(a.field,Eb(c,p,e))}return i}class _l extends Wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class If extends Wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nE{constructor(e){this.count=e}}var wr,Qt;function Dy(n){switch(n){default:return rt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function hI(n){if(void 0===n)return nr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case wr.OK:return oe.OK;case wr.CANCELLED:return oe.CANCELLED;case wr.UNKNOWN:return oe.UNKNOWN;case wr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case wr.INTERNAL:return oe.INTERNAL;case wr.UNAVAILABLE:return oe.UNAVAILABLE;case wr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case wr.NOT_FOUND:return oe.NOT_FOUND;case wr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case wr.ABORTED:return oe.ABORTED;case wr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case wr.DATA_LOSS:return oe.DATA_LOSS;default:return rt()}}(Qt=wr||(wr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zu(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}const fI=new qn(Ue.comparator);function Ti(){return fI}const Ci=new qn(Ue.comparator);function qd(...n){let e=Ci;for(const t of n)e=e.insert(t.key,t);return e}function pI(n){let e=Ci;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function La(){return vl()}function gI(){return vl()}function vl(){return new Oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const mI=new qn(Ue.comparator),rE=new cn(Ue.comparator);function Ot(...n){let e=rE;for(const t of n)e=e.add(t);return e}const iE=new cn(At);function wf(){return iE}class Ef{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ef(wt.min(),a,wf(),Ti(),Ot())}}class Kd{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Kd(i,t,Ot(),Ot(),Ot())}}class Zp{constructor(e,t,i,a){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=a}}class yI{constructor(e,t){this.targetId=e,this.At=t}}class by{constructor(e,t,i=mr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Ty{constructor(){this.Rt=0,this.bt=Yp(),this.Pt=mr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ot(),t=Ot(),i=Ot();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:rt()}}),new Kd(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=Yp()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class sE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ti(),this.qt=Qs(),this.Kt=new cn(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,i=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(mf(c))if(0===i){const p=new Ue(c.path);this.jt(t,p,En.newNoDocument(p,wt.min()))}else bt(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,p)=>{const y=this.Xt(p);if(y){if(c.current&&mf(y.target)){const D=new Ue(y.target.path);null!==this.Ut.get(D)||this.ee(p,D)||this.jt(p,D,En.newNoDocument(D,e))}c.Dt&&(t.set(p,c.xt()),c.Nt())}});let i=Ot();this.qt.forEach((c,p)=>{let y=!0;p.forEachWhile(D=>{const T=this.Xt(D);return!T||2===T.purpose||(y=!1,!1)}),y&&(i=i.add(c))}),this.Ut.forEach((c,p)=>p.setReadTime(e));const a=new Ef(e,t,this.Kt,this.Ut,i);return this.Ut=Ti(),this.qt=Qs(),this.Kt=new cn(At),a}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Ty,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new cn(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Ty),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Qs(){return new qn(Ue.comparator)}function Yp(){return new qn(Ue.comparator)}const oE={asc:"ASCENDING",desc:"DESCENDING"},aE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bb{constructor(e,t){this.databaseId=e,this.gt=t}}function Zd(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _I(n,e){return n.gt?e.toBase64():e.toUint8Array()}function uE(n,e){return Zd(n,e.toTimestamp())}function Rr(n){return bt(!!n),wt.fromTimestamp(function(e){const t=Aa(e);return new wn(t.seconds,t.nanos)}(n))}function Df(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vI(n){const e=Wt.fromString(n);return bt(pE(e)),e}function bf(n,e){return Df(n.databaseId,e.path)}function Ki(n,e){const t=vI(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(Jp(t))}function Tf(n,e){return Df(n.databaseId,e)}function Cf(n){const e=vI(n);return 4===e.length?Wt.emptyPath():Jp(e)}function Qp(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jp(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cE(n,e,t){return{name:bf(n,e),fields:t.value.mapValue.fields}}function Cy(n,e,t){const i=Ki(n,e.name),a=Rr(e.updateTime),c=new Nr({mapValue:{fields:e.fields}}),p=En.newFoundDocument(i,a,c);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function Yd(n,e){let t;if(e instanceof Pa)t={update:cE(n,e.key,e.value)};else if(e instanceof _l)t={delete:bf(n,e.key)};else if(e instanceof Oo)t={update:cE(n,e.key,e.data),updateMask:fE(e.fieldMask)};else{if(!(e instanceof If))return rt();t={verify:bf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const p=c.transform;if(p instanceof Yu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ml)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ra)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Qu)return{fieldPath:c.field.canonicalString(),increment:p.yt};throw rt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:uE(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:rt()),t;var a}function Sf(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Dn.updateTime(Rr(a.updateTime)):void 0!==a.exists?Dn.exists(a.exists):Dn.none():Dn.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let y=null;"setToServerValue"in p?(bt("REQUEST_TIME"===p.setToServerValue),y=new Yu):"appendMissingElements"in p?y=new ml(p.appendMissingElements.values||[]):"removeAllFromArray"in p?y=new Ra(p.removeAllFromArray.values||[]):"increment"in p?y=new Qu(c,p.increment):rt();const D=An.fromServerFormat(p.fieldPath);return new Gd(D,y)}(n,a)):[];var a;if(e.update){const a=Ki(n,e.update.name),c=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new qi((e.updateMask.fieldPaths||[]).map(T=>An.fromServerFormat(T)));return new Oo(a,c,p,t,i)}return new Pa(a,c,t,i)}if(e.delete){const a=Ki(n,e.delete);return new _l(a,t)}if(e.verify){const a=Ki(n,e.verify);return new If(a,t)}return rt()}function Af(n,e){return{documents:[Tf(n,e.path)]}}function Qd(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Tf(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tf(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(D){if(0===D.length)return;const T=D.map(M=>function(O){if("=="===O.op){if(eI(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NAN"}};if(cy(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(eI(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NOT_NAN"}};if(cy(O.value))return{unaryFilter:{field:Xd(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(O.field),op:dE(O.op),value:O.value}}}(M));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(D){if(0!==D.length)return D.map(T=>{return{field:Xd((M=T).field),direction:EI(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=(T=e.limit,n.gt||dl(T)?T:{value:T});var T,y,D;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function Jd(n){let e=Cf(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){bt(1===i);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=Xp(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(M=>{return new Ma(Lo((O=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let y=null;t.limit&&(y=function(M){let O;return O="object"==typeof M?M.value:M,dl(O)?null:O}(t.limit));let D=null;var M;t.startAt&&(D=new Ys((M=t.startAt).values||[],!!M.before));let T=null;return t.endAt&&(T=function(M){return new Ys(M.values||[],!M.before)}(t.endAt)),oI(e,a,p,c,y,"F",D,T)}function Xp(n){return n?void 0!==n.unaryFilter?[Tb(n)]:void 0!==n.fieldFilter?[hE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Xp(e)).reduce((e,t)=>e.concat(t)):rt():[]}function EI(n){return oE[n]}function dE(n){return aE[n]}function Xd(n){return{fieldPath:n.canonicalString()}}function Lo(n){return An.fromServerFormat(n.fieldPath)}function hE(n){return Hr.create(Lo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Tb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Lo(n.unaryFilter.field);return Hr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Lo(n.unaryFilter.field);return Hr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lo(n.unaryFilter.field);return Hr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Lo(n.unaryFilter.field);return Hr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function fE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DI(e)),e=gE(n.get(t),e);return DI(e)}function gE(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function DI(n){return n+"\x01\x01"}function Js(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const p=n.indexOf("\x01",c);switch((p<0||p>t)&&rt(),n.charAt(p+1)){case"\x01":const y=n.substring(c,p);let D;0===a.length?D=y:(a+=y,D=a,a=""),i.push(D);break;case"\x10":a+=n.substring(c,p),a+="\0";break;case"\x11":a+=n.substring(c,p+1);break;default:rt()}c=p+2}return new Wt(i)}const Sy=["userId","batchId"];function eg(n,e){return[n,li(e)]}function tg(n,e,t){return[n,li(e),t]}const mE={},yE=["prefixPath","collectionGroup","readTime","documentId"],_E=["prefixPath","collectionGroup","documentId"],vE=["collectionGroup","readTime","prefixPath","documentId"],IE=["canonicalId","targetId"],wE=["targetId","path"],ng=["path","targetId"],Il=["collectionId","parent"],Cb=["indexId","uid"],xf=["uid","sequenceNumber"],EE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DE=["indexId","uid","orderedDocumentKey"],Ay=["userId","collectionPath","documentId"],bE=["userId","collectionPath","largestBatchId"],Fo=["userId","collectionGroup","largestBatchId"],eh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xr=[...eh,"documentOverlays"],Ju=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mf=Ju,Ds=[...Mf,"indexConfiguration","indexState","indexEntries"];class rg extends jw{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ln(n,e){const t=Ze(n);return ws.M(t.ie,e)}class Xu{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Wd(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=gI();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const D=vf(p,y);null!==D&&i.set(a.key,D),p.isValidDocument()||p.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(t,i)=>zp(t,i))&&kd(this.baseMutations,e.baseMutations,(t,i)=>zp(t,i))}}class ec{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){bt(e.mutations.length===i.length);let a=mI;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,i[p].version);return new ec(e,t,i,a)}}class tc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zi{constructor(e,t,i,a,c=wt.min(),p=wt.min(),y=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wl{constructor(e){this.re=e}}function El(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Va(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:bf(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Zd(a,c.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return rt();i.unknownDocument={path:t.path.toArray(),version:nc(e.version)}}var a,c;return i}function Va(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(n){const e=new wn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function ic(n,e){const t=(e.baseMutations||[]).map(c=>Sf(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const i=e.mutations.map(c=>Sf(n.re,c)),a=wn.fromMillis(e.localWriteTimeMs);return new Xu(e.batchId,a,t,i)}function nh(n){const e=rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rc(n.lastLimboFreeSnapshotVersion):wt.min();let i;var a;return void 0!==n.query.documents?(bt(1===(a=n.query).documents.length),i=bi(jd(Cf(a.documents[0])))):i=bi(Jd(n.query)),new Zi(i,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function xy(n,e){const t=nc(e.snapshotVersion),i=nc(e.lastLimboFreeSnapshotVersion);let a;a=mf(e.target)?Af(n.re,e.target):Qd(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bd(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function ig(n){const e=Jd({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yf(e,e.limit,"L"):e}function sg(n,e){return new tc(e.largestBatchId,Sf(n.re,e.overlayMutation))}function My(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function Ny(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:nc(i.readTime),documentKey:li(i.documentKey.path),largestBatchId:i.largestBatchId}}class TE{getBundleMetadata(e,t){return bI(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:rc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return bI(e).put({bundleId:(i=t).id,createTime:nc(Rr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ry(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:ig(a.bundledQuery),readTime:rc(a.readTime)};var a})}saveNamedQuery(e,t){return Ry(e).put({name:(i=t).name,readTime:nc(Rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function bI(n){return Ln(n,"bundles")}function Ry(n){return Ln(n,"namedQueries")}class og{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new og(e,t.uid||"")}getOverlay(e,t){return rh(e).get(My(this.userId,t)).next(i=>i?sg(this.It,i):null)}getOverlays(e,t){const i=La();return re.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,p)=>{const y=new tc(t,p);a.push(this.ue(e,y))}),re.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(p=>a.add(li(p.getCollectionPath())));const c=[];return a.forEach(p=>{const y=IDBKeyRange.bound([this.userId,p,i],[this.userId,p,i+1],!1,!0);c.push(rh(e).Y("collectionPathOverlayIndex",y))}),re.waitFor(c)}getOverlaysForCollection(e,t,i){const a=La(),c=li(t),p=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return rh(e).W("collectionPathOverlayIndex",p).next(y=>{for(const D of y){const T=sg(this.It,D);a.set(T.getKey(),T)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=La();let p;const y=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rh(e).Z({index:"collectionGroupOverlayIndex",range:y},(D,T,M)=>{const O=sg(this.It,T);c.size()<a||O.largestBatchId===p?(c.set(O.getKey(),O),p=O.largestBatchId):M.done()}).next(()=>c)}ue(e,t){return rh(e).put(function(i,a,c){const[p,y,D]=My(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Yd(i.re,c.mutation)}}(this.It,this.userId,t))}}function rh(n){return Ln(n,"documentOverlays")}class Ba{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Kn(e.integerValue));else if("doubleValue"in e){const i=Kn(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),hl(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(cl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?tI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):rt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const a of Object.keys(i))this._e(a,t),this.ae(i[a],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const a of i)this.ae(a,t)}ge(e,t){this.le(t,37),Ue.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function ky(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TI(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=ky(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}Ba.Te=new Ba;class ag{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),i=TI(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),i=TI(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class ug{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Py{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Nf{constructor(){this.Be=new ag,this.Le=new ug(this.Be),this.Ue=new Py(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ua{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ua(this.indexId,this.documentKey,this.arrayValue,i)}}function ja(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Oy(n.arrayValue,e.arrayValue),0!==t?t:(t=Oy(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function Oy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class CI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=ny(e);if(void 0!==t&&!this.ze(t))return!1;const i=ol(e);let a=0,c=0;for(;a<i.length&&this.ze(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.je){const p=i[a];if(!this.He(this.je,p)||!this.Je(this.Ge[c++],p))return!1;++a}for(;a<i.length;++a){const p=i[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],p))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ly{constructor(){this.Ye=new cg}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(zi.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class cg{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new cn(Wt.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new cn(Wt.comparator)).toArray()}}const lg=new Uint8Array(0);class Fy{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new cg,this.Ze=new Oa(i=>Bd(i),(i,a)=>gf(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:i,parent:li(a)};return Vy(e).put(c)}return re.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[zv(t),""],!1,!0);return Vy(e).W(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;i.push(Js(p.parent))}return i})}addFieldIndex(e,t){const i=kf(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var p;delete a.indexId;const c=i.add(a);if(t.indexState){const p=ih(e);return c.next(y=>{p.put(Ny(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=kf(e),a=ih(e),c=Rf(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Rf(e);let a=!0;const c=new Map;return re.forEach(this.tn(t),p=>this.en(e,p).next(y=>{a&&(a=!!y),c.set(p,y)})).next(()=>{if(a){let p=Ot();const y=[];return re.forEach(c,(D,T)=>{var M;Me("IndexedDbIndexManager",`Using index ${M=D,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${Bd(t)}`);const O=function(Lt,kt){const Nt=ny(kt);if(void 0===Nt)return null;for(const Ut of gl(Lt,Nt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(T,D),q=function(Lt,kt){const Nt=new Map;for(const Ut of ol(kt))for(const Wr of gl(Lt,Ut.fieldPath))switch(Wr.op){case"==":case"in":Nt.set(Ut.fieldPath.canonicalString(),Wr.value);break;case"not-in":case"!=":return Nt.set(Ut.fieldPath.canonicalString(),Wr.value),Array.from(Nt.values())}return null}(T,D),X=function(Lt,kt){const Nt=[];let Ut=!0;for(const Wr of ol(kt)){const Rv=0===Wr.kind?Es(Lt,Wr.fieldPath,Lt.startAt):hy(Lt,Wr.fieldPath,Lt.startAt);Nt.push(Rv.value),Ut&&(Ut=Rv.inclusive)}return new Ys(Nt,Ut)}(T,D),ce=function(Lt,kt){const Nt=[];let Ut=!0;for(const Wr of ol(kt)){const Rv=0===Wr.kind?hy(Lt,Wr.fieldPath,Lt.endAt):Es(Lt,Wr.fieldPath,Lt.endAt);Nt.push(Rv.value),Ut&&(Ut=Rv.inclusive)}return new Ys(Nt,Ut)}(T,D),Le=this.nn(D,T,X),Ve=this.nn(D,T,ce),Mt=this.sn(D,T,q),Bt=this.rn(D.indexId,O,Le,X.inclusive,Ve,ce.inclusive,Mt);return re.forEach(Bt,Lt=>i.J(Lt,t.limit).next(kt=>{kt.forEach(Nt=>{const Ut=Ue.fromSegments(Nt.documentKey);p.has(Ut)||(p=p.add(Ut),y.push(Ut))})}))}).next(()=>y)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,a,c,p,y){const D=(null!=t?t.length:1)*Math.max(i.length,c.length),T=D/(null!=t?t.length:1),M=[];for(let O=0;O<D;++O){const q=t?this.on(t[O/T]):lg,X=this.un(e,q,i[O%T],a),ce=this.cn(e,q,c[O%T],p),Le=y.map(Ve=>this.un(e,q,Ve,!0));M.push(...this.createRange(X,ce,Le))}return M}un(e,t,i,a){const c=new Ua(e,Ue.empty(),t,i);return a?c:c.Ke()}cn(e,t,i,a){const c=new Ua(e,Ue.empty(),t,i);return a?c.Ke():c}en(e,t){const i=new CI(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const y of c)i.We(y)&&(!p||y.fields.length>p.fields.length)&&(p=y);return p})}getIndexType(e,t){let i=2;return re.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==i&&c.fields.length<function(p){let y=new cn(An.comparator),D=!1;for(const T of p.filters){const M=T;M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?D=!0:y=y.add(M.field))}for(const T of p.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(D?1:0)}(a)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Nf;for(const a of ol(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=i.qe(a.kind);Ba.Te.ce(c,p)}return i.$e()}on(e){const t=new Nf;return Ba.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Nf;return Ba.Te.ce(Ku(this.databaseId,t),i.qe(function(a){const c=ol(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let a=[];a.push(new Nf);let c=0;for(const p of ol(e)){const y=i[c++];for(const D of a)if(this.ln(t,p.fieldPath)&&ff(y))a=this.fn(a,p,y);else{const T=D.qe(p.kind);Ba.Te.ce(y,T)}}return this.dn(a)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const a=[...e],c=[];for(const p of i.arrayValue.values||[])for(const y of a){const D=new Nf;D.seed(y.$e()),Ba.Te.ce(p,D.qe(t.kind)),c.push(D)}return c}ln(e,t){return!!e.filters.find(i=>i instanceof Hr&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=kf(e),a=ih(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(c=>{const p=[];return re.forEach(c,y=>a.get([y.indexId,this.uid]).next(D=>{p.push(function(T,M){const O=M?new hf(M.sequenceNumber,new zi(rc(M.readTime),new Ue(Js(M.documentKey)),M.largestBatchId)):hf.empty(),q=T.fields.map(([X,ce])=>new Lp(An.fromServerFormat(X),ce));return new Op(T.indexId,T.collectionGroup,q,O)}(y,D))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:At(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=kf(e),c=ih(e);return this._n(e).next(p=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>re.forEach(y,D=>c.put(Ny(D.indexId,this.user,p,i)))))}updateIndexEntries(e,t){const i=new Map;return re.forEach(t,(a,c)=>{const p=i.get(a.collectionGroup);return(p?re.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(i.set(a.collectionGroup,y),re.forEach(y,D=>this.wn(e,a,D).next(T=>{const M=this.mn(c,D);return T.isEqual(M)?re.resolve():this.gn(e,c,D,T,M)}))))})}yn(e,t,i,a){return Rf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,a){return Rf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const a=Rf(e);let c=new cn(ja);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(p,y)=>{c=c.add(new Ua(i.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}mn(e,t){let i=new cn(ja);const a=this.an(t,e);if(null==a)return i;const c=ny(t);if(null!=c){const p=e.data.field(c.fieldPath);if(ff(p))for(const y of p.arrayValue.values||[])i=i.add(new Ua(t.indexId,e.key,this.on(y),a))}else i=i.add(new Ua(t.indexId,e.key,lg,a));return i}gn(e,t,i,a,c){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(y,D,T,M,O){const q=y.getIterator(),X=D.getIterator();let ce=ul(q),Le=ul(X);for(;ce||Le;){let Ve=!1,Mt=!1;if(ce&&Le){const Bt=T(ce,Le);Bt<0?Mt=!0:Bt>0&&(Ve=!0)}else null!=ce?Mt=!0:Ve=!0;Ve?(M(Le),Le=ul(X)):Mt?(O(ce),ce=ul(q)):(ce=ul(q),Le=ul(X))}}(a,c,ja,y=>{p.push(this.yn(e,t,i,y))},y=>{p.push(this.pn(e,t,i,y))}),re.waitFor(p)}_n(e){let t=1;return ih(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((p,y)=>ja(p,y)).filter((p,y,D)=>!y||0!==ja(p,D[y-1]));const a=[];a.push(e);for(const p of i){const y=ja(p,e),D=ja(p,t);if(0===y)a[0]=e.Ke();else if(y>0&&D<0)a.push(p),a.push(p.Ke());else if(D>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2)c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,lg,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,lg,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(By)}getMinOffset(e,t){return re.mapArray(this.tn(t),i=>this.en(e,i).next(a=>a||rt())).next(By)}}function Vy(n){return Ln(n,"collectionParents")}function Rf(n){return Ln(n,"indexEntries")}function kf(n){return Ln(n,"indexConfiguration")}function ih(n){return Ln(n,"indexState")}function By(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;ry(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new zi(e.readTime,e.documentKey,t)}const Uy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SI(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let y=0;const D=i.Z({range:p},(M,O,q)=>(y++,q.delete()));c.push(D.next(()=>{bt(1===y)}));const T=[];for(const M of t.mutations){const O=tg(e,M.key.path,t.batchId);c.push(a.delete(O)),T.push(M.key)}return re.waitFor(c).next(()=>T)}function dg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class Pf{constructor(e,t,i,a){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static oe(e,t,i,a){bt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Pf(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).Z({index:"userMutationsIndex",range:i},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=Dl(e),p=$a(e);return p.add({}).next(y=>{bt("number"==typeof y);const D=new Xu(y,t,i,a),T=function(q,X,ce){const Le=ce.baseMutations.map(Mt=>Yd(q.re,Mt)),Ve=ce.mutations.map(Mt=>Yd(q.re,Mt));return{userId:X,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Le,mutations:Ve}}(this.It,this.userId,D),M=[];let O=new cn((q,X)=>At(q.canonicalString(),X.canonicalString()));for(const q of a){const X=tg(this.userId,q.key.path,y);O=O.add(q.key.path.popLast()),M.push(p.put(T)),M.push(c.put(X,mE))}return O.forEach(q=>{M.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.In[y]=D.keys()}),re.waitFor(M).next(()=>D)})}lookupMutationBatch(e,t){return $a(e).get(t).next(i=>i?(bt(i.userId===this.userId),ic(this.It,i)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return $a(e).Z({index:"userMutationsIndex",range:a},(p,y,D)=>{y.userId===this.userId&&(bt(y.batchId>=i),c=ic(this.It,y)),D.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return $a(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{i=c.batchId,p.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).W("userMutationsIndex",t).next(i=>i.map(a=>ic(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=eg(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return Dl(e).Z({range:a},(p,y,D)=>{const[T,M,O]=p,q=Js(M);if(T===this.userId&&t.path.isEqual(q))return $a(e).get(O).next(X=>{if(!X)throw rt();bt(X.userId===this.userId),c.push(ic(this.It,X))});D.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new cn(At);const a=[];return t.forEach(c=>{const p=eg(this.userId,c.path),y=IDBKeyRange.lowerBound(p),D=Dl(e).Z({range:y},(T,M,O)=>{const[q,X,ce]=T,Le=Js(X);q===this.userId&&c.path.isEqual(Le)?i=i.add(ce):O.done()});a.push(D)}),re.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=eg(this.userId,i),p=IDBKeyRange.lowerBound(c);let y=new cn(At);return Dl(e).Z({range:p},(D,T,M)=>{const[O,q,X]=D,ce=Js(q);O===this.userId&&i.isPrefixOf(ce)?ce.length===a&&(y=y.add(X)):M.done()}).next(()=>this.En(e,y))}En(e,t){const i=[],a=[];return t.forEach(c=>{a.push($a(e).get(c).next(p=>{if(null===p)throw rt();bt(p.userId===this.userId),i.push(ic(this.It,p))}))}),re.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return SI(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return Dl(e).Z({range:i},(c,p,y)=>{if(c[0]===this.userId){const D=Js(c[1]);a.push(D)}else y.done()}).next(()=>{bt(0===a.length)})})}containsKey(e,t){return hg(e,this.userId,t)}Rn(e){return jy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hg(n,e,t){const i=eg(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let p=!1;return Dl(n).Z({range:c,X:!0},(y,D,T)=>{const[M,O,q]=y;M===e&&O===a&&(p=!0),T.done()}).next(()=>p)}function $a(n){return Ln(n,"mutations")}function Dl(n){return Ln(n,"documentMutations")}function jy(n){return Ln(n,"mutationQueues")}class sc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sc(0)}static vn(){return new sc(-1)}}class AI{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new sc(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>wt.fromTimestamp(new wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(bt(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return bl(e).Z((p,y)=>{const D=nh(y);D.sequenceNumber<=t&&null===i.get(D.targetId)&&(a++,c.push(this.removeTargetData(e,D)))}).next(()=>re.waitFor(c)).next(()=>a)}forEachTarget(e,t){return bl(e).Z((i,a)=>{const c=nh(a);t(c)})}Vn(e){return $y(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Sn(e,t){return $y(e).put("targetGlobalKey",t)}Dn(e,t){return bl(e).put(xy(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Bd(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return bl(e).Z({range:a,index:"queryTargetsIndex"},(p,y,D)=>{const T=nh(y);gf(t,T.target)&&(c=T,D.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=Ha(e);return t.forEach(p=>{const y=li(p.path);a.push(c.put({targetId:i,path:y})),a.push(this.referenceDelegate.addReference(e,i,p))}),re.waitFor(a)}removeMatchingKeys(e,t,i){const a=Ha(e);return re.forEach(t,c=>{const p=li(c.path);return re.waitFor([a.delete([i,p]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=Ha(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ha(e);let c=Ot();return a.Z({range:i,X:!0},(p,y,D)=>{const T=Js(p[1]),M=new Ue(T);c=c.add(M)}).next(()=>c)}containsKey(e,t){const i=li(t.path),a=IDBKeyRange.bound([i],[zv(i)],!1,!0);let c=0;return Ha(e).Z({index:"documentTargetsIndex",X:!0,range:a},([p,y],D,T)=>{0!==p&&(c++,T.done())}).next(()=>c>0)}se(e,t){return bl(e).get(t).next(i=>i?nh(i):null)}}function bl(n){return Ln(n,"targets")}function $y(n){return Ln(n,"targetGlobal")}function Ha(n){return Ln(n,"targetDocuments")}function CE([n,e],[t,i]){const a=At(n,t);return 0===a?At(e,i):a}class SE{constructor(e){this.xn=e,this.buffer=new cn(CE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();CE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AE{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Wu(i)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Sa(i)}yield t.Fn(3e5)}))}}class xI{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Di.at);const i=new SE(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Uy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uy):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,a,c,p,y,D,T;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,p=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(i=O,y=Date.now(),this.removeTargets(e,i,t))).next(O=>(c=O,D=Date.now(),this.removeOrphanedDocuments(e,i))).next(O=>(T=Date.now(),kp()<=Sr.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-M}ms\n\tDetermined least recently used ${a} in `+(y-p)+`ms\n\tRemoved ${c} targets in `+(D-y)+`ms\n\tRemoved ${O} documents in `+(T-D)+`ms\nTotal Duration: ${T-M}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:O})))}}class xE{constructor(e,t){this.db=e,this.garbageCollector=new xI(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return Zn(e,i)}removeReference(e,t,i){return Zn(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Zn(e,t)}Gn(e,t){return function(i,a){let c=!1;return jy(i).tt(p=>hg(i,p,a).next(y=>(y&&(c=!0),re.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(p,y)=>{if(y<=t){const D=this.Gn(e,p).next(T=>{if(!T)return c++,i.getEntry(e,p).next(()=>(i.removeEntry(p,wt.min()),Ha(e).delete([0,li(p.path)])))});a.push(D)}}).next(()=>re.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Zn(e,t)}Kn(e,t){const i=Ha(e);let a,c=Di.at;return i.Z({index:"documentTargetsIndex"},([p,y],{path:D,sequenceNumber:T})=>{0===p?(c!==Di.at&&t(new Ue(Js(a)),c),c=T,a=D):c=Di.at}).next(()=>{c!==Di.at&&t(new Ue(Js(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zn(n,e){return Ha(n).put((i=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:i}));var i}class Hy{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ME{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return oc(e).put(i)}removeEntry(e,t,i){return oc(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Va(c),p[p.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=En.newInvalidDocument(t);return oc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sh(t))},(a,c)=>{i=this.jn(t,c)}).next(()=>i)}Wn(e,t){let i={size:0,document:En.newInvalidDocument(t)};return oc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sh(t))},(a,c)=>{i={document:this.jn(t,c),size:dg(c)}}).next(()=>i)}getEntries(e,t){let i=Ti();return this.zn(e,t,(a,c)=>{const p=this.jn(a,c);i=i.insert(a,p)}).next(()=>i)}Hn(e,t){let i=Ti(),a=new qn(Ue.comparator);return this.zn(e,t,(c,p)=>{const y=this.jn(c,p);i=i.insert(c,y),a=a.insert(c,dg(p))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return re.resolve();let a=new cn(kI);t.forEach(D=>a=a.add(D));const c=IDBKeyRange.bound(sh(a.first()),sh(a.last())),p=a.getIterator();let y=p.getNext();return oc(e).Z({index:"documentKeyIndex",range:c},(D,T,M)=>{const O=Ue.fromSegments([...T.prefixPath,T.collectionGroup,T.documentId]);for(;y&&kI(y,O)<0;)i(y,null),y=p.getNext();y&&y.isEqual(O)&&(i(y,T),y=p.hasNext()?p.getNext():null),y?M.j(sh(y)):M.done()}).next(()=>{for(;y;)i(y,null),y=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,i){const a=[t.popLast().toArray(),t.lastSegment(),Va(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oc(e).W(IDBKeyRange.bound(a,c,!0)).next(p=>{let y=Ti();for(const D of p){const T=this.jn(Ue.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);y=y.insert(T.key,T)}return y})}getAllFromCollectionGroup(e,t,i,a){let c=Ti();const p=Tl(t,i),y=Tl(t,zi.max());return oc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,y,!0)},(D,T,M)=>{const O=this.jn(Ue.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);c=c.insert(O.key,O),c.size===a&&M.done()}).next(()=>c)}newChangeBuffer(e){return new NI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return RI(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Qn(e,t){return RI(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function th(n,e){let t;if(e.document)t=Cy(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ue.fromSegments(e.noDocument.path),a=rc(e.noDocument.readTime);t=En.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const i=Ue.fromSegments(e.unknownDocument.path),a=rc(e.unknownDocument.version);t=En.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new wn(i[0],i[1]);return wt.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(wt.min()))return i}return En.newInvalidDocument(e)}}function MI(n){return new ME(n)}class NI extends Hy{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Oa(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new cn((c,p)=>At(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),p.isValidDocument()){const D=El(this.Yn.It,p);a=a.add(c.path.popLast()),i+=dg(D)-y.size,t.push(this.Yn.addEntry(e,c,D))}else if(i-=y.size,this.trackRemovals){const D=El(this.Yn.It,p.convertToNoDocument(wt.min()));t.push(this.Yn.addEntry(e,c,D))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,i)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((c,p)=>{this.Xn.set(c,{size:p,readTime:i.get(c).readTime})}),i))}}function RI(n){return Ln(n,"remoteDocumentGlobal")}function oc(n){return Ln(n,"remoteDocumentsV14")}function sh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tl(n,e){const t=e.documentKey.path.toArray();return[n,Va(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kI(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=At(t[c],i[c]),a)return a;return a=At(t.length,i.length),a||(a=At(t[t.length-2],i[i.length-2]),a||At(t[t.length-1],i[i.length-1]))}class NE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gy{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.getBaseDocument(e,t,i))).next(a=>(null!==i&&yl(i.mutation,a,qi.empty(),wn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ot()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ot()){const a=La();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let p=qd();return c.forEach((y,D)=>{p=p.insert(y,D.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const i=La();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ot()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,y)=>{t.set(p,y)})})}computeViews(e,t,i,a){let c=Ti();const p=vl(),y=vl();return t.forEach((D,T)=>{const M=i.get(T.key);a.has(T.key)&&(void 0===M||M.mutation instanceof Oo)?c=c.insert(T.key,T):void 0!==M&&(p.set(T.key,M.mutation.getFieldMask()),yl(M.mutation,T,M.mutation.getFieldMask(),wn.now()))}),this.recalculateAndSaveOverlays(e,c).next(D=>(D.forEach((T,M)=>p.set(T,M)),t.forEach((T,M)=>{var O;return y.set(T,new NE(M,null!==(O=p.get(T))&&void 0!==O?O:null))}),y))}recalculateAndSaveOverlays(e,t){const i=vl();let a=new qn((p,y)=>p-y),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const y of p)y.keys().forEach(D=>{const T=t.get(D);if(null===T)return;let M=i.get(D)||qi.empty();M=y.applyToLocalView(T,M),i.set(D,M);const O=(a.get(y.batchId)||Ot()).add(D);a=a.insert(y.batchId,O)})}).next(()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const D=y.getNext(),T=D.key,M=D.value,O=gI();M.forEach(q=>{if(!c.has(q)){const X=vf(t.get(q),i.get(q));null!==X&&O.set(q,X),c=c.add(q)}}),p.push(this.documentOverlayCache.saveOverlays(e,T,O))}return re.waitFor(p)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Ue.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):re.resolve(La());let y=-1,D=c;return p.next(T=>re.forEach(T,(M,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),c.get(M)?re.resolve():this.getBaseDocument(e,M,O).next(q=>{D=D.insert(M,q)}))).next(()=>this.populateOverlays(e,T,c)).next(()=>this.computeViews(e,D,T,Ot())).next(M=>({batchId:y,changes:pI(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(i=>{let a=qd();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=qd();return this.indexManager.getCollectionParents(e,a).next(p=>re.forEach(p,y=>{const D=(T=t,M=y.child(a),new Zu(M,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,M;return this.getDocumentsMatchingCollectionQuery(e,D,i).next(T=>{T.forEach((M,O)=>{c=c.insert(M,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(c=>{c.forEach((y,D)=>{const T=D.getKey();null===a.get(T)&&(a=a.insert(T,En.newInvalidDocument(T)))});let p=qd();return a.forEach((y,D)=>{const T=c.get(y);void 0!==T&&yl(T.mutation,D,qi.empty(),wn.now()),lI(t,D)&&(p=p.insert(y,D))}),p})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(En.newInvalidDocument(t))}}class RE{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Rr(i.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:ig(i.bundledQuery),readTime:Rr(i.readTime)}),re.resolve();var i}}class PI{constructor(){this.overlays=new qn(Ue.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=La();return re.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.ue(e,t,c)}),re.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const a=La(),c=t.length+1,p=new Ue(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const D=y.getNext().value,T=D.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&D.largestBatchId>i&&a.set(D.getKey(),D)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new qn((T,M)=>T-M);const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>i){let M=c.get(T.largestBatchId);null===M&&(M=La(),c=c.insert(T.largestBatchId,M)),M.set(T.getKey(),T)}}const y=La(),D=c.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((T,M)=>y.set(T,M)),!(y.size()>=a)););return re.resolve(y)}ue(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const p=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(i.key,new tc(t,i));let c=this.es.get(t);void 0===c&&(c=Ot(),this.es.set(t,c)),this.es.set(t,c.add(i.key))}}class OI{constructor(){this.ns=new cn(Er.ss),this.rs=new cn(Er.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Er(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Er(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Ue(new Wt([])),i=new Er(t,e),a=new Er(t,e+1),c=[];return this.rs.forEachInRange([i,a],p=>{this.cs(p),c.push(p.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ue(new Wt([])),i=new Er(t,e),a=new Er(t,e+1);let c=Ot();return this.rs.forEachInRange([i,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new Er(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Er{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ue.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||Ue.comparator(e.key,t.key)}}class LI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cn(Er.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.ws;this.ws++;const p=new Xu(c,t,i,a);this.mutationQueue.push(p);for(const y of a)this.gs=this.gs.add(new Er(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return re.resolve(p)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Er(t,0),a=new Er(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([i,a],p=>{const y=this.ys(p._s);c.push(y)}),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new cn(At);return t.forEach(a=>{const c=new Er(a,0),p=new Er(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,p],y=>{i=i.add(y._s)})}),re.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;Ue.isDocumentKey(c)||(c=c.child(""));const p=new Er(new Ue(c),0);let y=new cn(At);return this.gs.forEachWhile(D=>{const T=D.key.path;return!!i.isPrefixOf(T)&&(T.length===a&&(y=y.add(D._s)),!0)},p),re.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return re.forEach(t.mutations,a=>{const c=new Er(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Er(t,0),a=this.gs.firstAfterOrEqual(i);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vo{constructor(e){this.Es=e,this.docs=new qn(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,p=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let i=Ti();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():En.newInvalidDocument(a))}),re.resolve(i)}getAllFromCollection(e,t,i){let a=Ti();const c=new Ue(t.child("")),p=this.docs.getIteratorFrom(c);for(;p.hasNext();){const{key:y,value:{document:D}}=p.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||ry(ko(D),i)<=0||(a=a.insert(D.key,D.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,i,a){rt()}As(e,t){return re.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new kE(this)}getSize(e){return re.resolve(this.size)}}class kE extends Hy{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class PE{constructor(e){this.persistence=e,this.Rs=new Oa(t=>Bd(t),gf),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new OI,this.targetCount=0,this.vs=sc.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.Rs.forEach((p,y)=>{y.sequenceNumber<=t&&null===i.get(y.targetId)&&(this.Rs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),re.waitFor(c).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),re.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class Xs{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Di(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new PE(this),this.indexManager=new Ly,this.remoteDocumentCache=new Vo(i=>this.referenceDelegate.xs(i)),this.It=new wl(t),this.Ns=new RE(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new LI(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Me("MemoryPersistence","Starting transaction:",e);const a=new eo(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return re.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class eo extends jw{constructor(e){super(),this.currentSequenceNumber=e}}class Ai{constructor(e){this.persistence=e,this.Fs=new OI,this.$s=null}static Bs(e){return new Ai(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,i=>{const a=Ue.fromPath(i);return this.Us(e,a).next(c=>{c||t.removeEntry(a,wt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class FI{constructor(e){this.It=e}$(e,t,i,a){const c=new iy("createOrUpgrade",t);var y;i<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sy,{unique:!0}),y.createObjectStore("documentMutations"),Wy(e),function(y){y.createObjectStore("remoteDocuments")}(e));let p=re.resolve();return i<3&&a>=3&&(0!==i&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),Wy(e)),p=p.next(()=>function(y){const D=y.store("targetGlobal"),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",T)}(c))),i<4&&a>=4&&(0!==i&&(p=p.next(()=>function(y,D){return D.store("mutations").W().next(T=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sy,{unique:!0});const M=D.store("mutations"),O=T.map(q=>M.put(q));return re.waitFor(O)})}(e,c))),p=p.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(p=p.next(()=>this.qs(c))),i<6&&a>=6&&(p=p.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),i<7&&a>=7&&(p=p.next(()=>this.Gs(c))),i<8&&a>=8&&(p=p.next(()=>this.Qs(e,c))),i<9&&a>=9&&(p=p.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(p=p.next(()=>this.js(c))),i<11&&a>=11&&(p=p.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(p=p.next(()=>{!function(y){const D=y.createObjectStore("documentOverlays",{keyPath:Ay});D.createIndex("collectionPathOverlayIndex",bE,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",Fo,{unique:!1})}(e)})),i<13&&a>=13&&(p=p.next(()=>function(y){const D=y.createObjectStore("remoteDocumentsV14",{keyPath:yE});D.createIndex("documentKeyIndex",_E),D.createIndex("collectionGroupIndex",vE)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(p=p.next(()=>this.zs(e,c))),i<15&&a>=15&&(p=p.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:Cb}).createIndex("sequenceNumberIndex",xf,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:EE}).createIndex("documentKeyIndex",DE,{unique:!1})}(e))),p}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=dg(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>re.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",p).next(y=>re.forEach(y,D=>{bt(D.userId===c.userId);const T=ic(this.It,D);return SI(e,c.userId,T).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.Z((p,y)=>{const D=new Wt(p),T=[0,li(D)];c.push(t.get(T).next(M=>M?re.resolve():t.put({targetId:0,path:li(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>re.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Il});const i=t.store("collectionParents"),a=new cg,c=p=>{if(a.add(p)){const y=p.lastSegment(),D=p.popLast();return i.put({collectionId:y,parent:li(D)})}};return t.store("remoteDocuments").Z({X:!0},(p,y)=>{const D=new Wt(p);return c(D.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([p,y,D],T)=>{const M=Js(y);return c(M.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const c=nh(a),p=xy(this.It,c);return t.put(p)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((c,p)=>{const y=t.store("remoteDocumentsV14"),D=(T=p,T.document?new Ue(Wt.fromString(T.document.name).popFirst(5)):T.noDocument?Ue.fromSegments(T.noDocument.path):T.unknownDocument?Ue.fromSegments(T.unknownDocument.path):rt()).path.toArray();var T;const M={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(y.put(M))}).next(()=>re.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=MI(this.It),c=new Xs(Ai.Bs,this.It.re);return i.W().next(p=>{const y=new Map;return p.forEach(D=>{var T;let M=null!==(T=y.get(D.userId))&&void 0!==T?T:Ot();ic(this.It,D).keys().forEach(O=>M=M.add(O)),y.set(D.userId,M)}),re.forEach(y,(D,T)=>{const M=new pr(T),O=og.oe(this.It,M),q=c.getIndexManager(M),X=Pf.oe(M,this.It,q,c.referenceDelegate);return new Gy(a,X,O,q).recalculateAndSaveOverlaysForDocumentKeys(new rg(t,Di.at),D).next()})})}}function Wy(n){n.createObjectStore("targetDocuments",{keyPath:wE}).createIndex("documentTargetsIndex",ng,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IE,{unique:!0}),n.createObjectStore("targetGlobal")}const zy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qy{constructor(e,t,i,a,c,p,y,D,T,M,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=c,this.window=p,this.document=y,this.Js=T,this.Ys=M,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=q=>Promise.resolve(),!qy.C())throw new Ce(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xE(this,a),this.ii=t+"main",this.It=new wl(D),this.ri=new ws(this.ii,this.Xs,new FI(this.It)),this.Cs=new AI(this.referenceDelegate,this.It),this.remoteDocumentCache=MI(this.It),this.Ns=new TE,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===M&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,zy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Di(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Wu(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Of(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return fg(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=Ln(i,"clientMetadata");return a.W().next(c=>{const p=e.Ii(c,18e5),y=c.filter(D=>-1===p.indexOf(D));return re.forEach(y,D=>a.delete(D.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):Of(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,zy);return!1}}return!(!this.networkEnabled||!this.inForeground)||fg(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new rg(t,Di.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>fg(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Pf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fy(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return og.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){Me("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.Xs)?Ds:14===p?Mf:13===p?Ju:12===p?Xr:11===p?eh:void rt();var p;let y;return this.ri.runTransaction(e,a,c,D=>(y=new rg(D,this.Ss?this.Ss.next():Di.at),"readwrite-primary"===t?this.fi(y).next(T=>!!T||this.di(y)).next(T=>{if(!T)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ce(oe.FAILED_PRECONDITION,Uw);return i(y)}).next(T=>this.wi(y).next(()=>T)):this.Vi(y).next(()=>i(y)))).then(D=>(y.raiseOnCommittedEvent(),D))}Vi(e){return Of(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(oe.FAILED_PRECONDITION,zy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Of(e).put("owner",t)}static C(){return ws.C()}_i(e){const t=Of(e);return t.get("owner").next(i=>this.mi(i)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(nr(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Me("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return nr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Of(n){return Ln(n,"owner")}function fg(n){return Ln(n,"clientMetadata")}function Lf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Cl{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=Ot(),a=Ot();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Cl(e,t.fromCache,i,a)}}class VI{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,i)).next(c=>c||this.Mi(e,t))}ki(e,t){if(aI(t))return re.resolve(null);let i=bi(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=yf(t,null,"F"),i=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const p=Ot(...c);return this.Ni.getDocuments(e,p).next(y=>this.indexManager.getMinOffset(e,i).next(D=>{const T=this.Fi(t,y);return this.$i(t,T,p,D.readTime)?this.ki(e,yf(t,null,"F")):this.Bi(e,T,t,D)}))})))}Oi(e,t,i,a){return aI(t)||a.isEqual(wt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(c=>{const p=this.Fi(t,c);return this.$i(t,p,i,a)?this.Mi(e,t):(kp()<=Sr.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_f(t)),this.Bi(e,p,t,al(a,-1)))})}Fi(e,t){let i=new cn(Yw(e));return t.forEach((a,c)=>{lI(e,c)&&(i=i.add(c))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return kp()<=Sr.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",_f(t)),this.Ni.getDocumentsMatchingQuery(e,t,zi.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class BI{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new qn(At),this.qi=new Oa(c=>Bd(c),gf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function UI(n,e,t,i){return new BI(n,e,t,i)}function Ky(n,e){return pg.apply(this,arguments)}function pg(){return pg=(0,ge.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const p=[],y=[];let D=Ot();for(const T of a){p.push(T.batchId);for(const M of T.mutations)D=D.add(M.key)}for(const T of c){y.push(T.batchId);for(const M of T.mutations)D=D.add(M.key)}return t.localDocuments.getDocuments(i,D).next(T=>({ji:T,removedBatchIds:p,addedBatchIds:y}))})})}),pg.apply(this,arguments)}function gg(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(p,y,D,T){const M=D.batch,O=M.keys();let q=re.resolve();return O.forEach(X=>{q=q.next(()=>T.getEntry(y,X)).next(ce=>{const Le=D.docVersions.get(X);bt(null!==Le),ce.version.compareTo(Le)<0&&(M.applyToRemoteDocument(ce,D),ce.isValidDocument()&&(ce.setReadTime(D.commitVersion),T.addEntry(ce)))})}),q.next(()=>p.mutationQueue.removeMutationBatch(y,M))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let y=Ot();for(let D=0;D<p.mutationResults.length;++D)p.mutationResults[D].transformResults.length>0&&(y=y.add(p.batch.mutations[D].key));return y}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function jI(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $I(n,e){const t=Ze(n),i=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((M,O)=>{const q=a.get(O);if(!q)return;y.push(t.Cs.removeMatchingKeys(c,M.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(c,M.addedDocuments,O)));let X=q.withSequenceNumber(c.currentSequenceNumber);var ce,Le,Ve;e.targetMismatches.has(O)?X=X.withResumeToken(mr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):M.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(M.resumeToken,i)),a=a.insert(O,X),Le=X,Ve=M,(0===(ce=q).resumeToken.approximateByteSize()||Le.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,X))});let D=Ti(),T=Ot();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,M))}),y.push(Zy(c,p,e.documentUpdates).next(M=>{D=M.Wi,T=M.zi})),!i.isEqual(wt.min())){const M=t.Cs.getLastRemoteSnapshotVersion(c).next(O=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,i));y.push(M)}return re.waitFor(y).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,D,T)).next(()=>D)}).then(c=>(t.Ui=a,c))}function Zy(n,e,t){let i=Ot(),a=Ot();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let p=Ti();return t.forEach((y,D)=>{const T=c.get(y);D.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),D.isNoDocument()&&D.version.isEqual(wt.min())?(e.removeEntry(y,D.readTime),p=p.insert(y,D)):!T.isValidDocument()||D.version.compareTo(T.version)>0||0===D.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(D),p=p.insert(y,D)):Me("LocalStore","Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",D.version)}),{Wi:p,zi:a}})}function HI(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ga(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(c=>c?(a=c,re.resolve(a)):t.Cs.allocateTargetId(i).next(p=>(a=new Zi(e,p,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ui.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Sl(n,e,t){return mg.apply(this,arguments)}function mg(){return mg=(0,ge.Z)(function*(n,e,t){const i=Ze(n),a=i.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,p=>i.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Wu(p))throw p;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}i.Ui=i.Ui.remove(e),i.qi.delete(a.target)}),mg.apply(this,arguments)}function Ff(n,e,t){const i=Ze(n);let a=wt.min(),c=Ot();return i.persistence.runTransaction("Execute query","readonly",p=>function(y,D,T){const M=Ze(y),O=M.qi.get(T);return void 0!==O?re.resolve(M.Ui.get(O)):M.Cs.getTargetData(D,T)}(i,p,bi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(p,y.targetId).next(D=>{c=D})}).next(()=>i.Li.getDocumentsMatchingQuery(p,e,t?a:wt.min(),t?c:Ot())).next(y=>(Jy(i,Zw(e),y),{documents:y,Hi:c})))}function Yy(n,e){const t=Ze(n),i=Ze(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>i.se(c,e).next(p=>p?p.target:null))}function Qy(n,e){const t=Ze(n),i=t.Ki.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,al(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Jy(t,e,a),a))}function Jy(n,e,t){let i=n.Ki.get(e)||wt.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Ki.set(e,i)}function yg(){return yg=(0,ge.Z)(function*(n,e,t,i){const a=Ze(n);let c=Ot(),p=Ti();for(const T of t){const M=e.Ji(T.metadata.name);T.document&&(c=c.add(M));const O=e.Yi(T);O.setReadTime(e.Xi(T.metadata.readTime)),p=p.insert(M,O)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),D=yield Ga(a,(T=i,bi(jd(Wt.fromString(`__bundle__/docs/${T}`)))));var T;return a.persistence.runTransaction("Apply bundle documents","readwrite",T=>Zy(T,y,p).next(M=>(y.apply(T),M)).next(M=>a.Cs.removeMatchingKeysForTargetId(T,D.targetId).next(()=>a.Cs.addMatchingKeys(T,c,D.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(T,M.Wi,M.zi)).next(()=>M.Wi)))}),yg.apply(this,arguments)}function OE(n,e){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,ge.Z)(function*(n,e,t=Ot()){const i=yield Ga(n,bi(ig(e.bundledQuery))),a=Ze(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=Rr(e.readTime);if(i.snapshotVersion.compareTo(p)>=0)return a.Ns.saveNamedQuery(c,e);const y=i.withResumeToken(mr.EMPTY_BYTE_STRING,p);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,i.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,i.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),Xy.apply(this,arguments)}function WI(n,e){return`firestore_clients_${n}_${e}`}function zI(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function e_(n,e){return`firestore_targets_${n}_${e}`}class _g{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Zi(e,t,i){const a=JSON.parse(i);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new Ce(a.error.code,a.error.message))),p?new _g(e,t,a.state,c):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let a,c="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ce(i.error.code,i.error.message))),c?new Vf(e,i.state,a):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,c=wf();for(let p=0;a&&p<i.activeTargetIds.length;++p)a=Jv(i.activeTargetIds[p]),c=c.add(i.activeTargetIds[p]);return a?new vg(e,c):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class t_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new t_(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n_{constructor(){this.activeTargetIds=wf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r_{constructor(e,t,i,a,c){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new qn(At),this.started=!1,this.cr=[];const p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=WI(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new n_),this.lr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(WI(e.persistenceKey,a));if(c){const p=vg.Zi(a,c);p&&(e.ur=e.ur.insert(p.clientId,p))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const a=e.yr(i);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(e_(this.persistenceKey,e));if(i){const a=Vf.Zi(e,i);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(e_(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Er(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Me("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Vr(a,null)}{const a=t.Sr(i.key,i.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const a=t.Dr(i.key,i.newValue);if(a)return t.Cr(a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(i.key===t.wr){if(null!==i.newValue){const a=t.yr(i.newValue);if(a)return t.pr(a)}}else if(i.key===t.hr){const a=function(c){let p=Di.at;if(null!=c)try{const y=JSON.parse(c);bt("number"==typeof y),p=y}catch(y){nr("SharedClientState","Failed to read sequence number from WebStorage",y)}return p}(i.newValue);a!==Di.at&&t.sequenceNumberHandler(a)}else if(i.key===t.mr){const a=t.Or(i.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const a=new _g(this.currentUser,e,t,i),c=zI(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=zI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const a=e_(this.persistenceKey,e),c=new Vf(e,t,i);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return vg.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),a=Number(i[1]);return _g.Zi(new pr(void 0!==i[2]?i[2]:null),a,t)}Nr(e,t){const i=this._r.exec(e),a=Number(i[1]);return Vf.Zi(a,t)}yr(e){return t_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(i),p=[],y=[];return c.forEach(D=>{a.has(D)||p.push(D)}),a.forEach(D=>{c.has(D)||y.push(D)}),this.syncEngine.Br(p,y).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=wf();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class qI{constructor(){this.Lr=new n_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new n_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LE{qr(e){}shutdown(){}}class KI{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const FE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VE{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class BE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,c){const p=this.ho(e,t);Me("RestConnection","Sending: ",p,i);const y={};return this.lo(y,a,c),this.fo(e,p,y,i).then(D=>(Me("RestConnection","Received: ",D),D),D=>{throw Hu("RestConnection",`${e} failed with error: `,D,"url: ",p,"request:",i),D})}_o(e,t,i,a,c,p){return this.ao(e,t,i,a,c)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ca,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${FE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((c,p)=>{const y=new Rp;y.setWithCredentials(!0),y.listenOnce(jv.COMPLETE,()=>{var T;try{switch(y.getLastErrorCode()){case lf.NO_ERROR:const M=y.getResponseJson();Me("Connection","XHR received:",JSON.stringify(M)),c(M);break;case lf.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),p(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const O=y.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',O,"response text:",y.getResponseText()),O>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const X=null===(T=q)||void 0===T?void 0:T.error;if(X&&X.status&&X.message){const ce=function(Le){const Ve=Le.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Ve)>=0?Ve:oe.UNKNOWN}(X.status);p(new Ce(ce,X.message))}else p(new Ce(oe.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const D=JSON.stringify(a);y.send(t,"POST",D,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=gb(),p=Rw(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new kw({})),this.lo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const D=a.join("");Me("Connection","Creating WebChannel: "+D,y);const T=c.createWebChannel(D,y);let M=!1,O=!1;const q=new VE({Hr:ce=>{O?Me("Connection","Not sending because WebChannel is closed:",ce):(M||(Me("Connection","Opening WebChannel transport."),T.open(),M=!0),Me("Connection","WebChannel sending:",ce),T.send(ce))},Jr:()=>T.close()}),X=(ce,Le,Ve)=>{ce.listen(Le,Mt=>{try{Ve(Mt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return X(T,Rd.EventType.OPEN,()=>{O||Me("Connection","WebChannel transport opened.")}),X(T,Rd.EventType.CLOSE,()=>{O||(O=!0,Me("Connection","WebChannel transport closed"),q.io())}),X(T,Rd.EventType.ERROR,ce=>{O||(O=!0,Hu("Connection","WebChannel transport errored:",ce),q.io(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),X(T,Rd.EventType.MESSAGE,ce=>{var Le;if(!O){const Ve=ce.data[0];bt(!!Ve);const Mt=Ve,Bt=Mt.error||(null===(Le=Mt[0])||void 0===Le?void 0:Le.error);if(Bt){Me("Connection","WebChannel received error:",Bt);const Lt=Bt.status;let kt=function(Ut){const Wr=wr[Ut];if(void 0!==Wr)return hI(Wr)}(Lt),Nt=Bt.message;void 0===kt&&(kt=oe.INTERNAL,Nt="Unknown error status: "+Lt+" with message "+Bt.message),O=!0,q.io(new Ce(kt,Nt)),T.close()}else Me("Connection","WebChannel received:",Ve),q.ro(Ve)}}),X(p,$v.STAT_EVENT,ce=>{ce.stat===$u.PROXY?Me("Connection","Detected buffering proxy"):ce.stat===$u.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.so()},0),q}}function ZI(){return typeof window<"u"?window:null}function Bf(){return typeof document<"u"?document:null}function oh(n){return new bb(n,!0)}class Ig{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&Me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class i_{constructor(e,t,i,a,c,p,y,D){this.Hs=e,this.vo=i,this.Vo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=D,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ig(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,ge.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.So===t&&this.Go(i,a)},i=>{e(()=>{const a=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(a)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.Qo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YI extends i_{constructor(e,t,i,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,p),this.It=c}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function wI(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:rt(),a=e.targetChange.targetIds||[],c=function(D,T){return D.gt?(bt(void 0===T||"string"==typeof T),mr.fromBase64String(T||"")):(bt(void 0===T||T instanceof Uint8Array),mr.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&function(D){const T=void 0===D.code?oe.UNKNOWN:hI(D.code);return new Ce(T,D.message||"")}(p);t=new by(i,a,c,y||null)}else if("documentChange"in e){const i=e.documentChange,a=Ki(n,i.document.name),c=Rr(i.document.updateTime),p=new Nr({mapValue:{fields:i.document.fields}}),y=En.newFoundDocument(a,c,p);t=new Zp(i.targetIds||[],i.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const i=e.documentDelete,a=Ki(n,i.document),c=i.readTime?Rr(i.readTime):wt.min(),p=En.newNoDocument(a,c);t=new Zp([],i.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const i=e.documentRemove,a=Ki(n,i.document);t=new Zp([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return rt();{const i=e.filter,c=new nE(i.count||0);t=new yI(i.targetId,c)}}var D;return t}(this.It,e),i=function(a){if(!("targetChange"in a))return wt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?wt.min():c.readTime?Rr(c.readTime):wt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=Qp(this.It),t.addTarget=function(a,c){let p;const y=c.target;return p=mf(y)?{documents:Af(a,y)}:{query:Qd(a,y)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?p.resumeToken=_I(a,c.resumeToken):c.snapshotVersion.compareTo(wt.min())>0&&(p.readTime=Zd(a,c.snapshotVersion.toTimestamp())),p}(this.It,e);const i=function lE(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=Qp(this.It),t.removeTarget=e,this.Bo(t)}}class QI extends i_{constructor(e,t,i,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,p),this.It=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Fa(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(i,a){let c=Rr(i.updateTime?i.updateTime:a);return c.isEqual(wt.min())&&(c=Rr(a)),new tE(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Rr(e.commitTime);return this.listener.Zo(i,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Qp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Yd(this.It,i))};this.Bo(t)}}class JI extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.It=a,this.nu=!1}su(){if(this.nu)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ao(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(oe.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection._o(e,t,i,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(oe.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class e0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(nr(t),this.ou=!1):Me("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class t0{constructor(e,t,i,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.qr(y=>{i.enqueueAndForget((0,ge.Z)(function*(){var D;lt(p)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,ge.Z)(function*(T){const M=Ze(T);M._u.add(4),yield ah(M),M.gu.set("Unknown"),M._u.delete(4),yield to(M)}),function(T){return D.apply(this,arguments)})(p))}))}),this.gu=new e0(i,a)}}function to(n){return s_.apply(this,arguments)}function s_(){return s_=(0,ge.Z)(function*(n){if(lt(n))for(const e of n.wu)yield e(!0)}),s_.apply(this,arguments)}function ah(n){return ac.apply(this,arguments)}function ac(){return ac=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ac.apply(this,arguments)}function o_(n,e){const t=Ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),r0(t)?Eg(t):Bo(t).ko()&&n0(t,e))}function Al(n,e){const t=Ze(n),i=Bo(t);t.du.delete(e),i.ko()&&a_(t,e),0===t.du.size&&(i.ko()?i.Fo():lt(t)&&t.gu.set("Unknown"))}function n0(n,e){n.yu.Mt(e.targetId),Bo(n).zo(e)}function a_(n,e){n.yu.Mt(e),Bo(n).Ho(e)}function Eg(n){n.yu=new sE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Bo(n).start(),n.gu.uu()}function r0(n){return lt(n)&&!Bo(n).No()&&n.du.size>0}function lt(n){return 0===Ze(n)._u.size}function s0(n){n.yu=void 0}function UE(n){return u_.apply(this,arguments)}function u_(){return u_=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{n0(n,e)})}),u_.apply(this,arguments)}function uh(n,e){return c_.apply(this,arguments)}function c_(){return c_=(0,ge.Z)(function*(n,e){s0(n),r0(n)?(n.gu.hu(e),Eg(n)):n.gu.set("Unknown")}),c_.apply(this,arguments)}function Dg(n,e,t){return ch.apply(this,arguments)}function ch(){return ch=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof by&&2===e.state&&e.cause)try{yield(i=(0,ge.Z)(function*(a,c){const p=c.cause;for(const y of c.targetIds)a.du.has(y)&&(yield a.remoteSyncer.rejectListen(y,p),a.du.delete(y),a.yu.removeTarget(y))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield bn(n,i)}else if(e instanceof Zp?n.yu.Gt(e):e instanceof yI?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(wt.min()))try{const i=yield jI(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const p=a.yu.te(c);return p.targetChanges.forEach((y,D)=>{if(y.resumeToken.approximateByteSize()>0){const T=a.du.get(D);T&&a.du.set(D,T.withResumeToken(y.resumeToken,c))}}),p.targetMismatches.forEach(y=>{const D=a.du.get(y);if(!D)return;a.du.set(y,D.withResumeToken(mr.EMPTY_BYTE_STRING,D.snapshotVersion)),a_(a,y);const T=new Zi(D.target,y,1,D.sequenceNumber);n0(a,T)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(i){Me("RemoteStore","Failed to raise snapshot:",i),yield bn(n,i)}var i}),ch.apply(this,arguments)}function bn(n,e,t){return o0.apply(this,arguments)}function o0(){return o0=(0,ge.Z)(function*(n,e,t){if(!Wu(e))throw e;n._u.add(1),yield ah(n),n.gu.set("Offline"),t||(t=()=>jI(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield to(n)}))}),o0.apply(this,arguments)}function l_(n,e){return e().catch(t=>bn(n,t,e))}function xl(n){return d_.apply(this,arguments)}function d_(){return d_=(0,ge.Z)(function*(n){const e=Ze(n),t=bs(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;a0(e);)try{const a=yield HI(e.localStore,i);if(null===a){0===e.fu.length&&t.Fo();break}i=a.batchId,u0(e,a)}catch(a){yield bn(e,a)}h_(e)&&f_(e)}),d_.apply(this,arguments)}function a0(n){return lt(n)&&n.fu.length<10}function u0(n,e){n.fu.push(e);const t=bs(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function h_(n){return lt(n)&&!bs(n).No()&&n.fu.length>0}function f_(n){bs(n).start()}function jE(n){return p_.apply(this,arguments)}function p_(){return p_=(0,ge.Z)(function*(n){bs(n).eu()}),p_.apply(this,arguments)}function $E(n){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,ge.Z)(function*(n){const e=bs(n);for(const t of n.fu)e.Xo(t.mutations)}),Ml.apply(this,arguments)}function HE(n,e,t){return g_.apply(this,arguments)}function g_(){return g_=(0,ge.Z)(function*(n,e,t){const i=n.fu.shift(),a=ec.from(i,e,t);yield l_(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield xl(n)}),g_.apply(this,arguments)}function GE(n,e){return lh.apply(this,arguments)}function lh(){return lh=(0,ge.Z)(function*(n,e){var t;e&&bs(n).Yo&&(yield(t=(0,ge.Z)(function*(i,a){if(Dy(c=a.code)&&c!==oe.ABORTED){const p=i.fu.shift();bs(i).Mo(),yield l_(i,()=>i.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield xl(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),h_(n)&&f_(n)}),lh.apply(this,arguments)}function m_(n,e){return bg.apply(this,arguments)}function bg(){return bg=(0,ge.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const i=lt(t);t._u.add(3),yield ah(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield to(t)}),bg.apply(this,arguments)}function Tg(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,ge.Z)(function*(n,e){const t=Ze(n);e?(t._u.delete(2),yield to(t)):e||(t._u.add(2),yield ah(t),t.gu.set("Unknown"))}),y_.apply(this,arguments)}function Bo(n){return n.pu||(n.pu=function(e,t,i){const a=Ze(e);return a.su(),new YI(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:UE.bind(null,n),Zr:uh.bind(null,n),Wo:Dg.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),r0(n)?Eg(n):n.gu.set("Unknown")):(yield n.pu.stop(),s0(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function bs(n){return n.Iu||(n.Iu=function(e,t,i){const a=Ze(e);return a.su(),new QI(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:jE.bind(null,n),Zr:GE.bind(null,n),tu:$E.bind(null,n),Zo:HE.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield xl(n)):(yield n.Iu.stop(),n.fu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class __{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,i,a,c){const p=Date.now()+i,y=new __(e,t,p,a,c);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(n,e){if(nr("AsyncQueue",`${e}: ${n}`),Wu(n))return new Ce(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class hh{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ue.comparator(t.key,i.key):(t,i)=>Ue.comparator(t.key,i.key),this.keyedMap=qd(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new hh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new hh;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class v_{constructor(){this.Tu=new qn(Ue.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Nl{constructor(e,t,i,a,c,p,y,D,T){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=D,this.hasCachedResults=T}static fromInitialDocuments(e,t,i,a,c){const p=[];return t.forEach(y=>{p.push({type:0,doc:y})}),new Nl(e,t,hh.emptySet(t),p,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class c0{constructor(){this.Au=void 0,this.listeners=[]}}class WE{constructor(){this.queries=new Oa(e=>cI(e),Hd),this.onlineState="Unknown",this.Ru=new Set}}function Cg(n,e){return I_.apply(this,arguments)}function I_(){return I_=(0,ge.Z)(function*(n,e){const t=Ze(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new c0),a)try{c.Au=yield t.onListen(i)}catch(p){const y=dh(p,`Initialization of query '${_f(e.query)}' failed`);return void e.onError(y)}t.queries.set(i,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&d0(t)}),I_.apply(this,arguments)}function w_(n,e){return l0.apply(this,arguments)}function l0(){return l0=(0,ge.Z)(function*(n,e){const t=Ze(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),l0.apply(this,arguments)}function Sb(n,e){const t=Ze(n);let i=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const y of p.listeners)y.Pu(a)&&(i=!0);p.Au=a}}i&&d0(t)}function Ab(n,e,t){const i=Ze(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function d0(n){n.Ru.forEach(e=>{e.next()})}class Sg{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new Nl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Ag{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class h0{constructor(e){this.It=e}Ji(e){return Ki(this.It,e)}Yi(e){return e.metadata.exists?Cy(this.It,e.document,!1):En.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Rr(e)}}class zE{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=E_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Wt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new h0(this.It);for(const a of e)if(a.metadata.queries){const c=i.Ji(a.metadata.name);for(const p of a.metadata.queries){const y=(t.get(p)||Ot()).add(c);t.set(p,y)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function GI(n,e,t,i){return yg.apply(this,arguments)}(e.localStore,new h0(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const a of e.queries)yield OE(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function E_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fh{constructor(e){this.key=e}}class f0{constructor(e){this.key=e}}class p0{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ot(),this.mutatedKeys=Ot(),this.Gu=Yw(e),this.Qu=new hh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new v_,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const D="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,T="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const q=a.get(M),X=lI(this.query,O)?O:null,ce=!!q&&this.mutatedKeys.has(q.key),Le=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ve=!1;q&&X?q.data.isEqual(X.data)?ce!==Le&&(i.track({type:3,doc:X}),Ve=!0):this.Hu(q,X)||(i.track({type:2,doc:X}),Ve=!0,(D&&this.Gu(X,D)>0||T&&this.Gu(X,T)<0)&&(y=!0)):!q&&X?(i.track({type:0,doc:X}),Ve=!0):q&&!X&&(i.track({type:1,doc:q}),Ve=!0,(D||T)&&(y=!0)),Ve&&(X?(p=p.add(X),c=Le?c.add(M):c.delete(M)):(p=p.delete(M),c=c.delete(M)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const M="F"===this.query.limitType?p.last():p.first();p=p.delete(M.key),c=c.delete(M.key),i.track({type:1,doc:M})}return{Qu:p,zu:i,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Eu();c.sort((T,M)=>function(O,q){const X=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return X(O)-X(q)}(T.type,M.type)||this.Gu(T.doc,M.doc)),this.Ju(i);const p=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,D=y!==this.qu;return this.qu=y,0!==c.length||D?{snapshot:new Nl(this.query,e.Qu,a,c,e.mutatedKeys,0===y,D,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:p}:{Xu:p}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new v_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ot(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new f0(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new fh(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ot();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Nl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class qE{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KE{constructor(e){this.key=e,this.nc=!1}}class ZE{constructor(e,t,i,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.sc={},this.ic=new Oa(y=>cI(y),Hd),this.rc=new Map,this.oc=new Set,this.uc=new qn(Ue.comparator),this.cc=new Map,this.ac=new OI,this.hc={},this.lc=new Map,this.fc=sc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function g0(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,ge.Z)(function*(n,e){const t=B_(n);let i,a;const c=t.ic.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.ec();else{const p=yield Ga(t.localStore,bi(e));t.isPrimaryClient&&o_(t.remoteStore,p);const y=t.sharedClientState.addLocalQueryTarget(p.targetId);i=p.targetId,a=yield b_(t,e,i,"current"===y,p.resumeToken)}return a}),D_.apply(this,arguments)}function b_(n,e,t,i,a){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,ge.Z)(function*(n,e,t,i,a){n._c=(O,q,X)=>{return(ce=(0,ge.Z)(function*(Le,Ve,Mt,Bt){let Lt=Ve.view.Wu(Mt);Lt.$i&&(Lt=yield Ff(Le.localStore,Ve.query,!1).then(({documents:Ut})=>Ve.view.Wu(Ut,Lt)));const kt=Bt&&Bt.targetChanges.get(Ve.targetId),Nt=Ve.view.applyChanges(Lt,Le.isPrimaryClient,kt);return x_(Le,Ve.targetId,Nt.Xu),Nt.snapshot}),function(Le,Ve,Mt,Bt){return ce.apply(this,arguments)})(n,O,q,X);var ce};const c=yield Ff(n.localStore,e,!0),p=new p0(e,c.Hi),y=p.Wu(c.documents),D=Kd.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),T=p.applyChanges(y,n.isPrimaryClient,D);x_(n,t,T.Xu);const M=new qE(e,t,p);return n.ic.set(e,M),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),T.snapshot}),Rl.apply(this,arguments)}function YE(n,e){return xg.apply(this,arguments)}function xg(){return xg=(0,ge.Z)(function*(n,e){const t=Ze(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(c=>!Hd(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Sl(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Al(t.remoteStore,i.targetId),ph(t,i.targetId)}).catch(Sa))):(ph(t,i.targetId),yield Sl(t.localStore,i.targetId,!0))}),xg.apply(this,arguments)}function Mg(){return Mg=(0,ge.Z)(function*(n,e,t){const i=U_(n);try{const a=yield function(c,p){const y=Ze(c),D=wn.now(),T=p.reduce((q,X)=>q.add(X.key),Ot());let M,O;return y.persistence.runTransaction("Locally write mutations","readwrite",q=>{let X=Ti(),ce=Ot();return y.Gi.getEntries(q,T).next(Le=>{X=Le,X.forEach((Ve,Mt)=>{Mt.isValidDocument()||(ce=ce.add(Ve))})}).next(()=>y.localDocuments.getOverlayedDocuments(q,X)).next(Le=>{M=Le;const Ve=[];for(const Mt of p){const Bt=zd(Mt,M.get(Mt.key).overlayedDocument);null!=Bt&&Ve.push(new Oo(Mt.key,Bt,Up(Bt.value.mapValue),Dn.exists(!0)))}return y.mutationQueue.addMutationBatch(q,D,Ve,p)}).next(Le=>{O=Le;const Ve=Le.applyToLocalDocumentSet(M,ce);return y.documentOverlayCache.saveOverlays(q,Le.batchId,Ve)})}).then(()=>({batchId:O.batchId,changes:pI(M)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,p,y){let D=c.hc[c.currentUser.toKey()];D||(D=new qn(At)),D=D.insert(p,y),c.hc[c.currentUser.toKey()]=D}(i,a.batchId,t),yield Wa(i,a.changes),yield xl(i.remoteStore)}catch(a){const c=dh(a,"Failed to persist write");t.reject(c)}}),Mg.apply(this,arguments)}function m0(n,e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,ge.Z)(function*(n,e){const t=Ze(n);try{const i=yield $I(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.cc.get(c);p&&(bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.nc=!0:a.modifiedDocuments.size>0?bt(p.nc):a.removedDocuments.size>0&&(bt(p.nc),p.nc=!1))}),yield Wa(t,i,e)}catch(i){yield Sa(i)}}),Ng.apply(this,arguments)}function y0(n,e,t){const i=Ze(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((c,p)=>{const y=p.view.bu(e);y.snapshot&&a.push(y.snapshot)}),function(c,p){const y=Ze(c);y.onlineState=p;let D=!1;y.queries.forEach((T,M)=>{for(const O of M.listeners)O.bu(p)&&(D=!0)}),D&&d0(y)}(i.eventManager,e),a.length&&i.sc.Wo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function T_(n,e,t){return C_.apply(this,arguments)}function C_(){return C_=(0,ge.Z)(function*(n,e,t){const i=Ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),c=a&&a.key;if(c){let p=new qn(Ue.comparator);p=p.insert(c,En.newNoDocument(c,wt.min()));const y=Ot().add(c),D=new Ef(wt.min(),new Map,new cn(At),p,y);yield m0(i,D),i.uc=i.uc.remove(c),i.cc.delete(e),M_(i)}else yield Sl(i.localStore,e,!1).then(()=>ph(i,e,t)).catch(Sa)}),C_.apply(this,arguments)}function _0(n,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ge.Z)(function*(n,e){const t=Ze(n),i=e.batch.batchId;try{const a=yield gg(t.localStore,e);kg(t,i,null),A_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Wa(t,a)}catch(a){yield Sa(a)}}),Rg.apply(this,arguments)}function JE(n,e,t){return S_.apply(this,arguments)}function S_(){return S_=(0,ge.Z)(function*(n,e,t){const i=Ze(n);try{const a=yield function(c,p){const y=Ze(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let T;return y.mutationQueue.lookupMutationBatch(D,p).next(M=>(bt(null!==M),T=M.keys(),y.mutationQueue.removeMutationBatch(D,M))).next(()=>y.mutationQueue.performConsistencyCheck(D)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(D,T,p)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,T)).next(()=>y.localDocuments.getDocuments(D,T))})}(i.localStore,e);kg(i,e,t),A_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Wa(i,a)}catch(a){yield Sa(a)}}),S_.apply(this,arguments)}function Uf(){return Uf=(0,ge.Z)(function*(n,e){const t=Ze(n);lt(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(c){const p=Ze(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>p.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===i)return void e.resolve();const a=t.lc.get(i)||[];a.push(e),t.lc.set(i,a)}catch(i){const a=dh(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Uf.apply(this,arguments)}function A_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function kg(n,e,t){const i=Ze(n);let a=i.hc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function ph(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||v0(n,i)})}function v0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Al(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),M_(n))}function x_(n,e,t){for(const i of t)i instanceof fh?(n.ac.addReference(i.key,e),eD(n,i)):i instanceof f0?(Me("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||v0(n,i.key)):rt()}function eD(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Me("SyncEngine","New document in limbo: "+t),n.oc.add(i),M_(n))}function M_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ue(Wt.fromString(e)),i=n.fc.next();n.cc.set(i,new KE(t)),n.uc=n.uc.insert(t,i),o_(n.remoteStore,new Zi(bi(jd(t.path)),i,2,Di.at))}}function Wa(n,e,t){return N_.apply(this,arguments)}function N_(){return N_=(0,ge.Z)(function*(n,e,t){const i=Ze(n),a=[],c=[],p=[];var y;i.ic.isEmpty()||(i.ic.forEach((y,D)=>{p.push(i._c(D,e,t).then(T=>{if((T||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(D.targetId,T?.fromCache?"not-current":"current"),T){a.push(T);const M=Cl.Ci(D.targetId,T);c.push(M)}}))}),yield Promise.all(p),i.sc.Wo(a),yield(y=(0,ge.Z)(function*(D,T){const M=Ze(D);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>re.forEach(T,q=>re.forEach(q.Si,X=>M.persistence.referenceDelegate.addReference(O,q.targetId,X)).next(()=>re.forEach(q.Di,X=>M.persistence.referenceDelegate.removeReference(O,q.targetId,X)))))}catch(O){if(!Wu(O))throw O;Me("LocalStore","Failed to update sequence numbers: "+O)}for(const O of T){const q=O.targetId;if(!O.fromCache){const X=M.Ui.get(q),Le=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);M.Ui=M.Ui.insert(q,Le)}}}),function(D,T){return y.apply(this,arguments)})(i.localStore,c))}),N_.apply(this,arguments)}function tD(n,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ge.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const i=yield Ky(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(p=>{p.forEach(y=>{y.reject(new Ce(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Wa(t,i.ji)}var a}),Pg.apply(this,arguments)}function I0(n,e){const t=Ze(n),i=t.cc.get(e);if(i&&i.nc)return Ot().add(i.key);{let a=Ot();const c=t.rc.get(e);if(!c)return a;for(const p of c){const y=t.ic.get(p);a=a.unionWith(y.view.ju)}return a}}function nD(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,ge.Z)(function*(n,e){const t=Ze(n),i=yield Ff(t.localStore,e.query,!0),a=e.view.tc(i);return t.isPrimaryClient&&x_(t,e.targetId,a.Xu),a}),R_.apply(this,arguments)}function w0(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,ge.Z)(function*(n,e){const t=Ze(n);return Qy(t.localStore,e).then(i=>Wa(t,i))}),k_.apply(this,arguments)}function rD(n,e,t,i){return P_.apply(this,arguments)}function P_(){return P_=(0,ge.Z)(function*(n,e,t,i){const a=Ze(n),c=yield function(p,y){const D=Ze(p),T=Ze(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",M=>T.Tn(M,y).next(O=>O?D.localDocuments.getDocuments(M,O):re.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield xl(a.remoteStore):"acknowledged"===t||"rejected"===t?(kg(a,e,i||null),A_(a,e),y=e,Ze(Ze(a.localStore).mutationQueue).An(y)):rt(),yield Wa(a,c)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),P_.apply(this,arguments)}function jf(){return jf=(0,ge.Z)(function*(n,e){const t=Ze(n);if(B_(t),U_(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield L_(t,i.toArray());t.dc=!0,yield Tg(t.remoteStore,!0);for(const c of a)o_(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const i=[];let a=Promise.resolve();t.rc.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?i.push(p):a=a.then(()=>(ph(t,p),Sl(t.localStore,p,!0))),Al(t.remoteStore,p)}),yield a,yield L_(t,i),function(c){const p=Ze(c);p.cc.forEach((y,D)=>{Al(p.remoteStore,D)}),p.ac.fs(),p.cc=new Map,p.uc=new qn(Ue.comparator)}(t),t.dc=!1,yield Tg(t.remoteStore,!1)}}),jf.apply(this,arguments)}function L_(n,e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,ge.Z)(function*(n,e,t){const i=Ze(n),a=[],c=[];for(const p of e){let y;const D=i.rc.get(p);if(D&&0!==D.length){y=yield Ga(i.localStore,bi(D[0]));for(const T of D){const M=i.ic.get(T),O=yield nD(i,M);O.snapshot&&c.push(O.snapshot)}}else{const T=yield Yy(i.localStore,p);y=yield Ga(i.localStore,T),yield b_(i,E0(T),p,!1,y.resumeToken)}a.push(y)}return i.sc.Wo(c),a}),$f.apply(this,arguments)}function E0(n){return oI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iD(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).vi()}function F_(n,e,t,i){return V_.apply(this,arguments)}function V_(){return V_=(0,ge.Z)(function*(n,e,t,i){const a=Ze(n);if(a.dc)return void Me("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield Qy(a.localStore,Zw(c[0])),y=Ef.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,mr.EMPTY_BYTE_STRING);yield Wa(a,p,y);break}case"rejected":yield Sl(a.localStore,e,!0),ph(a,e,i);break;default:rt()}}),V_.apply(this,arguments)}function sD(n,e,t){return uc.apply(this,arguments)}function uc(){return uc=(0,ge.Z)(function*(n,e,t){const i=B_(n);if(i.dc){for(const a of e){if(i.rc.has(a)){Me("SyncEngine","Adding an already active target "+a);continue}const c=yield Yy(i.localStore,a),p=yield Ga(i.localStore,c);yield b_(i,E0(c),p.targetId,!1,p.resumeToken),o_(i.remoteStore,p)}for(const a of t)i.rc.has(a)&&(yield Sl(i.localStore,a,!1).then(()=>{Al(i.remoteStore,a),ph(i,a)}).catch(Sa))}}),uc.apply(this,arguments)}function B_(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=m0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T_.bind(null,e),e.sc.Wo=Sb.bind(null,e.eventManager),e.sc.wc=Ab.bind(null,e.eventManager),e}function U_(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JE.bind(null,e),e}class j_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=oh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return UI(this.persistence,new VI,e.initialUser,this.It)}yc(e){return new Xs(Ai.Bs,this.It)}gc(e){return new qI}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Og extends j_{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield U_(i.Ac.syncEngine),yield xl(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return UI(this.persistence,new VI,e.initialUser,this.It)}Tc(e,t){return new AE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new Ww(t,this.persistence);return new Gw(e.asyncQueue,i)}yc(e){const t=Lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new qy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,ZI(),Bf(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new qI}}class oD extends Og{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e);const a=i.Ac.syncEngine;i.sharedClientState instanceof r_&&(i.sharedClientState.syncEngine={Fr:rD.bind(null,a),$r:F_.bind(null,a),Br:sD.bind(null,a),vi:iD.bind(null,a),Mr:w0.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var c=(0,ge.Z)(function*(p){yield function O_(n,e){return jf.apply(this,arguments)}(i.Ac.syncEngine,p),i.gcScheduler&&(p&&!i.gcScheduler.started?i.gcScheduler.start():p||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(p&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():p||i.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}gc(e){const t=ZI();if(!r_.C(t))throw new Ce(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new r_(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Lg{initialize(e,t){var i=this;return(0,ge.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>y0(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,i.syncEngine),yield Tg(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WE}createDatastore(e){const t=oh(e.databaseInfo.databaseId),i=new BE(e.databaseInfo);return new JI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=y=>y0(this.syncEngine,y,0),p=KI.C()?new KI:new LE,new t0(t,i,a,c,p);var t,i,a,c,p}createSyncEngine(e,t){return function(i,a,c,p,y,D,T){const M=new ZE(i,a,c,p,y,D);return T&&(M.dc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const i=Ze(t);Me("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield ah(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $_(n,e,t){if(!t)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function D0(n,e,t,i){if(!0===e&&!0===i)throw new Ce(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fg(n){if(!Ue.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H_(n){if(Ue.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(n);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function G_(n,e){if(e<=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const b0=new Map;class T0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,D0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Wv;switch(t.type){case"gapi":return new Lw(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=b0.get(e);t&&(Me("ComponentProvider","Removing Datastore"),b0.delete(e),t.terminate())}(this),Promise.resolve()}}class pn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new no(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class di{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class no extends di{constructor(e,t,i){super(e,t,jd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ue(e))}withConverter(e){return new no(this.firestore,e,this._path)}}function S0(n,e,...t){if(n=(0,Vt.m9)(n),$_("collection","path",e),n instanceof Gf){const i=Wt.fromString(e,...t);return H_(i),new no(n,null,i)}{if(!(n instanceof pn||n instanceof no))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wt.fromString(e,...t));return H_(i),new no(n.firestore,null,i)}}function W_(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=ty.R()),$_("doc","path",e),n instanceof Gf){const i=Wt.fromString(e,...t);return Fg(i),new pn(n,null,new Ue(i))}{if(!(n instanceof pn||n instanceof no))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Wt.fromString(e,...t));return Fg(i),new pn(n.firestore,n instanceof no?n.converter:null,new Ue(i))}}function uD(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof pn||n instanceof no)&&(e instanceof pn||e instanceof no)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function z_(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof di&&e instanceof di&&n.firestore===e.firestore&&Hd(n._query,e._query)&&n.converter===e.converter}function A0(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cD{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new gr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),a=Number(i);isNaN(a)&&e.Dc(`length string (${i}) is not valid number`);const c=yield e.Cc(a);return new Ag(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class hD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,ge.Z)(function*(c,p){const y=Ze(c),D=Qp(y.It)+"/documents",T={documents:p.map(X=>bf(y.It,X))},M=yield y._o("BatchGetDocuments",D,T,p.length),O=new Map;M.forEach(X=>{const ce=function II(n,e){return"found"in e?function(t,i){bt(!!i.found);const a=Ki(t,i.found.name),c=Rr(i.found.updateTime),p=new Nr({mapValue:{fields:i.found.fields}});return En.newFoundDocument(a,c,p)}(n,e):"missing"in e?function(t,i){bt(!!i.missing),bt(!!i.readTime);const a=Ki(t,i.missing),c=Rr(i.readTime);return En.newNoDocument(a,c)}(n,e):rt()}(y.It,X);O.set(ce.key.toString(),ce)});const q=[];return p.forEach(X=>{const ce=O.get(X.toString());bt(!!ce),q.push(ce)}),q}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new _l(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const c=Ue.fromPath(a);e.mutations.push(new If(c,e.precondition(c)))}),yield(i=(0,ge.Z)(function*(a,c){const p=Ze(a),y=Qp(p.It)+"/documents",D={writes:c.map(T=>Yd(p.It,T))};yield p.ao("Commit",y,D)}),function(a,c){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=wt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ce(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?Dn.exists(!1):Dn.updateTime(t):Dn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Ce(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dn.updateTime(t)}return Dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fD{constructor(e,t,i,a,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=c,this.kc=i.maxAttempts,this.xo=new Ig(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new hD(e.datastore),i=e.Mc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!dl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Dy(t)}return!1}}class pD{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=pr.UNAUTHENTICATED,this.clientId=ty.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var p=(0,ge.Z)(function*(y){Me("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(i,p=>(Me("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=dh(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function x0(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(c){i.isEqual(c)||(yield Ky(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),q_.apply(this,arguments)}function gh(n,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ug(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>m_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>m_(e.remoteStore,c)),n.onlineComponents=e}),Bg.apply(this,arguments)}function Ug(n){return jg.apply(this,arguments)}function jg(){return jg=(0,ge.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield x0(n,new j_)),n.offlineComponents}),jg.apply(this,arguments)}function Wf(n){return $g.apply(this,arguments)}function $g(){return $g=(0,ge.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield gh(n,new Lg)),n.onlineComponents}),$g.apply(this,arguments)}function M0(n){return Ug(n).then(e=>e.persistence)}function Hg(n){return Ug(n).then(e=>e.localStore)}function N0(n){return Wf(n).then(e=>e.remoteStore)}function K_(n){return Wf(n).then(e=>e.syncEngine)}function mh(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,ge.Z)(function*(n){const e=yield Wf(n),t=e.eventManager;return t.onListen=g0.bind(null,e.syncEngine),t.onUnlisten=YE.bind(null,e.syncEngine),t}),Z_.apply(this,arguments)}function Gg(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,p,y,D){const T=new Vg({next:O=>{c.enqueueAndForget(()=>w_(a,M));const q=O.docs.has(p);!q&&O.fromCache?D.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&O.fromCache&&y&&"server"===y.source?D.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(O)},error:O=>D.reject(O)}),M=new Sg(jd(p.path),T,{includeMetadataChanges:!0,Nu:!0});return Cg(a,M)}(yield mh(n),n.asyncQueue,e,t,i)})),i.promise}function k0(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,p,y,D){const T=new Vg({next:O=>{c.enqueueAndForget(()=>w_(a,M)),O.fromCache&&"server"===y.source?D.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(O)},error:O=>D.reject(O)}),M=new Sg(p,T,{includeMetadataChanges:!0,Nu:!0});return Cg(a,M)}(yield mh(n),n.asyncQueue,e,t,i)})),i.promise}class _D{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ig(this,"async_queue_retry"),this.Wc=()=>{const t=Bf();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Bf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Bf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new gr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Wu(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,nr("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=__.createAndSchedule(this,e,t,i,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Q_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class Wg{constructor(){this._progressObserver={},this._taskCompletionResolver=new gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Tn extends Gf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new _D,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||qg(this),this._firestoreClient.terminate()}}function Yn(n){return n._firestoreClient||qg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function qg(n){var e;const t=n._freezeSettings(),i=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ll(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new pD(n._authCredentials,n._appCheckCredentials,n._queue,i)}function O0(n,e,t){const i=new gr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield x0(n,t),yield gh(n,e),i.resolve()}catch(a){const c=a;if(!("FirebaseError"===(p=c).name?p.code===oe.FAILED_PRECONDITION||p.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;Hu("Error enabling offline persistence. Falling back to persistence disabled: "+c),i.reject(c)}var p})).then(()=>i.promise)}function V0(n){if(n._initialized||n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(mr.fromBase64String(e))}catch(t){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ka{constructor(e){this._methodName=e}}class Kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const DD=/^__.*__$/;class bD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pa(e,this.data,t,this.fieldTransforms)}}class B0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Oo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function U0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class Kf{constructor(e,t,i,a,c,p){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Kf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Xg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(U0(this.sa)&&DD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class j0{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||oh(e)}da(e,t,i,a=!1){return new Kf({sa:e,methodName:t,fa:i,path:An.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kl(n){const e=n._freezeSettings(),t=oh(n._databaseId);return new j0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zf(n,e,t,i,a,c={}){const p=n.da(c.merge||c.mergeFields?2:0,e,t,a);nv("Data must be an object, but it was:",p,i);const y=H0(i,p);let D,T;if(c.merge)D=new qi(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const M=[];for(const O of c.mergeFields){const q=Qg(e,O,t);if(!p.contains(q))throw new Ce(oe.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);em(M,q)||M.push(q)}D=new qi(M),T=p.fieldTransforms.filter(O=>D.covers(O.field))}else D=null,T=p.fieldTransforms;return new bD(new Nr(y),D,T)}class Yf extends Ka{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function ei(n,e,t){return new Kf({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class cc extends Ka{_toFieldTransform(e){return new Gd(e.path,new Yu)}isEqual(e){return e instanceof cc}}class TD extends Ka{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ei(this,e,!0),i=this._a.map(c=>ro(c,t)),a=new ml(i);return new Gd(e.path,a)}isEqual(e){return this===e}}class CD extends Ka{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ei(this,e,!0),i=this._a.map(c=>ro(c,t)),a=new Ra(i);return new Gd(e.path,a)}isEqual(e){return this===e}}class kb extends Ka{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Qu(e.It,Xw(e.It,this.wa));return new Gd(e.path,t)}isEqual(e){return this===e}}function $0(n,e,t,i){const a=n.da(1,e,t);nv("Data must be an object, but it was:",a,i);const c=[],p=Nr.empty();zu(i,(D,T)=>{const M=Jg(e,D,t);T=(0,Vt.m9)(T);const O=a.ca(M);if(T instanceof Yf)c.push(M);else{const q=ro(T,O);null!=q&&(c.push(M),p.set(M,q))}});const y=new qi(c);return new B0(p,y,a.fieldTransforms)}function Zg(n,e,t,i,a,c){const p=n.da(1,e,t),y=[Qg(e,i,t)],D=[a];if(c.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)y.push(Qg(e,c[q])),D.push(c[q+1]);const T=[],M=Nr.empty();for(let q=y.length-1;q>=0;--q)if(!em(T,y[q])){const X=y[q];let ce=D[q];ce=(0,Vt.m9)(ce);const Le=p.ca(X);if(ce instanceof Yf)T.push(X);else{const Ve=ro(ce,Le);null!=Ve&&(T.push(X),M.set(X,Ve))}}const O=new qi(T);return new B0(M,O,p.fieldTransforms)}function tv(n,e,t,i=!1){return ro(t,n.da(i?4:3,e))}function ro(n,e){if(Yg(n=(0,Vt.m9)(n)))return nv("Unsupported field value:",e,n),H0(n,e);if(n instanceof Ka)return function(t,i){if(!U0(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const p of t){let y=ro(p,i.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xw(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=wn.fromDate(t);return{timestampValue:Zd(i.It,a)}}if(t instanceof wn){const a=new wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zd(i.It,a)}}if(t instanceof Kg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Uo)return{bytesValue:_I(i.It,t._byteString)};if(t instanceof pn){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Df(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Hf(t)}`)}(n,e)}function H0(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zu(n,(i,a)=>{const c=ro(a,e.ra(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function Yg(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof wn||n instanceof Kg||n instanceof Uo||n instanceof pn||n instanceof Ka)}function nv(n,e,t){if(!Yg(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Hf(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function Qg(n,e,t){if((e=(0,Vt.m9)(e))instanceof qa)return e._internalPath;if("string"==typeof e)return Jg(n,e);throw Xg("Field path arguments must be of type string or ",n,!1,void 0,t)}const SD=new RegExp("[~\\*/\\[\\]]");function Jg(n,e,t){if(e.search(SD)>=0)throw Xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qa(...e.split("."))._internalPath}catch{throw Xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xg(n,e,t,i,a){const c=i&&!i.isEmpty(),p=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let D="";return(c||p)&&(D+=" (found",c&&(D+=` in field ${i}`),p&&(D+=` in document ${a}`),D+=")"),new Ce(oe.INVALID_ARGUMENT,y+n+D)}function em(n,e){return n.some(t=>t.isEqual(e))}class yh{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new G0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class G0 extends yh{data(){return super.data()}}function Pl(n,e){return"string"==typeof e?Jg(n,e):e instanceof qa?e._internalPath:e._delegate._internalPath}function tm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nm{}function Za(n,...e){for(const t of e)n=t._apply(n);return n}class AD extends nm{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=kl(e.firestore),i=function(a,c,p,y,D,T,M){let O;if(D.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){ov(M,T);const X=[];for(const ce of M)X.push(Z0(y,a,ce));O={arrayValue:{values:X}}}else O=Z0(y,a,M)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||ov(M,T),O=tv(p,"where",M,"in"===T||"not-in"===T);const q=Hr.create(D,T,O);return function(X,ce){if(ce.dt()){const Ve=Hp(X);if(null!==Ve&&!Ve.isEqual(ce.field))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${ce.field.toString()}'`);const Mt=_y(X);null!==Mt&&av(0,ce.field,Mt)}const Le=function(Ve,Mt){for(const Bt of Ve.filters)if(Mt.indexOf(Bt.op)>=0)return Bt.op;return null}(X,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Le)throw new Ce(oe.INVALID_ARGUMENT,Le===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Le.toString()}' filters.`)}(a,q),q}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new di(e.firestore,e.converter,function(a,c){const p=a.filters.concat([c]);return new Zu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,i))}}class _h extends nm{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,a,c){if(null!==i.startAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Ma(a,c);return function(y,D){if(null===_y(y)){const T=Hp(y);null!==T&&av(0,T,D.field)}}(i,p),p}(e._query,this.ma,this.pa);return new di(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Zu(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class rv extends nm{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new di(e.firestore,e.converter,yf(e._query,this.Ia,this.Ta))}}class z0 extends nm{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=sv(e,this.type,this.Ea,this.Aa);return new di(e.firestore,e.converter,(a=t,new Zu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class q0 extends nm{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=sv(e,this.type,this.Ea,this.Aa);return new di(e.firestore,e.converter,(a=t,new Zu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function sv(n,e,t,i){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof yh)return function(a,c,p,y,D){if(!y)throw new Ce(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const T=[];for(const M of $d(a))if(M.field.isKeyField())T.push(Ku(c,y.key));else{const O=y.data.field(M.field);if(Qv(O))throw new Ce(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const q=M.field.canonicalString();throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}T.push(O)}return new Ys(T,D)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=kl(n.firestore);return function(c,p,y,D,T,M){const O=c.explicitOrderBy;if(T.length>O.length)throw new Ce(oe.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let X=0;X<T.length;X++){const ce=T[X];if(O[X].field.isKeyField()){if("string"!=typeof ce)throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof ce}`);if(!uI(c)&&-1!==ce.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${ce}' contains a slash.`);const Le=c.path.child(Wt.fromString(ce));if(!Ue.isDocumentKey(Le))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const Ve=new Ue(Le);q.push(Ku(p,Ve))}else{const Le=tv(y,D,ce);q.push(Le)}}return new Ys(q,M)}(n._query,n.firestore._databaseId,a,e,t,i)}}function Z0(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uI(e)&&-1!==t.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Wt.fromString(t));if(!Ue.isDocumentKey(i))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ku(n,new Ue(i))}if(t instanceof pn)return Ku(n,t._key);throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function ov(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function av(n,e,t){if(!t.isEqual(e))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uv{convertValue(e,t="none"){switch(Ld(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const i={};return zu(e.fields,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new Kg(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=oy(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const t=Aa(e);return new wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Wt.fromString(e);bt(pE(i));const a=new qu(i.get(1),i.get(3)),c=new Ue(i.popFirst(5));return a.isEqual(t)||nr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function rm(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Y0 extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends yh{constructor(e,t,i,a,c,p){super(e,t,i,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Pl("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class vh extends jo{data(e={}){return super.data(e)}}class Ya{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ol(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new vh(this._firestore,this._userDataWriter,i.key,i,new Ol(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(p=>({type:"added",doc:new vh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Ol(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const y=new vh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Ol(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let D=-1,T=-1;return 0!==p.type&&(D=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),T=c.indexOf(p.doc.key)),{type:Q0(p.type),doc:y,oldIndex:D,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function J0(n,e){return n instanceof jo&&e instanceof jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ya&&e instanceof Ya&&n._firestore===e._firestore&&z_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ll extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function kD(n,e,t){n=Ht(n,pn);const i=Ht(n.firestore,Tn),a=rm(n.converter,e,t);return Fl(i,[Zf(kl(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Dn.none())])}function PD(n,e,t,...i){n=Ht(n,pn);const a=Ht(n.firestore,Tn),c=kl(a);let p;return p="string"==typeof(e=(0,Vt.m9)(e))||e instanceof qa?Zg(c,"updateDoc",n._key,e,t,i):$0(c,"updateDoc",n._key,e),Fl(a,[p.toMutation(n._key,Dn.exists(!0))])}function Qf(n,...e){var t,i,a;n=(0,Vt.m9)(n);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Q_(e[p])||(c=e[p],p++);const y={includeMetadataChanges:c.includeMetadataChanges};if(Q_(e[p])){const O=e[p];e[p]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[p+1]=null===(i=O.error)||void 0===i?void 0:i.bind(O),e[p+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let D,T,M;if(n instanceof pn)T=Ht(n.firestore,Tn),M=jd(n._key.path),D={next:O=>{e[p]&&e[p](Ih(T,n,O))},error:e[p+1],complete:e[p+2]};else{const O=Ht(n,di);T=Ht(O.firestore,Tn),M=O._query;const q=new Ll(T);D={next:X=>{e[p]&&e[p](new Ya(T,q,O,X))},error:e[p+1],complete:e[p+2]},tm(n._query)}return function(O,q,X,ce){const Le=new Vg(ce),Ve=new Sg(q,Le,X);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Cg(yield mh(O),Ve)})),()=>{Le.bc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return w_(yield mh(O),Ve)}))}}(Yn(T),M,y,D)}function Fl(n,e){return function(t,i){const a=new gr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function QE(n,e,t){return Mg.apply(this,arguments)}(yield K_(t),i,a)})),a.promise}(Yn(n),e)}function Ih(n,e,t){const i=t.docs.get(e._key),a=new Ll(n);return new jo(n,a,e._key,i,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}const Hb={maxAttempts:5};class im{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kl(e)}set(e,t,i){this._verifyNotCommitted();const a=Qa(e,this._firestore),c=rm(a.converter,t,i),p=Zf(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,i);return this._mutations.push(p.toMutation(a._key,Dn.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const c=Qa(e,this._firestore);let p;return p="string"==typeof(t=(0,Vt.m9)(t))||t instanceof qa?Zg(this._dataReader,"WriteBatch.update",c._key,t,i,a):$0(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qa(e,this._firestore);return this._mutations=this._mutations.concat(new _l(t._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qa(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new Ce(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class FD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kl(e)}get(e){const t=Qa(e,this._firestore),i=new Y0(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return rt();const c=a[0];if(c.isFoundDocument())return new yh(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new yh(this._firestore,i,t._key,null,t.converter);throw rt()})}set(e,t,i){const a=Qa(e,this._firestore),c=rm(a.converter,t,i),p=Zf(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,p),this}update(e,t,i,...a){const c=Qa(e,this._firestore);let p;return p="string"==typeof(t=(0,Vt.m9)(t))||t instanceof qa?Zg(this._dataReader,"Transaction.update",c._key,t,i,a):$0(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=Qa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qa(e,this._firestore),i=new Ll(this._firestore);return super.get(e).then(a=>new jo(this._firestore,i,t._key,a._document,new Ol(!1,!1),t.converter))}}function ew(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tw(){if(typeof Uint8Array>"u")throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function $D(){if(!function zw(){return typeof atob<"u"}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ca=ai.SDK_VERSION,(0,ai._registerComponent)(new wo.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new Tn(new Ow(t.getProvider("auth-internal")),new df(t.getProvider("app-check-internal")),function(y,D){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(y.options.projectId,D)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,ai.registerVersion)(Hv,"3.7.3",n),(0,ai.registerVersion)(Hv,"3.7.3","esm2017")}();class Jf{constructor(e){this._delegate=e}static fromBase64String(e){return $D(),new Jf(Uo.fromBase64String(e))}static fromUint8Array(e){return tw(),new Jf(Uo.fromUint8Array(e))}toBase64(){return $D(),this._delegate.toBase64()}toUint8Array(){return tw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function om(n){return function nw(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Zb{enableIndexedDbPersistence(e,t){return function P0(n,e){V0(n=Ht(n,Tn));const t=Yn(n),i=n._freezeSettings(),a=new Lg;return O0(t,a,new Og(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ID(n){V0(n=Ht(n,Tn));const e=Yn(n),t=n._freezeSettings(),i=new Lg;return O0(e,i,new oD(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Rb(n){if(n._initialized&&!n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(i){if(!ws.C())return Promise.resolve();const a=i+"main";yield ws.delete(a)}),function(i){return t.apply(this,arguments)})(Lf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ts{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function C0(n,e,t,i={}){var a;const c=(n=Ht(n,Gf))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Hu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let p,y;if("string"==typeof i.mockUserToken)p=i.mockUserToken,y=pr.MOCK_USER;else{p=(0,Vt.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new pr(D)}n._authCredentials=new mb(new Gv(p,y))}}(this._delegate,e,t,i)}enableNetwork(){return function X_(n){return function gD(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield M0(n),t=yield N0(n);return e.setNetworkEnabled(!0),function(i){const a=Ze(i);return a._u.delete(0),to(a)}(t)}))}(Yn(n=Ht(n,Tn)))}(this._delegate)}disableNetwork(){return function L0(n){return function zf(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield M0(n),t=yield N0(n);return e.setNetworkEnabled(!1),(i=(0,ge.Z)(function*(a){const c=Ze(a);c._u.add(0),yield ah(c),c.gu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(Yn(n=Ht(n,Tn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,D0("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J_(n){return function(e){const t=new gr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function XE(n,e){return Uf.apply(this,arguments)}(yield K_(e),t)})),t.promise}(Yn(n=Ht(n,Tn)))}(this._delegate)}onSnapshotsInSync(e){return function $b(n,e){return function Y_(n,e){const t=new Vg(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield mh(n),a=t,Ze(i).Ru.add(a),void a.next();var i,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield mh(n),a=t,void Ze(i).Ru.delete(a);var i,a}))}}(Yn(n=Ht(n,Tn)),Q_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dh(this,S0(this._delegate,e))}catch(t){throw hi(t,"collection()","Firestore.collection()")}}doc(e){try{return new xi(this,W_(this._delegate,e))}catch(t){throw hi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fi(this,function aD(n,e){if(n=Ht(n,Gf),$_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new di(n,null,(t=e,new Zu(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VD(n,e,t){n=Ht(n,Tn);const i=Object.assign(Object.assign({},Hb),t);return function(a){if(a.maxAttempts<1)throw new Ce(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,c,p){const y=new gr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const D=yield function R0(n){return Wf(n).then(e=>e.datastore)}(a);new fD(a.asyncQueue,D,p,c,y).run()})),y.promise}(Yn(n),a=>e(new FD(n,a)),i)}(this._delegate,t=>e(new rw(this,t)))}batch(){return Yn(this._delegate),new Yi(new im(this._delegate,e=>Fl(this._delegate,e)))}loadBundle(e){return function ev(n,e){const t=Yn(n=Ht(n,Tn)),i=new Wg;return function qf(n,e,t,i){const a=function(c,p){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,D=function(D,T){if(D instanceof Uint8Array)return A0(D,T);if(D instanceof ArrayBuffer)return A0(new Uint8Array(D),T);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new cD(D,p);var D}(t,oh(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function xb(n,e,t){const i=Ze(n);var a;(a=(0,ge.Z)(function*(c,p,y){try{const D=yield p.getMetadata();if(yield function(q,X){const ce=Ze(q),Le=Rr(X.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",Ve=>ce.Ns.getBundleMetadata(Ve,X.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Le)>=0)}(c.localStore,D))return yield p.close(),y._completeWith({taskState:"Success",documentsLoaded:(q=D).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);y._updateProgress(E_(D));const T=new zE(D,c.localStore,p.It);let M=yield p.mc();for(;M;){const q=yield T.Fu(M);q&&y._updateProgress(q),M=yield p.mc()}const O=yield T.complete();return yield Wa(c,O.Lu,void 0),yield function(q,X){const ce=Ze(q);return ce.persistence.runTransaction("Save bundle","readwrite",Le=>ce.Ns.saveBundleMetadata(Le,X))}(c.localStore,D),y._completeWith(O.progress),Promise.resolve(O.Bu)}catch(D){return Hu("SyncEngine",`Loading bundle failed with ${D}`),y._failWith(D),Promise.resolve(new Set)}var q}),function(c,p,y){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield K_(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function wD(n,e){return function yD(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,i){const a=Ze(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,i))}(yield Hg(n),e)}))}(Yn(n=Ht(n,Tn)),e).then(t=>t?new di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fi(this,t):null)}}class am extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jf(new Uo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xi.forKey(t,this.firestore,null)}}class rw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new am(e)}get(e){const t=lc(e);return this._delegate.get(t).then(i=>new wh(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=lc(e);return i?(ew("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=lc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=lc(e);return this._delegate.delete(t),this}}class Yi{constructor(e){this._delegate=e}set(e,t,i){const a=lc(e);return i?(ew("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=lc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=lc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new vh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Eh(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Vl.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let c=a.get(t);return c||(c=new Vl(e,new am(e),t),a.set(t,c)),c}}Vl.INSTANCES=new WeakMap;class xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new am(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xi(t,new pn(t._delegate,i,new Ue(e)))}static forKey(e,t,i){return new xi(t,new pn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Dh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dh(this.firestore,S0(this._delegate,e))}catch(t){throw hi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof pn&&uD(this._delegate,e)}set(e,t){t=ew("DocumentReference.set",t);try{return t?kD(this._delegate,e,t):kD(this._delegate,e)}catch(i){throw hi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?PD(this._delegate,e):PD(this._delegate,e,t,...i)}catch(a){throw hi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Ub(n){return Fl(Ht(n.firestore,Tn),[new _l(n._key,Dn.none())])}(this._delegate)}onSnapshot(...e){const t=iw(e),i=um(e,a=>new wh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Qf(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function X0(n){n=Ht(n,pn);const e=Ht(n.firestore,Tn),t=Yn(e),i=new Ll(e);return function mD(n,e){const t=new gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(a,c,p){try{const y=yield function(D,T){const M=Ze(D);return M.persistence.runTransaction("read document","readonly",O=>M.localDocuments.getDocument(O,T))}(a,c);y.isFoundDocument()?p.resolve(y):y.isNoDocument()?p.resolve(null):p.reject(new Ce(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const D=dh(y,`Failed to get document '${c} from cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield Hg(n),e,t);var i})),t.promise}(t,n._key).then(a=>new jo(e,i,n._key,a,new Ol(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Lb(n){n=Ht(n,pn);const e=Ht(n.firestore,Tn);return Gg(Yn(e),n._key,{source:"server"}).then(t=>Ih(e,n,t))}(this._delegate):function RD(n){n=Ht(n,pn);const e=Ht(n.firestore,Tn);return Gg(Yn(e),n._key).then(t=>Ih(e,n,t))}(this._delegate),t.then(i=>new wh(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new xi(this.firestore,this._delegate.withConverter(e?Vl.getInstance(this.firestore,e):null))}}function hi(n,e,t){return n.message=n.message.replace(e,t),n}function iw(n){for(const e of n)if("object"==typeof e&&!om(e))return e;return{}}function um(n,e){var t,i;let a;return a=om(n[0])?n[0]:om(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class wh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return J0(this._delegate,e._delegate)}}class Eh extends wh{data(e){const t=this._delegate.data(e);return function Pw(n,e){n||rt()}(void 0!==t),t}}class fi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new am(e)}where(e,t,i){try{return new fi(this.firestore,Za(this._delegate,function W0(n,e,t){const i=e,a=Pl("where",n);return new AD(a,i,t)}(e,t,i)))}catch(a){throw hi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fi(this.firestore,Za(this._delegate,function xD(n,e="asc"){const t=e,i=Pl("orderBy",n);return new _h(i,t)}(e,t)))}catch(i){throw hi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fi(this.firestore,Za(this._delegate,function iv(n){return G_("limit",n),new rv("limit",n,"F")}(e)))}catch(t){throw hi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fi(this.firestore,Za(this._delegate,function Pb(n){return G_("limitToLast",n),new rv("limitToLast",n,"L")}(e)))}catch(t){throw hi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fi(this.firestore,Za(this._delegate,function Ob(...n){return new z0("startAt",n,!0)}(...e)))}catch(t){throw hi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fi(this.firestore,Za(this._delegate,function MD(...n){return new z0("startAfter",n,!1)}(...e)))}catch(t){throw hi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fi(this.firestore,Za(this._delegate,function ND(...n){return new q0("endBefore",n,!1)}(...e)))}catch(t){throw hi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fi(this.firestore,Za(this._delegate,function K0(...n){return new q0("endAt",n,!0)}(...e)))}catch(t){throw hi(t,"endAt()","Query.endAt()")}}isEqual(e){return z_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Vb(n){n=Ht(n,di);const e=Ht(n.firestore,Tn),t=Yn(e),i=new Ll(e);return function za(n,e){const t=new gr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(a,c,p){try{const y=yield Ff(a,c,!0),D=new p0(c,y.Hi),T=D.Wu(y.documents),M=D.applyChanges(T,!1);p.resolve(M.snapshot)}catch(y){const D=dh(y,`Failed to execute query '${c} against cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield Hg(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Ya(e,i,n,a))}(this._delegate):"server"===e?.source?function Bb(n){n=Ht(n,di);const e=Ht(n.firestore,Tn),t=Yn(e),i=new Ll(e);return k0(t,n._query,{source:"server"}).then(a=>new Ya(e,i,n,a))}(this._delegate):function Fb(n){n=Ht(n,di);const e=Ht(n.firestore,Tn),t=Yn(e),i=new Ll(e);return tm(n._query),k0(t,n._query).then(a=>new Ya(e,i,n,a))}(this._delegate),t.then(i=>new cm(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=iw(e),i=um(e,a=>new cm(this.firestore,new Ya(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Qf(this._delegate,t,i)}withConverter(e){return new fi(this.firestore,this._delegate.withConverter(e?Vl.getInstance(this.firestore,e):null))}}class sw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sw(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Eh(this._firestore,i))})}isEqual(e){return J0(this._delegate,e._delegate)}}class Dh extends fi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xi(this.firestore,e):null}doc(e){try{return new xi(this.firestore,void 0===e?W_(this._delegate):W_(this._delegate,e))}catch(t){throw hi(t,"doc()","CollectionReference.doc()")}}add(e){return function jb(n,e){const t=Ht(n.firestore,Tn),i=W_(n),a=rm(n.converter,e);return Fl(t,[Zf(kl(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Dn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new xi(this.firestore,t))}isEqual(e){return uD(this._delegate,e._delegate)}withConverter(e){return new Dh(this.firestore,this._delegate.withConverter(e?Vl.getInstance(this.firestore,e):null))}}function lc(n){return Ht(n,pn)}class lv{constructor(...e){this._delegate=new qa(...e)}static documentId(){return new lv(An.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ja{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Wb(){return new cc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ja(e)}static delete(){const e=function Gb(){return new Yf("deleteField")}();return e._methodName="FieldValue.delete",new Ja(e)}static arrayUnion(...e){const t=function zb(...n){return new TD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ja(t)}static arrayRemove(...e){const t=function BD(...n){return new CD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ja(t)}static increment(e){const t=function sm(n){return new kb("increment",n)}(e);return t._methodName="FieldValue.increment",new Ja(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dc={Firestore:Ts,GeoPoint:Kg,Timestamp:wn,Blob:Jf,Transaction:rw,WriteBatch:Yi,DocumentReference:xi,DocumentSnapshot:wh,Query:fi,QueryDocumentSnapshot:Eh,QuerySnapshot:cm,CollectionReference:Dh,FieldPath:lv,FieldValue:Ja,setLogLevel:function cv(n){!function ey(n){Wi.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dv(n){(function ow(n,e){n.INTERNAL.registerComponent(new wo.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},dc)))})(n,(e,t)=>new Ts(e,t,new Zb)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(ga.Z);var $o=L(7579),HD=L(6451),hv=L(5363),GD=L(8421);function Bl(n,e){return(0,ps.e)((t,i)=>{let a=null,c=0,p=!1;const y=()=>p&&!a&&i.complete();t.subscribe((0,Jr.x)(i,D=>{a?.unsubscribe();let T=0;const M=c++;(0,GD.Xf)(n(D,M)).subscribe(a=(0,Jr.x)(i,O=>i.next(e?e(D,O,M,T++):O),()=>{a=null,y()}))},()=>{p=!0,y()}))})}var WD=L(6063);class zD extends $o.x{constructor(e=1/0,t=1/0,i=WD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:p}=this;t||(i.push(e),!a&&i.push(c.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,c=a.slice();for(let p=0;p<c.length&&!e.closed;p+=i?1:2)e.next(c[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<i.length&&i.splice(0,i.length-c),!a){const p=t.now();let y=0;for(let D=1;D<i.length&&i[D]<=p;D+=2)y=D;y&&i.splice(0,y+1)}}}var aw=L(3099);function qD(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,aw.B)({connector:()=>new zD(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const cw=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var lw=L(515);function Yb(n){return n<=0?()=>lw.E:(0,ps.e)((e,t)=>{let i=0;e.subscribe((0,Jr.x)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}function fv(n){return(0,ps.e)((e,t)=>{let i=!1;e.subscribe((0,Jr.x)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}function dw(n=hw){return(0,ps.e)((e,t)=>{let i=!1;e.subscribe((0,Jr.x)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function hw(){return new cw}var pw=L(576);function pv(n,e){return(0,pw.m)(e)?Bl(()=>n,e):Bl(()=>n)}var Xf=L(9468);L(5867);const mv=new Map,np={activated:!1,tokenObservers:[]},YD={initialized:!1,enabled:!1};function Gr(n){return mv.get(n)||Object.assign({},np)}function Ho(){return YD}class hm{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function nT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wv(n){if(!Gr(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function Dv(n,e){return bv.apply(this,arguments)}function bv(){return bv=(0,ge.Z)(function*({url:n,body:e},t){var i,a;const c={"Content-Type":"application/json"},p=t.getImmediate({optional:!0});if(p){const X=yield p.getHeartbeatsHeader();X&&(c["X-Firebase-Client"]=X)}const y={method:"POST",body:JSON.stringify(e),headers:c};let D,T;try{D=yield fetch(n,y)}catch(X){throw Mi.create("fetch-network-error",{originalErrorMessage:null===(i=X)||void 0===i?void 0:i.message})}if(200!==D.status)throw Mi.create("fetch-status-error",{httpStatus:D.status});try{T=yield D.json()}catch(X){throw Mi.create("fetch-parse-error",{originalErrorMessage:null===(a=X)||void 0===a?void 0:a.message})}const M=T.ttl.match(/^([\d.]+)(s)$/);if(!M||!M[2]||isNaN(Number(M[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${T.ttl}`});const O=1e3*Number(M[1]),q=Date.now();return{token:T.token,expireTimeMillis:q+O,issuedAtTimeMillis:q}}),bv.apply(this,arguments)}function Iw(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const bh="firebase-app-check-store";let Tv=null;function Cv(){return Tv||(Tv=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{var c;e(Mi.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},i.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(bh,{keyPath:"compositeKey"})}}catch(i){e(Mi.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),Tv)}function Av(){return Av=(0,ge.Z)(function*(n,e){const i=(yield Cv()).transaction(bh,"readwrite"),c=i.objectStore(bh).put({compositeKey:n,value:e});return new Promise((p,y)=>{c.onsuccess=D=>{p()},i.onerror=D=>{var T;y(Mi.create("storage-set",{originalErrorMessage:null===(T=D.target.error)||void 0===T?void 0:T.message}))}})}),Av.apply(this,arguments)}const gm=new Sr.Yd("@firebase/app-check");function bw(n,e){return(0,Vt.hl)()?function eb(n,e){return function nb(n,e){return Av.apply(this,arguments)}(function rb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{gm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sb(){return Ho().enabled}function ob(){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,ge.Z)(function*(){const n=Ho();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Cw.apply(this,arguments)}const aT={error:"UNKNOWN_ERROR"};function r(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function s(n){return o.apply(this,arguments)}function o(){return o=(0,ge.Z)(function*(n,e=!1){const t=n.app;wv(t);const i=Gr(t);let c,a=i.token;if(a&&!w(a)&&(i.token=void 0,a=void 0),!a){const D=yield i.cachedTokenPromise;D&&(w(D)?a=D:yield bw(t,void 0))}if(!e&&a&&w(a))return{token:a.token};let y,p=!1;if(sb()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Dv(Iw(t,yield ob()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),p=!0);const D=yield i.exchangeTokenPromise;return yield bw(t,D),i.token=D,{token:D.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),p=!0),a=yield Gr(t).exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?gm.warn(D.message):gm.error(D),c=D}return a?c?y=w(a)?{token:a.token,internalError:c}:C(c):(y={token:a.token},i.token=a,yield bw(t,a)):y=C(c),p&&v(t,y),y}),o.apply(this,arguments)}function l(n,e){const t=Gr(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function h(n){const{app:e}=n,t=Gr(e);let i=t.tokenRefresher;i||(i=function m(n){const{app:e}=n;return new hm((0,ge.Z)(function*(){let i;if(i=Gr(e).token?yield s(n,!0):yield s(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Gr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function v(n,e){const t=Gr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function w(n){return n.expireTimeMillis-Date.now()>0}function C(n){return{token:r(aT),error:n}}class x{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Gr(this.app);for(const t of e)l(this.app,t.next);return Promise.resolve()}}const uT="app-check-internal";!function LT(){(0,ai._registerComponent)(new wo.wA("app-check",n=>function R(n,e){return new x(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uT).initialize()})),(0,ai._registerComponent)(new wo.wA(uT,n=>function j(n){return{getToken:e=>s(n,e),addTokenListener:e=>function u(n,e,t,i){const{app:a}=n,c=Gr(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:i,type:e}],c.token&&w(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),h(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>h(n))}(n,"INTERNAL",e),removeTokenListener:e=>l(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ai.registerVersion)("@firebase/app-check","0.5.17")}();class cb{constructor(){return(0,$n.vb)("app-check")}}typeof window<"u"&&window;var jT=L(127);const lT=new I.OlP("angularfire2.auth.use-emulator"),dT=new I.OlP("angularfire2.auth.settings"),hT=new I.OlP("angularfire2.auth.tenant-id"),fT=new I.OlP("angularfire2.auth.langugage-code"),pT=new I.OlP("angularfire2.auth.use-device-language"),gT=new I.OlP("angularfire.auth.persistence"),mT=(n,e,t,i,a,c,p,y)=>(0,Br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),i&&(D.tenantId=i),D.languageCode=a,c&&D.useDeviceLanguage(),p)for(const[T,M]of Object.entries(p))D.settings[T]=M;return y&&D.setPersistence(y),D},[t,i,a,c,p,y]);let yT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,M,O,q,X){const ce=new $o.x,Le=ar(void 0).pipe((0,hv.Q)(p.outsideAngular),Bl(()=>c.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,1277)))),(0,ur.U)(()=>(0,Br.on)(t,c,i)),(0,ur.U)(Ve=>mT(Ve,c,y,T,M,O,D,q)),qD({bufferSize:1,refCount:!1}));if(or(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ar(null);else{Le.pipe(function fw(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Io((a,c)=>n(a,c,i)):Hs.y,Yb(1),t?fv(e):dw(()=>new cw))}()).subscribe();const Mt=Le.pipe(Bl(kt=>kt.getRedirectResult().then(Nt=>Nt,()=>null)),$n.iC,qD({bufferSize:1,refCount:!1})),Bt=Le.pipe(Bl(kt=>new Bc.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>kt.onAuthStateChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))})))),Lt=Le.pipe(Bl(kt=>new Bc.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>kt.onIdTokenChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))}))));this.authState=Mt.pipe(pv(Bt),(0,Xf.R)(p.outsideAngular),(0,hv.Q)(p.insideAngular)),this.user=Mt.pipe(pv(Lt),(0,Xf.R)(p.outsideAngular),(0,hv.Q)(p.insideAngular)),this.idToken=this.user.pipe(Bl(kt=>kt?(0,oi.D)(kt.getIdToken()):ar(null))),this.idTokenResult=this.user.pipe(Bl(kt=>kt?(0,oi.D)(kt.getIdTokenResult()):ar(null))),this.credential=(0,HD.T)(Mt,ce,this.authState.pipe(Io(kt=>!kt))).pipe((0,ur.U)(kt=>kt?.user?kt:null),(0,Xf.R)(p.outsideAngular),(0,hv.Q)(p.insideAngular))}return(0,Br.pX)(this,Le,c,{spy:{apply:(Ve,Mt,Bt)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&Bt.then(Lt=>ce.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Br.Dh),I.LFG(Br.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG($n.HU),I.LFG(lT,8),I.LFG(dT,8),I.LFG(hT,8),I.LFG(fT,8),I.LFG(pT,8),I.LFG(gT,8),I.LFG(cb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _T(n,e){return function HT(n,e=_o.z){return new Bc.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function db(n,e){return _T(n,e).pipe((0,ur.U)(t=>({payload:t,type:"query"})))}function Aw(n,e){return db(n,e).pipe(fa(void 0),gs(),(0,ur.U)(([t,i])=>{const a=i.payload.docChanges(),c=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((p,y)=>{const D=a.find(M=>M.doc.ref.isEqual(p.ref)),T=t?.payload.docs.find(M=>M.ref.isEqual(p.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(p.metadata)||!D&&T&&JSON.stringify(T.metadata)===JSON.stringify(p.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:p}})}),c}))}function vT(n,e,t){return Aw(n,t).pipe(pa((i,a)=>function WT(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function zT(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return hb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return hb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hb(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(c=>c.payload),e),[]),function ad(n,e=Hs.y){return n=n??Uc,(0,ps.e)((t,i)=>{let a,c=!0;t.subscribe((0,Jr.x)(i,p=>{const y=e(p);(c||!n(a,y))&&(c=!1,a=y,i.next(p))}))})}(),(0,ur.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function hb(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function IT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wT{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Aw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ur.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(fa(void 0),gs(),Io(([i,a])=>a.length>0||!i),(0,ur.U)(([i,a])=>a),$n.iC)}auditTrail(e){return this.stateChanges(e).pipe(pa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=IT(e);return vT(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return db(this.query,this.afs.schedulers.outsideAngular).pipe((0,ur.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),$n.iC)}get(e){return(0,oi.D)(this.query.get(e)).pipe($n.iC)}add(e){return this.ref.add(e)}doc(e){return new ET(this.ref.doc(e),this.afs)}}class ET{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:c}=TT(i,t);return new wT(a,c,this.afs)}snapshotChanges(){return function GT(n,e){return _T(n,e).pipe(fa(void 0),gs(),(0,ur.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ur.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,oi.D)(this.ref.get(e)).pipe($n.iC)}}class qT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Aw(this.query,this.afs.schedulers.outsideAngular).pipe((0,ur.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Io(t=>t.length>0),$n.iC):Aw(this.query,this.afs.schedulers.outsideAngular).pipe($n.iC)}auditTrail(e){return this.stateChanges(e).pipe(pa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=IT(e);return vT(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return db(this.query,this.afs.schedulers.outsideAngular).pipe((0,ur.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),$n.iC)}get(e){return(0,oi.D)(this.query.get(e)).pipe($n.iC)}}const DT=new I.OlP("angularfire2.enableFirestorePersistence"),bT=new I.OlP("angularfire2.firestore.persistenceSettings"),KT=new I.OlP("angularfire2.firestore.settings"),ZT=new I.OlP("angularfire2.firestore.use-emulator");function TT(n,e=(t=>t)){return{query:e(n),ref:n}}let CT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,M,O,q,X,ce,Le,Ve,Mt,Bt){this.schedulers=D;const Lt=(0,Br.on)(t,y,i),kt=M;O&&mT(Lt,y,q,ce,Le,Ve,X,Mt),[this.firestore,this.persistenceEnabled$]=(0,Br.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Nt=y.runOutsideAngular(()=>Lt.firestore());if(c&&Nt.settings(c),kt&&Nt.useEmulator(...kt),a&&!or(p)){const Ut=()=>{try{return(0,oi.D)(Nt.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(Wr){return typeof console<"u"&&console.warn(Wr),ar(!1)}};return[Nt,y.runOutsideAngular(Ut)]}return[Nt,ar(!1)]},[c,kt,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:p}=TT(a,i),y=this.schedulers.ngZone.run(()=>c);return new wT(y,p,this)}collectionGroup(t,i){const a=i||(p=>p),c=this.firestore.collectionGroup(t);return new qT(a(c),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new ET(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Br.Dh),I.LFG(Br.xv,8),I.LFG(DT,8),I.LFG(KT,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG($n.HU),I.LFG(bT,8),I.LFG(ZT,8),I.LFG(yT,8),I.LFG(lT,8),I.LFG(dT,8),I.LFG(hT,8),I.LFG(fT,8),I.LFG(pT,8),I.LFG(gT,8),I.LFG(cb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YT=(()=>{class n{constructor(){jT.Z.registerVersion("angularfire",$n.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:DT,useValue:!0},{provide:bT,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[CT]}),n})(),QT=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,i){this.firestoreCollection.doc(t).update({isDone:i})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(CT))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JT(n,e){if(1&n){const t=I.EpF();I.TgZ(0,"li",12)(1,"span")(2,"i",13),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onStatusChange(c.id,!c.isDone))}),I.qZA(),I._uU(3),I.TgZ(4,"span",14),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onDelete(c.id))}),I._UZ(5,"i",15),I.qZA()()()}if(2&n){const t=e.$implicit;I.xp6(2),I.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),I.xp6(1),I.hij(" ",t.title," ")}}let XT=(()=>{class n{constructor(t){this.TodoService=t,this.todos=[]}ngOnInit(){this.TodoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((i,a)=>i.isDone-a.isDone)})}onClick(t){t.value&&(this.TodoService.addTodo(t.value),t.value="")}onStatusChange(t,i){this.TodoService.updateTodoStatus(t,i)}onDelete(t){this.TodoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(QT))},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title",1,"form-control","border-0","py-3","shadow-none"],["titleInp",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,i){if(1&t){const a=I.EpF();I.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),I._uU(3,"To Do List"),I.qZA()(),I.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),I._UZ(8,"input",7,8),I.TgZ(10,"button",9),I.NdJ("click",function(){I.CHM(a);const p=I.MAs(9);return I.KtG(i.onClick(p))}),I._UZ(11,"i",10),I.qZA()()(),I.YNc(12,JT,6,2,"li",11),I.qZA()()()}2&t&&(I.xp6(12),I.Q6J("ngForOf",i.todos))},dependencies:[en,Ms],encapsulation:2}),n})(),eC=(()=>{class n{constructor(){this.title="todoangular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,i){1&t&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I._UZ(3,"app-todo"),I.qZA()()())},dependencies:[XT]}),n})();const ST_firebaseConfig={apiKey:"AIzaSyCFIo_WKFNzLIW7qR6zoTyKMWaunAxZjYI",authDomain:"sptodo8.firebaseapp.com",databaseURL:"https://sptodo8-default-rtdb.firebaseio.com",projectId:"sptodo8",storageBucket:"sptodo8.appspot.com",messagingSenderId:"772334183114",appId:"1:772334183114:web:28d25197bdad82fa338a33",measurementId:"G-P5TNT8N651"};let tC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n,bootstrap:[eC]}),n.\u0275inj=I.cJS({imports:[Oc,Br.hO.initializeApp(ST_firebaseConfig),YT]}),n})();(0,I.G48)(),Cu().bootstrapModule(tC).catch(n=>console.error(n))},5867:(ft,Se,L)=>{L.d(Se,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=L(9681);(0,I.registerVersion)("firebase","9.14.0","app")},127:(ft,Se,L)=>{L.d(Se,{Z:()=>I.Z});var I=L(3942);I.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ft,Se,L)=>{L.r(Se);var I=L(5861),ee=L(3942),k=L(2090),ae=L(9681),ie=L(1877),de=L(655),he=L(4859);const Ae=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ie.Yd("@firebase/auth");function Qe(g,...d){qe.logLevel<=ie.in.ERROR&&qe.error(`Auth (${ae.SDK_VERSION}): ${g}`,...d)}function Te(g,...d){throw Be(g,...d)}function me(g,...d){return Be(g,...d)}function we(g,d,f){const _=Object.assign(Object.assign({},ze()),{[d]:f});return new k.LL("auth","Firebase",_).create(d,{appName:g.name})}function je(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Te(g,"argument-error"),we(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return fe.create(g,...d)}function V(g,d,...f){if(!g)throw Be(d,...f)}function ue(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Qe(d),new Error(d)}function G(g,d){g||ue(d)}const Y=new Map;function ne(g){G(g instanceof Function,"Expected a class definition");let d=Y.get(g);return d?(G(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,Y.set(g,d),d)}function Ne(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function at(){return"http:"===zt()||"https:"===zt()}function zt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Xt{constructor(d,f){this.shortDelay=d,this.longDelay=f,G(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(g,d){G(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class Gt{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dr=new Xt(3e4,6e4);function Ct(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function rn(g,d,f,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,I.Z)(function*(g,d,f,_,S={}){return ti(g,S,(0,I.Z)(function*(){let N={},$={};_&&("GET"===d?$=_:N={body:JSON.stringify(_)});const se=(0,k.xO)(Object.assign({key:g.config.apiKey},$)).slice(1),Oe=yield g._getAdditionalHeaders();return Oe["Content-Type"]="application/json",g.languageCode&&(Oe["X-Firebase-Locale"]=g.languageCode),Gt.fetch()(ni(g,g.config.apiHost,f,se),Object.assign({method:d,headers:Oe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ti(g,d,f){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},qt),d);try{const S=new zr(g),N=yield Promise.race([f(),S.promise]);S.clearNetworkTimeout();const $=yield N.json();if("needConfirmation"in $)throw qr(g,"account-exists-with-different-credential",$);if(N.ok&&!("errorMessage"in $))return $;{const se=N.ok?$.errorMessage:$.error.message,[Oe,Xe]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw qr(g,"credential-already-in-use",$);if("EMAIL_EXISTS"===Oe)throw qr(g,"email-already-in-use",$);if("USER_DISABLED"===Oe)throw qr(g,"user-disabled",$);const vt=_[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw we(g,vt,Xe);Te(g,vt)}}catch(S){if(S instanceof k.ZR)throw S;Te(g,"network-request-failed")}})).apply(this,arguments)}function kr(g,d,f,_){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,I.Z)(function*(g,d,f,_,S={}){const N=yield rn(g,d,f,_,S);return"mfaPendingCredential"in N&&Te(g,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ni(g,d,f,_){const S=`${d}${f}?${_}`;return g.config.emulator?ln(g.config,S):`${g.config.apiScheme}://${S}`}class zr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(me(this.auth,"network-request-failed")),Dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qr(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const S=me(g,d,_);return S.customData._tokenResponse=f,S}function Je(){return(Je=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function yr(g,d){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fn(g,d){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function pi(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function on(){return(on=(0,I.Z)(function*(g,d=!1){const f=(0,k.m9)(g),_=yield f.getIdToken(d),S=ot(_);V(S&&S.exp&&S.auth_time&&S.iat,f.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,$=N?.sign_in_provider;return{claims:S,token:_,authTime:pi(pt(S.auth_time)),issuedAtTime:pi(pt(S.iat)),expirationTime:pi(pt(S.exp)),signInProvider:$||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function pt(g){return 1e3*Number(g)}function ot(g){var d;const[f,_,S]=g.split(".");if(void 0===f||void 0===_||void 0===S)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(_);return N?JSON.parse(N):(Qe("Failed to decode base64 JWT payload"),null)}catch(N){return Qe("Caught error parsing JWT payload as JSON",null===(d=N)||void 0===d?void 0:d.toString()),null}}function rr(g,d){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,I.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof k.ZR&&Pr(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function Pr({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class Tt{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,I.Z)(function*(){var f;try{yield d.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(f=_)||void 0===f?void 0:f.code)&&d.schedule(!0))}d.schedule()})()}}class Xi{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=pi(this.lastLoginAt),this.creationTime=pi(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(g){return gi.apply(this,arguments)}function gi(){return(gi=(0,I.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),S=yield rr(g,Fn(f,{idToken:_}));V(S?.users.length,f,"internal-error");const N=S.users[0];g._notifyReloadListener(N);const $=null!==(d=N.providerUserInfo)&&void 0!==d&&d.length?tt(N.providerUserInfo):[],se=Tr(g.providerData,$),vt=!!g.isAnonymous&&!(g.email&&N.passwordHash||se?.length),ht={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:se,metadata:new Xi(N.createdAt,N.lastLoginAt),isAnonymous:vt};Object.assign(g,ht)})).apply(this,arguments)}function Vn(){return(Vn=(0,I.Z)(function*(g){const d=(0,k.m9)(g);yield Zt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Tr(g,d){return[...g.filter(_=>!d.some(S=>S.providerId===_.providerId)),...d]}function tt(g){return g.map(d=>{var{providerId:f}=d,_=(0,de._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function et(){return(et=(0,I.Z)(function*(g,d){const f=yield ti(g,{},(0,I.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:S,apiKey:N}=g.config,$=ni(g,S,"/v1/token",`key=${N}`),se=yield g._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()($,{method:"POST",headers:se,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class It{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){V(d.idToken,"internal-error"),V(typeof d.idToken<"u","internal-error"),V(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Jt(g){const d=ot(g);return V(d,"internal-error"),V(typeof d.exp<"u","internal-error"),V(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,I.Z)(function*(){return V(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,I.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:$}=yield function De(g,d){return et.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(S,N,Number($))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:S,expirationTime:N}=f,$=new It;return _&&(V("string"==typeof _,"internal-error",{appName:d}),$.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:d}),$.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:d}),$.expirationTime=N),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new It,this.toJSON())}_performRefresh(){return ue("not implemented")}}function _t(g,d){V("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class xt{constructor(d){var{uid:f,auth:_,stsTokenManager:S}=d,N=(0,de._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Xi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,I.Z)(function*(){const _=yield rr(f,f.stsTokenManager.getToken(f.auth,d));return V(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function xn(g){return on.apply(this,arguments)}(this,d)}reload(){return function Yt(g){return Vn.apply(this,arguments)}(this)}_assign(d){this!==d&&(V(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new xt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,I.Z)(function*(){let S=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),S=!0),f&&(yield Zt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,I.Z)(function*(){const f=yield d.getIdToken();return yield rr(d,function Go(g,d){return Je.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,S,N,$,se,Oe,Xe,vt;const ht=null!==(_=f.displayName)&&void 0!==_?_:void 0,Wn=null!==(S=f.email)&&void 0!==S?S:void 0,zn=null!==(N=f.phoneNumber)&&void 0!==N?N:void 0,Is=null!==($=f.photoURL)&&void 0!==$?$:void 0,tf=null!==(se=f.tenantId)&&void 0!==se?se:void 0,nf=null!==(Oe=f._redirectEventId)&&void 0!==Oe?Oe:void 0,rf=null!==(Xe=f.createdAt)&&void 0!==Xe?Xe:void 0,Bm=null!==(vt=f.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Tp,emailVerified:Um,isAnonymous:Uu,providerData:ba,stsTokenManager:rl}=f;V(Tp&&rl,d,"internal-error");const sf=It.fromJSON(this.name,rl);V("string"==typeof Tp,d,"internal-error"),_t(ht,d.name),_t(Wn,d.name),V("boolean"==typeof Um,d,"internal-error"),V("boolean"==typeof Uu,d,"internal-error"),_t(zn,d.name),_t(Is,d.name),_t(tf,d.name),_t(nf,d.name),_t(rf,d.name),_t(Bm,d.name);const Ad=new xt({uid:Tp,auth:d,email:Wn,emailVerified:Um,displayName:ht,isAnonymous:Uu,photoURL:Is,phoneNumber:zn,tenantId:tf,stsTokenManager:sf,createdAt:rf,lastLoginAt:Bm});return ba&&Array.isArray(ba)&&(Ad.providerData=ba.map(Ta=>Object.assign({},Ta))),nf&&(Ad._redirectEventId=nf),Ad}static _fromIdTokenResponse(d,f,_=!1){return(0,I.Z)(function*(){const S=new It;S.updateFromServerResponse(f);const N=new xt({uid:f.localId,auth:d,stsTokenManager:S,isAnonymous:_});return yield Zt(N),N})()}}const F=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(f,_){var S=this;return(0,I.Z)(function*(){S.storage[f]=_})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=_.storage[f];return void 0===S?null:S})()}_remove(f){var _=this;return(0,I.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function z(g,d,f){return`firebase:${g}:${d}:${f}`}class _e{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=z(this.userKey,S.apiKey,N),this.fullPersistenceKey=z("persistence",S.apiKey,N),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?xt._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,I.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,I.Z)(function*(){if(!f.length)return new _e(ne(F),d,_);const S=(yield Promise.all(f.map(function(){var Xe=(0,I.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let N=S[0]||ne(F);const $=z(_,d.config.apiKey,d.name);let se=null;for(const Xe of f)try{const vt=yield Xe._get($);if(vt){const ht=xt._fromJSON(d,vt);Xe!==N&&(se=ht),N=Xe;break}}catch{}const Oe=S.filter(Xe=>Xe._shouldAllowMigration);return N._shouldAllowMigration&&Oe.length?(N=Oe[0],se&&(yield N._set($,se.toJSON())),yield Promise.all(f.map(function(){var Xe=(0,I.Z)(function*(vt){if(vt!==N)try{yield vt._remove($)}catch{}});return function(vt){return Xe.apply(this,arguments)}}())),new _e(N,d,_)):new _e(N,d,_)})()}}function K(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(sn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(He(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Pe(d))return"Blackberry";if($e(d))return"Webos";if(ut(d))return"Safari";if((d.includes("chrome/")||Kt(d))&&!d.includes("edge/"))return"Chrome";if(jt(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function He(g=(0,k.z$)()){return/firefox\//i.test(g)}function ut(g=(0,k.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Kt(g=(0,k.z$)()){return/crios\//i.test(g)}function sn(g=(0,k.z$)()){return/iemobile/i.test(g)}function jt(g=(0,k.z$)()){return/android/i.test(g)}function Pe(g=(0,k.z$)()){return/blackberry/i.test(g)}function $e(g=(0,k.z$)()){return/webos/i.test(g)}function Rt(g=(0,k.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Ss(g=(0,k.z$)()){return Rt(g)||jt(g)||$e(g)||Pe(g)||/windows phone/i.test(g)||sn(g)}function es(g,d=[]){let f;switch(g){case"Browser":f=K((0,k.z$)());break;case"Worker":f=`${K((0,k.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ae.SDK_VERSION}/${_}`}class io{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=N=>new Promise(($,se)=>{try{$(d(N))}catch(Oe){se(Oe)}});_.onAbort=f,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,I.Z)(function*(){var _;if(f.auth.currentUser===d)return;const S=[];try{for(const N of f.queue)yield N(d),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const $ of S)try{$()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=N)||void 0===_?void 0:_.message})}})()}}class St{constructor(d,f,_){this.app=d,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.beforeStateQueue=new io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=ne(f)),this._initializationPromise=this.queue((0,I.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,d),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,I.Z)(function*(){var _;const S=yield f.assertedPersistence.getCurrentUser();let N=S,$=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const se=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Oe=N?._redirectEventId,Xe=yield f.tryRedirectSignIn(d);(!se||se===Oe)&&Xe?.user&&(N=Xe.user,$=!0)}if(!N)return f.directlySetCurrentUser(null);if(!N._redirectEventId){if($)try{yield f.beforeStateQueue.runMiddleware(N)}catch(se){N=S,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(se))}return N?f.reloadAndSetCurrentUserOrClear(N):f.directlySetCurrentUser(null)}return V(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===N._redirectEventId?f.directlySetCurrentUser(N):f.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(d){var f=this;return(0,I.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,I.Z)(function*(){var _;try{yield Zt(d)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ye(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,I.Z)(function*(){const _=d?(0,k.m9)(d):null;return _&&V(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,I.Z)(function*(){if(!_._deleted)return d&&V(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,I.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,I.Z)(function*(){yield f.assertedPersistence.setPersistence(ne(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new k.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,I.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(f);return null===d?S.removeCurrentUser():S.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,I.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&ne(d)||f._popupRedirectResolver;V(_,f,"argument-error"),f.redirectPersistenceManager=yield _e.create(f,[ne(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,I.Z)(function*(){var _,S;return f._isInitialized&&(yield f.queue((0,I.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(S=f.redirectUser)||void 0===S?void 0:S._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,I.Z)(function*(){if(d===f.currentUser)return f.queue((0,I.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,S){if(this._deleted)return()=>{};const N="function"==typeof f?f:f.next.bind(f),$=this._isInitialized?Promise.resolve():this._initializationPromise;return V($,this,"internal-error"),$.then(()=>N(this.currentUser)),"function"==typeof f?d.addObserver(f,_,S):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,I.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const S=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function hn(g){return(0,k.m9)(g)}class As{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mi(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function ts(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class ir{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return ue("not implemented")}_getIdTokenResponse(d){return ue("not implemented")}_linkToIdToken(d,f){return ue("not implemented")}_getReauthenticationResolver(d){return ue("not implemented")}}function Rn(g,d){return eu.apply(this,arguments)}function eu(){return(eu=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:resetPassword",Ct(g,d))})).apply(this,arguments)}function en(g,d){return hc.apply(this,arguments)}function hc(){return(hc=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function fc(g,d){return xs.apply(this,arguments)}function xs(){return(xs=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:update",Ct(g,d))})).apply(this,arguments)}function Ms(){return(Ms=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithPassword",Ct(g,d))})).apply(this,arguments)}function rs(g,d){return ri.apply(this,arguments)}function ri(){return(ri=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:sendOobCode",Ct(g,d))})).apply(this,arguments)}function sr(g,d){return pc.apply(this,arguments)}function pc(){return(pc=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function Jn(g,d){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function tu(g,d){return zo.apply(this,arguments)}function zo(){return(zo=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function gc(g,d){return _r.apply(this,arguments)}function _r(){return(_r=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function jl(){return(jl=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithEmailLink",Ct(g,d))})).apply(this,arguments)}function mc(){return(mc=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithEmailLink",Ct(g,d))})).apply(this,arguments)}class yc extends ir{constructor(d,f,_,S=null){super("password",_),this._email=d,this._password=f,this._tenantId=S}static _fromEmailAndPassword(d,f){return new yc(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new yc(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return function Wo(g,d){return Ms.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Th(g,d){return jl.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Te(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,I.Z)(function*(){switch(_.signInMethod){case"password":return en(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ch(g,d){return mc.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Te(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Un(g,d){return $l.apply(this,arguments)}function $l(){return($l=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithIdp",Ct(g,d))})).apply(this,arguments)}class Ni extends ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Ni(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Te("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S}=f,N=(0,de._T)(f,["providerId","signInMethod"]);if(!_||!S)return null;const $=new Ni(_,S);return $.idToken=N.idToken||void 0,$.accessToken=N.accessToken||void 0,$.secret=N.secret,$.nonce=N.nonce,$.pendingToken=N.pendingToken||null,$}_getIdTokenResponse(d){return Un(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Un(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Un(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,k.xO)(f)}return d}}function ip(g,d){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:sendVerificationCode",Ct(g,d))})).apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithPhoneNumber",Ct(g,d))})).apply(this,arguments)}function Gl(){return(Gl=(0,I.Z)(function*(g,d){const f=yield kr(g,"POST","/v1/accounts:signInWithPhoneNumber",Ct(g,d));if(f.temporaryProof)throw qr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const op={USER_NOT_FOUND:"user-not-found"};function Wl(){return(Wl=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithPhoneNumber",Ct(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),op)})).apply(this,arguments)}class ss extends ir{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new ss({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new ss({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function _c(g,d){return is.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function sp(g,d){return Gl.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ap(g,d){return Wl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:S}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:S}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}=d;return _||f||S||N?new ss({verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class nu{constructor(d){var f,_,S,N,$,se;const Oe=(0,k.zd)((0,k.pd)(d)),Xe=null!==(f=Oe.apiKey)&&void 0!==f?f:null,vt=null!==(_=Oe.oobCode)&&void 0!==_?_:null,ht=function zl(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Oe.mode)&&void 0!==S?S:null);V(Xe&&vt&&ht,"argument-error"),this.apiKey=Xe,this.operation=ht,this.code=vt,this.continueUrl=null!==(N=Oe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==($=Oe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(se=Oe.tenantId)&&void 0!==se?se:null}static parseLink(d){const f=function ql(g){const d=(0,k.zd)((0,k.pd)(g)).link,f=d?(0,k.zd)((0,k.pd)(d)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(g)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||f||d||g}(d);try{return new nu(f)}catch{return null}}}let yi=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return yc._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const S=nu.parseLink(_);return V(S,"argument-error"),yc._fromEmailAndCode(f,S.code,S.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Ri{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ki extends Ri{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ns extends ki{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return V("providerId"in f&&"signInMethod"in f,"argument-error"),Ni._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return V(d.idToken||d.accessToken,"argument-error"),Ni._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ns.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ns.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:$,providerId:se}=d;if(!_&&!S&&!f&&!N||!se)return null;try{return new Ns(se)._credential({idToken:f,accessToken:_,nonce:$,pendingToken:N})}catch{return null}}}let qo=(()=>{class g extends ki{constructor(){super("facebook.com")}static credential(f){return Ni._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),ru=(()=>{class g extends ki{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return Ni._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:S}=f;if(!_&&!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),vc=(()=>{class g extends ki{constructor(){super("github.com")}static credential(f){return Ni._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Ko extends ir{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Un(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Un(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Un(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S,pendingToken:N}=f;return _&&S&&N&&_===S?new Ko(_,N):null}static _create(d,f){return new Ko(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zr extends Ri{constructor(d){V(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Zr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Zr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Ko.fromJSON(d);return V(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Ko._create(_,f)}catch{return null}}}let Lr=(()=>{class g extends ki{constructor(){super("twitter.com")}static credential(f,_){return Ni._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=f;if(!_||!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function so(g,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signUp",Ct(g,d))})).apply(this,arguments)}class or{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,S=!1){return(0,I.Z)(function*(){const N=yield xt._fromIdTokenResponse(d,_,S),$=xh(_);return new or({user:N,providerId:$,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const S=xh(_);return new or({user:d,providerId:S,_tokenResponse:_,operationType:f})})()}}function xh(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function mn(){return(mn=(0,I.Z)(function*(g){var d;const f=hn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new or({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield so(f,{returnSecureToken:!0}),S=yield or._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ic extends k.ZR{constructor(d,f,_,S){var N;super(f.code,f.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:d.name,tenantId:null!==(N=d.tenantId)&&void 0!==N?N:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,S){return new Ic(d,f,_,S)}}function up(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ic._fromErrorAndOperation(g,N,d,_):N})}function Yr(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function iu(){return(iu=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);yield $t(!0,f,d);const{providerUserInfo:_}=yield yr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),S=Yr(_||[]);return f.providerData=f.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function oo(g,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,I.Z)(function*(g,d,f=!1){const _=yield rr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return or._forOperation(g,"link",_)})).apply(this,arguments)}function $t(g,d,f){return su.apply(this,arguments)}function su(){return(su=(0,I.Z)(function*(g,d,f){yield Zt(d);const S=!1===g?"provider-already-linked":"no-such-provider";V(Yr(d.providerData).has(f)===g,d.auth,S)})).apply(this,arguments)}function Rs(g,d){return ou.apply(this,arguments)}function ou(){return(ou=(0,I.Z)(function*(g,d,f=!1){var _;const{auth:S}=g,N="reauthenticate";try{const $=yield rr(g,up(S,N,d,g),f);V($.idToken,S,"internal-error");const se=ot($.idToken);V(se,S,"internal-error");const{sub:Oe}=se;return V(g.uid===Oe,S,"user-mismatch"),or._forOperation(g,N,$)}catch($){throw"auth/user-not-found"===(null===(_=$)||void 0===_?void 0:_.code)&&Te(S,"user-mismatch"),$}})).apply(this,arguments)}function ii(g,d){return au.apply(this,arguments)}function au(){return(au=(0,I.Z)(function*(g,d,f=!1){const _="signIn",S=yield up(g,_,d),N=yield or._fromIdTokenResponse(g,_,S);return f||(yield g._updateCurrentUser(N.user)),N})).apply(this,arguments)}function fn(g,d){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,I.Z)(function*(g,d){return ii(hn(g),d)})).apply(this,arguments)}function uu(g,d){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);return yield $t(!1,f,d.providerId),oo(f,d)})).apply(this,arguments)}function cu(g,d){return lu.apply(this,arguments)}function lu(){return(lu=(0,I.Z)(function*(g,d){return Rs((0,k.m9)(g),d)})).apply(this,arguments)}function wc(g,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,I.Z)(function*(g,d){return kr(g,"POST","/v1/accounts:signInWithCustomToken",Ct(g,d))})).apply(this,arguments)}function Zo(){return(Zo=(0,I.Z)(function*(g,d){const f=hn(g),_=yield wc(f,{token:d,returnSecureToken:!0}),S=yield or._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ee{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?Ft._fromServerResponse(d,f):Te(d,"internal-error")}}class Ft extends Ee{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new Ft(f)}}function du(g,d,f){var _;V((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),V(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(V(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(V(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function yn(){return(yn=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"PASSWORD_RESET",email:d};f&&du(_,S,f),yield Jn(_,S)})).apply(this,arguments)}function ao(){return(ao=(0,I.Z)(function*(g,d,f){yield Rn((0,k.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Yo(){return(Yo=(0,I.Z)(function*(g,d){yield fc((0,k.m9)(g),{oobCode:d})})).apply(this,arguments)}function Qo(g,d){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),_=yield Rn(f,{oobCode:d}),S=_.requestType;switch(V(S,f,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,f,"internal-error");default:V(_.email,f,"internal-error")}let N=null;return _.mfaInfo&&(N=Ee._fromServerResponse(hn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Zl(){return(Zl=(0,I.Z)(function*(g,d){const{data:f}=yield Qo((0,k.m9)(g),d);return f.email})).apply(this,arguments)}function _n(){return(_n=(0,I.Z)(function*(g,d,f){const _=hn(g),S=yield so(_,{returnSecureToken:!0,email:d,password:f}),N=yield or._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function ks(){return(ks=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"EMAIL_SIGNIN",email:d};V(f.handleCodeInApp,_,"argument-error"),f&&du(_,S,f),yield tu(_,S)})).apply(this,arguments)}function Xo(){return(Xo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=yi.credentialWithLink(d,f||Ne());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),fn(_,S)})).apply(this,arguments)}function lp(g,d){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:createAuthUri",Ct(g,d))})).apply(this,arguments)}function ea(){return(ea=(0,I.Z)(function*(g,d){const _={identifier:d,continueUri:at()?Ne():"http://localhost"},{signinMethods:S}=yield lp((0,k.m9)(g),_);return S||[]})).apply(this,arguments)}function ta(){return(ta=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),S={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&du(f.auth,S,d);const{email:N}=yield sr(f.auth,S);N!==g.email&&(yield g.reload())})).apply(this,arguments)}function gu(){return(gu=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&du(_.auth,N,f);const{email:$}=yield gc(_.auth,N);$!==g.email&&(yield g.reload())})).apply(this,arguments)}function mu(g,d){return xc.apply(this,arguments)}function xc(){return(xc=(0,I.Z)(function*(g,d){return rn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Nc(){return(Nc=(0,I.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,k.m9)(g),N={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},$=yield rr(_,mu(_.auth,N));_.displayName=$.displayName||null,_.photoURL=$.photoUrl||null;const se=_.providerData.find(({providerId:Oe})=>"password"===Oe);se&&(se.displayName=_.displayName,se.photoURL=_.photoURL),yield _._updateTokensIfNecessary($)})).apply(this,arguments)}function Os(g,d,f){return yu.apply(this,arguments)}function yu(){return(yu=(0,I.Z)(function*(g,d,f){const{auth:_}=g,N={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(N.email=d),f&&(N.password=f);const $=yield rr(g,en(_,N));yield g._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class Fr{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class an extends Fr{constructor(d,f,_,S){super(d,f,_),this.username=S}}class Ql extends Fr{constructor(d,f){super(d,"facebook.com",f)}}class Rc extends an{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Rh extends Fr{constructor(d,f){super(d,"google.com",f)}}class kc extends an{constructor(d,f,_){super(d,"twitter.com",f,_)}}function _u(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function jn(g){var d,f;if(!g)return null;const{providerId:_}=g,S=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},N=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const $=null===(f=null===(d=ot(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if($)return new Fr(N,"anonymous"!==$&&"custom"!==$?$:null)}if(!_)return null;switch(_){case"facebook.com":return new Ql(N,S);case"github.com":return new Rc(N,S);case"google.com":return new Rh(N,S);case"twitter.com":return new kc(N,S,g.screenName||null);case"custom":case"anonymous":return new Fr(N,null);default:return new Fr(N,_,S)}}(f)}class Fs{constructor(d,f,_){this.type=d,this.credential=f,this.auth=_}static _fromIdtoken(d,f){return new Fs("enroll",d,f)}static _fromMfaPendingCredential(d){return new Fs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Fs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Fs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Iu{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=hn(d),S=f.customData._serverResponse,N=(S.mfaInfo||[]).map(se=>Ee._fromServerResponse(_,se));V(S.mfaPendingCredential,_,"internal-error");const $=Fs._fromMfaPendingCredential(S.mfaPendingCredential);return new Iu($,N,function(){var se=(0,I.Z)(function*(Oe){const Xe=yield Oe._process(_,$);delete S.mfaInfo,delete S.mfaPendingCredential;const vt=Object.assign(Object.assign({},S),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(f.operationType){case"signIn":const ht=yield or._fromIdTokenResponse(_,f.operationType,vt);return yield _._updateCurrentUser(ht.user),ht;case"reauthenticate":return V(f.user,_,"internal-error"),or._forOperation(f.user,f.operationType,vt);default:Te(_,"internal-error")}});return function(Oe){return se.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,I.Z)(function*(){return f.signInResolver(d)})()}}function wu(g,d){return rn(g,"POST","/v2/accounts/mfaEnrollment:start",Ct(g,d))}class kh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Ee._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new kh(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Fs._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var _=this;return(0,I.Z)(function*(){const S=d,N=yield _.getSession(),$=yield rr(_.user,S._process(_.user.auth,N,f));return yield _.user._updateTokensIfNecessary($),_.user.reload()})()}unenroll(d){var f=this;return(0,I.Z)(function*(){var _;const S="string"==typeof d?d:d.uid,N=yield f.user.getIdToken(),$=yield rr(f.user,function td(g,d){return rn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(g,d))}(f.user.auth,{idToken:N,mfaEnrollmentId:S}));f.enrolledFactors=f.enrolledFactors.filter(({uid:se})=>se!==S),yield f.user._updateTokensIfNecessary($);try{yield f.user.reload()}catch(se){if("auth/user-token-expired"!==(null===(_=se)||void 0===_?void 0:_.code))throw se}})()}}const lo=new WeakMap,Vs="__sak";class Du{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Vs,"1"),this.storage.removeItem(Vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ra=(()=>{class g extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function na(){const g=(0,k.z$)();return ut(g)||Rt(g)}()&&function dn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ss(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&f(_,N,S)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((se,Oe,Xe)=>{this.notifyListeners(se,Xe)});const S=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(S);if(f.newValue!==se)null!==f.newValue?this.storage.setItem(S,f.newValue):this.storage.removeItem(S);else if(this.localCache[S]===f.newValue&&!_)return}const N=()=>{const se=this.storage.getItem(S);!_&&this.localCache[S]===se||this.notifyListeners(S,se)},$=this.storage.getItem(S);!function Bn(){return(0,k.w1)()&&10===document.documentMode}()||$===f.newValue||f.newValue===f.oldValue?N():setTimeout(N,10)}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var S=()=>super._set,N=this;return(0,I.Z)(function*(){yield S().call(N,f,_),N.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,S=this;return(0,I.Z)(function*(){const N=yield _().call(S,f);return S.localCache[f]=JSON.stringify(N),N})()}_remove(f){var _=()=>super._remove,S=this;return(0,I.Z)(function*(){yield _().call(S,f),delete S.localCache[f]})()}}return g.type="LOCAL",g})(),vi=(()=>{class g extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let id=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(N=>N.isListeningto(f));if(_)return _;const S=new g(f);return this.receivers.push(S),S}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,I.Z)(function*(){const S=f,{eventId:N,eventType:$,data:se}=S.data,Oe=_.handlersMap[$];if(!Oe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:$});const Xe=Array.from(Oe).map(function(){var ht=(0,I.Z)(function*(Wn){return Wn(S.origin,se)});return function(Wn){return ht.apply(this,arguments)}}()),vt=yield function sa(g){return Promise.all(g.map(function(){var d=(0,I.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(Xe);S.ports[0].postMessage({status:"done",eventId:N,eventType:$,response:vt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function oa(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class Pc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var S=this;return(0,I.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let $,se;return new Promise((Oe,Xe)=>{const vt=oa("",20);N.port1.start();const ht=setTimeout(()=>{Xe(new Error("unsupported_event"))},_);se={messageChannel:N,onMessage(Wn){const zn=Wn;if(zn.data.eventId===vt)switch(zn.data.status){case"ack":clearTimeout(ht),$=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Oe(zn.data.response);break;default:clearTimeout(ht),clearTimeout($),Xe(new Error("invalid_response"))}}},S.handlers.add(se),N.port1.addEventListener("message",se.onMessage),S.target.postMessage({eventType:d,eventId:vt,data:f},[N.port2])}).finally(()=>{se&&S.removeMessageHandler(se)})})()}}function Sn(){return window}function bu(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function aa(){return(aa=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const us="firebaseLocalStorageDb",cs="firebaseLocalStorage",Oc="fbase_key";class Us{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function ua(g,d){return g.transaction([cs],d?"readwrite":"readonly").objectStore(cs)}function ca(){const g=indexedDB.open(us,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(cs,{keyPath:Oc})}catch(S){f(S)}}),g.addEventListener("success",(0,I.Z)(function*(){const _=g.result;_.objectStoreNames.contains(cs)?d(_):(_.close(),yield function od(){const g=indexedDB.deleteDatabase(us);return new Us(g).toPromise()}(),d(yield ca()))}))})}function ls(g,d,f){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,I.Z)(function*(g,d,f){const _=ua(g,!0).put({[Oc]:d,value:f});return new Us(_).toPromise()})).apply(this,arguments)}function la(){return(la=(0,I.Z)(function*(g,d){const f=ua(g,!1).get(d),_=yield new Us(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function js(g,d){const f=ua(g,!0).delete(d);return new Us(f).toPromise()}const fo=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,I.Z)(function*(){return f.db||(f.db=yield ca()),f.db})()}_withRetries(f){var _=this;return(0,I.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield f(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,I.Z)(function*(){return bu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,I.Z)(function*(){f.receiver=id._getInstance(function Cu(){return bu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,I.Z)(function*(S,N){return{keyProcessed:(yield f._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,I.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,I.Z)(function*(){var _,S;if(f.activeServiceWorker=yield function Bs(){return aa.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Pc(f.activeServiceWorker);const N=yield f.sender._send("ping",{},800);!N||(null===(_=N[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,I.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Tu(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ca();return yield ls(f,Vs,"1"),yield js(f,Vs),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,I.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var S=this;return(0,I.Z)(function*(){return S._withPendingWrite((0,I.Z)(function*(){return yield S._withRetries(N=>ls(N,f,_)),S.localCache[f]=_,S.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=yield _._withRetries(N=>function Su(g,d){return la.apply(this,arguments)}(N,f));return _.localCache[f]=S,S})()}_remove(f){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(S=>js(S,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,I.Z)(function*(){const _=yield f._withRetries($=>{const se=ua($,!1).getAll();return new Us(se).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:$,value:se}of _)N.add($),JSON.stringify(f.localCache[$])!==JSON.stringify(se)&&(f.notifyListeners($,se),S.push($));for(const $ of Object.keys(f.localCache))f.localCache[$]&&!N.has($)&&(f.notifyListeners($,null),S.push($));return S})()}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function po(g,d){return rn(g,"POST","/v2/accounts/mfaSignIn:start",Ct(g,d))}function hs(){return(hs=(0,I.Z)(function*(g){return(yield rn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mo(g){return new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=S=>{const N=me("internal-error");N.customData=S,f(N)},_.type="text/javascript",_.charset="UTF-8",function go(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)})}function Mu(g){return`__${g}${Math.floor(1e6*Math.random())}`}const da=1e12;class un{constructor(d){this.auth=d,this.counter=da,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new dp(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||da;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||da))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,I.Z)(function*(){var _;return null===(_=f._widgets.get(d||da))||void 0===_||_.execute(),""})()}}class dp{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof d?document.getElementById(d):d;V(S,"argument-error",{appName:f}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wm(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hp=Mu("rcb"),Em=new Xt(3e4,6e4);class Ph{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Sn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return V(function kv(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Sn().grecaptcha):new Promise((_,S)=>{const N=Sn().setTimeout(()=>{S(me(d,"network-request-failed"))},Em.get());Sn()[hp]=()=>{Sn().clearTimeout(N),delete Sn()[hp];const se=Sn().grecaptcha;if(!se)return void S(me(d,"internal-error"));const Oe=se.render;se.render=(Xe,vt)=>{const ht=Oe(Xe,vt);return this.counter++,ht},this.hostLanguage=f,_(se)},mo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:hp,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(N),S(me(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Sn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vc{load(d){return(0,I.Z)(function*(){return new un(d)})()}clearedOneInstance(){}}const bm="recaptcha",Tm={theme:"light",type:"image"};class er{constructor(d,f=Object.assign({},Tm),_){this.parameters=f,this.type=bm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof d?document.getElementById(d):d;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vc:new Ph,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(N=>{const $=se=>{!se||(d.tokenChangeListeners.delete($),N(se))};d.tokenChangeListeners.add($),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Sn()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){V(at()&&!bu(),d.auth,"internal-error"),yield function Br(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Vr(g){return hs.apply(this,arguments)}(d.auth);V(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _o{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=ss._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function oi(){return(oi=(0,I.Z)(function*(g,d,f){const _=hn(g),S=yield fs(_,d,(0,k.m9)(f));return new _o(S,N=>fn(_,N))})).apply(this,arguments)}function ar(){return(ar=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);yield $t(!1,_,"phone");const S=yield fs(_.auth,d,(0,k.m9)(f));return new _o(S,N=>uu(_,N))})).apply(this,arguments)}function vo(){return(vo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=yield fs(_.auth,d,(0,k.m9)(f));return new _o(S,N=>cu(_,N))})).apply(this,arguments)}function fs(g,d,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.Z)(function*(g,d,f){var _;const S=yield f.verify();try{let N;if(V("string"==typeof S,g,"argument-error"),V(f.type===bm,g,"argument-error"),N="string"==typeof d?{phoneNumber:d}:d,"session"in N){const $=N.session;if("phoneNumber"in N)return V("enroll"===$.type,g,"internal-error"),(yield wu(g,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===$.type,g,"internal-error");const se=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(se,g,"missing-multi-factor-info"),(yield po(g,{mfaPendingCredential:$.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield ip(g,{phoneNumber:N.phoneNumber,recaptchaToken:S});return $}}finally{f._reset()}})).apply(this,arguments)}function fa(){return(fa=(0,I.Z)(function*(g,d){yield oo((0,k.m9)(g),d)})).apply(this,arguments)}let Jr=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=hn(f)}verifyPhoneNumber(f,_){return fs(this.auth,f,(0,k.m9)(_))}static credential(f,_){return ss._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:S}=f;return _&&S?ss._fromTokenResponse(_,S):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function gs(g,d){return d?ne(d):(V(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class ur extends ir{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Un(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Un(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Un(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Ur(g){return ii(g.auth,new ur(g),g.bypassAuthState)}function pa(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),Rs(f,new ur(g),g.bypassAuthState)}function Hs(g){return ad.apply(this,arguments)}function ad(){return(ad=(0,I.Z)(function*(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),oo(f,new ur(g),g.bypassAuthState)})).apply(this,arguments)}class Uc{constructor(d,f,_,S,N=!1){this.auth=d,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,I.Z)(function*(_,S){d.pendingPromise={resolve:_,reject:S};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(N){d.reject(N)}});return function(_,S){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,I.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:$,error:se,type:Oe}=d;if(se)return void f.reject(se);const Xe={auth:f.auth,requestUri:_,sessionId:S,tenantId:$||void 0,postBody:N||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Oe)(Xe))}catch(vt){f.reject(vt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Ur;case"linkViaPopup":case"linkViaRedirect":return Hs;case"reauthViaPopup":case"reauthViaRedirect":return pa;default:Te(this.auth,"internal-error")}}resolve(d){G(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){G(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Io=new Xt(2e3,1e4);function ga(){return(ga=(0,I.Z)(function*(g,d,f){const _=hn(g);je(g,d,Ri);const S=gs(_,f);return new Vt(_,"signInViaPopup",d,S).executeNotNull()})).apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);je(_.auth,d,Ri);const S=gs(_.auth,f);return new Vt(_.auth,"reauthViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}function Sr(){return(Sr=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);je(_.auth,d,Ri);const S=gs(_.auth,f);return new Vt(_.auth,"linkViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}let Vt=(()=>{class g extends Uc{constructor(f,_,S,N,$){super(f,_,N,$),this.provider=S,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,I.Z)(function*(){const _=yield f.execute();return V(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,I.Z)(function*(){G(1===f.filter.length,"Popup operations only handle one event");const _=oa();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(S=>{f.reject(S)}),f.resolver._isIframeWebStorageSupported(f.auth,S=>{S||f.reject(me(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Io.get())};f()}}return g.currentPopupAction=null,g})();const cr=new Map;class nt extends Uc{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,I.Z)(function*(){let _=cr.get(f.auth._key());if(!_){try{const N=(yield function Eo(g,d){return gt.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}cr.set(f.auth._key(),_)}return f.bypassAuthState||cr.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const S=yield _.auth._redirectUserForId(d.eventId);if(S)return _.user=S,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function gt(){return(gt=(0,I.Z)(function*(g,d){const f=ms(d),_=Vi(g);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(f));return yield _._remove(f),S})).apply(this,arguments)}function Gs(g,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,I.Z)(function*(g,d){return Vi(g)._set(ms(d),"true")})).apply(this,arguments)}function jr(g,d){cr.set(g._key(),d)}function Vi(g){return ne(g._redirectPersistence)}function ms(g){return z("pendingRedirect",g.config.apiKey,g.name)}function Pn(){return(Pn=(0,I.Z)(function*(g,d,f){const _=hn(g);je(g,d,Ri);const S=gs(_,f);return yield Gs(S,_),S._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Bi(){return(Bi=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);je(_.auth,d,Ri);const S=gs(_.auth,f);yield Gs(S,_.auth);const N=yield Fe(_);return S._openRedirect(_.auth,d,"reauthViaRedirect",N)})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);je(_.auth,d,Ri);const S=gs(_.auth,f);yield $t(!1,_,d.providerId),yield Gs(S,_.auth);const N=yield Fe(_);return S._openRedirect(_.auth,d,"linkViaRedirect",N)})).apply(this,arguments)}function W(){return(W=(0,I.Z)(function*(g,d){return yield hn(g)._initializationPromise,J(g,d,!1)})).apply(this,arguments)}function J(g,d){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,I.Z)(function*(g,d,f=!1){const _=hn(g),S=gs(_,d),$=yield new nt(_,S,f).execute();return $&&!f&&(delete $.user._redirectEventId,yield _._persistUserIfCurrent($.user),yield _._setRedirectUser(null,d)),$})).apply(this,arguments)}function Fe(g){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.Z)(function*(g){const d=oa(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class mt{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Hn(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!tr(d)){const S=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(me(this.auth,S))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dt(d))}saveEventToCache(d){this.cachedEventUids.add(dt(d)),this.lastProcessedEventTime=Date.now()}}function dt(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function tr({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Ar(g){return ys.apply(this,arguments)}function ys(){return(ys=(0,I.Z)(function*(g,d={}){return rn(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Ws=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jc=/^https?/;function zs(){return(zs=(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Ar(g);for(const f of d)try{if(Ii(f))return}catch{}Te(g,"unauthorized-domain")})).apply(this,arguments)}function Ii(g){const d=Ne(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const $=new URL(g);return""===$.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&$.hostname===_}if(!jc.test(f))return!1;if(Ws.test(g))return _===g;const S=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const _s=new Xt(3e4,6e4);function ma(){const g=Sn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Hc=null;function Sm(g){return Hc=Hc||function Nu(g){return new Promise((d,f)=>{var _,S,N;function $(){ma(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{ma(),f(me(g,"network-request-failed"))},timeout:_s.get()})}if(null!==(S=null===(_=Sn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)d(gapi.iframes.getContext());else{if(null===(N=Sn().gapi)||void 0===N||!N.load){const se=Mu("iframefcb");return Sn()[se]=()=>{gapi.load?$():f(me(g,"network-request-failed"))},mo(`https://apis.google.com/js/api.js?onload=${se}`).catch(Oe=>f(Oe))}$()}}).catch(d=>{throw Hc=null,d})}(g),Hc}const cd=new Xt(5e3,15e3),ld={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gc(g){const d=g.config;V(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?ln(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:d.apiKey,appName:g.name,v:ae.SDK_VERSION},S=xm.get(g.config.apiHost);S&&(_.eid=S);const N=g._getFrameworks();return N.length&&(_.fw=N.join(",")),`${f}?${(0,k.xO)(_).slice(1)}`}function pp(){return pp=(0,I.Z)(function*(g){const d=yield Sm(g),f=Sn().gapi;return V(f,g,"internal-error"),d.open({where:document.body,url:Gc(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ld,dontclear:!0},_=>new Promise(function(){var S=(0,I.Z)(function*(N,$){yield _.restyle({setHideOnLeave:!1});const se=me(g,"network-request-failed"),Oe=Sn().setTimeout(()=>{$(se)},cd.get());function Xe(){Sn().clearTimeout(Oe),N(_)}_.ping(Xe).then(Xe,()=>{$(se)})});return function(N,$){return S.apply(this,arguments)}}()))}),pp.apply(this,arguments)}const Fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dd{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qc(g,d,f,_,S,N){V(g.config.authDomain,g,"auth-domain-config-required"),V(g.config.apiKey,g,"invalid-api-key");const $={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ae.SDK_VERSION,eventId:S};if(d instanceof Ri){d.setDefaultLanguage(g.languageCode),$.providerId=d.providerId||"",(0,k.xb)(d.getCustomParameters())||($.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Oe,Xe]of Object.entries(N||{}))$[Oe]=Xe}if(d instanceof ki){const Oe=d.getScopes().filter(Xe=>""!==Xe);Oe.length>0&&($.scopes=Oe.join(","))}g.tenantId&&($.tid=g.tenantId);const se=$;for(const Oe of Object.keys(se))void 0===se[Oe]&&delete se[Oe];return`${function Bh({config:g}){return g.emulator?ln(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,k.xO)(se).slice(1)}`}const fd="webStorageSupport";class pd extends class jh{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new pd(d)}_finalizeEnroll(d,f,_){return function Eu(g,d){return rn(g,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function xu(g,d){return rn(g,"POST","/v2/accounts/mfaSignIn:finalize",Ct(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mp=(()=>{class g{constructor(){}static assertion(f){return pd._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Ru="@firebase/auth",gd="0.20.11";class $h{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,I.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{var S;d((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qs(){return window}function Pu(){return(Pu=(0,I.Z)(function*(g,d,f){var _;const{BuildInfo:S}=qs();G(d.sessionId,"AuthEvent did not contain a session ID");const N=yield yd(d.sessionId),$={};return Rt()?$.ibi=S.packageName:jt()?$.apn=S.packageName:Te(g,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=N,qc(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,$)})).apply(this,arguments)}function Kc(){return(Kc=(0,I.Z)(function*(g){const{BuildInfo:d}=qs(),f={};Rt()?f.iosBundleId=d.packageName:jt()?f.androidPackageName=d.packageName:Te(g,"operation-not-supported-in-this-environment"),yield Ar(g,f)})).apply(this,arguments)}function ya(){return(ya=(0,I.Z)(function*(g,d,f){const{cordova:_}=qs();let S=()=>{};try{yield new Promise((N,$)=>{let se=null;function Oe(){var ht;N();const Wn=null===(ht=_.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Wn&&Wn(),"function"==typeof f?.close&&f.close()}function Xe(){se||(se=window.setTimeout(()=>{$(me(g,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Xe()}d.addPassiveListener(Oe),document.addEventListener("resume",Xe,!1),jt()&&document.addEventListener("visibilitychange",vt,!1),S=()=>{d.removePassiveListener(Oe),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",vt,!1),se&&window.clearTimeout(se)}})}finally{S()}})).apply(this,arguments)}function yd(g){return _d.apply(this,arguments)}function _d(){return(_d=(0,I.Z)(function*(g){const d=Om(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Om(g){if(G(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(0,k.Pz)("authIdTokenMaxAge"),function dr(g){(0,ae._registerComponent)(new he.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),S=d.getProvider("heartbeat"),{apiKey:N,authDomain:$}=_.options;return((se,Oe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:se.name}),V(!$?.includes(":"),"argument-error",{appName:se.name});const Xe={apiKey:N,authDomain:$,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:es(g)},vt=new St(se,Oe,Xe);return function Re(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(ne);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(vt,f),vt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new he.wA("auth-internal",d=>{const f=hn(d.getProvider("auth").getImmediate());return new $h(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Ru,gd,function lr(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ae.registerVersion)(Ru,gd,"esm2017")}("Browser");class vd extends mt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,I.Z)(function*(){yield d.initPromise})()}}function Zc(g){return va.apply(this,arguments)}function va(){return(va=(0,I.Z)(function*(g){const d=yield Yc()._get(Qc(g));return d&&(yield Yc()._remove(Qc(g))),d})).apply(this,arguments)}function Ou(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*d.length);g.push(d.charAt(_))}return g.join("")}function Yc(){return ne(ra)}function Qc(g){return z("authEvent",g.config.apiKey,g.name)}function wi(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,k.zd)(f.join("?"))}function hr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Ia(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function Ed(g=(0,k.z$)()){return!("file:"!==Ia()&&"ionic:"!==Ia()&&"capacitor:"!==Ia()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function el(){try{const g=self.localStorage,d=oa();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Kh(g=(0,k.z$)()){return function Dd(){return(0,k.w1)()&&11===document?.documentMode}()||function Xc(g=(0,k.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,k.hl)()}catch{return So()&&(0,k.hl)()}return!1}function So(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tl(){return(function Ep(){return"http:"===Ia()||"https:"===Ia()}()||(0,k.ru)()||Ed())&&!function wa(){return(0,k.b$)()||(0,k.UG)()}()&&el()&&!So()}function Ao(){return Ed()&&typeof document<"u"}function Ea(){return(Ea=(0,I.Z)(function*(){return!!Ao()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const ui={LOCAL:"local",NONE:"none",SESSION:"session"},Ks=V,Yh="persistence";function xo(g){return nl.apply(this,arguments)}function nl(){return(nl=(0,I.Z)(function*(g){yield g._initializationPromise;const d=Da(),f=z(Yh,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Da(){var g;try{return(null===(g=function Zh(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const vs=V;class ci{constructor(){this.browserResolver=ne(class Ui{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vi,this._completeRedirectFn=J,this._overrideRedirectResult=jr}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){var $;G(null===($=N.eventManagers[d._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const se=qc(d,f,_,Ne(),S);return function gp(g,d,f,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-_)/2,0).toString();let se="";const Oe=Object.assign(Object.assign({},Fh),{width:_.toString(),height:S.toString(),top:N,left:$}),Xe=(0,k.z$)().toLowerCase();f&&(se=Kt(Xe)?"_blank":f),He(Xe)&&(d=d||"http://localhost",Oe.scrollbars="yes");const vt=Object.entries(Oe).reduce((Wn,[zn,Is])=>`${Wn}${zn}=${Is},`,"");if(function Or(g=(0,k.z$)()){var d;return Rt(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Xe)&&"_self"!==se)return function Vh(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",se),new dd(null);const ht=window.open(d||"",se,vt);V(ht,g,"popup-blocked");try{ht.focus()}catch{}return new dd(ht)}(d,se,oa())})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N._originValidation(d),function si(g){Sn().location.href=g}(qc(d,f,_,Ne(),S)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:S,promise:N}=this.eventManagers[f];return S?Promise.resolve(S):(G(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,I.Z)(function*(){const _=yield function Lh(g){return pp.apply(this,arguments)}(d),S=new mt(d);return _.register("authEvent",N=>(V(N?.authEvent,d,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:S},f.iframes[d._key()]=_,S})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(fd,{type:fd},S=>{var N;const $=null===(N=S?.[0])||void 0===N?void 0:N[fd];void 0!==$&&f(!!$),Te(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function $c(g){return zs.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return Ss()||ut()||Rt()}}),this.cordovaResolver=ne(class Lu{constructor(){this._redirectPersistence=vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=J,this._overrideRedirectResult=jr}_initialize(d){var f=this;return(0,I.Z)(function*(){const _=d._key();let S=f.eventManagers.get(_);return S||(S=new vd(d),f.eventManagers.set(_,S),f.attachCallbackListeners(d,S)),S})()}_openPopup(d){Te(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){!function zh(g){var d,f,_,S,N,$,se,Oe,Xe,vt;const ht=qs();V("function"==typeof(null===(d=ht?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(f=ht?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=ht?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Oe=null===(se=null===($=ht?.cordova)||void 0===$?void 0:$.plugins)||void 0===se?void 0:se.browsertab)||void 0===Oe?void 0:Oe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(vt=null===(Xe=ht?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===vt?void 0:vt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const $=yield N._initialize(d);yield $.initialized(),$.resetRedirect(),function bo(){cr.clear()}(),yield N._originValidation(d);const se=function _p(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Ou(),postBody:null,tenantId:g.tenantId,error:me(g,"no-auth-event")}}(d,_,S);yield function qh(g,d){return Yc()._set(Qc(g),d)}(d,se);const Oe=yield function ku(g,d,f){return Pu.apply(this,arguments)}(d,se,f),Xe=yield function Wh(g){const{cordova:d}=qs();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let S=null;_?d.plugins.browsertab.openUrl(g):S=d.InAppBrowser.open(g,function Qn(g=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(S)})})}(Oe);return function Pm(g,d,f){return ya.apply(this,arguments)}(d,$,Xe)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function km(g){return Kc.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=qs(),$=setTimeout((0,I.Z)(function*(){yield Zc(d),f.onEvent(hr())}),500),se=function(){var vt=(0,I.Z)(function*(ht){clearTimeout($);const Wn=yield Zc(d);let zn=null;Wn&&ht?.url&&(zn=function Lm(g,d){var f,_;const S=function Fm(g){const d=wi(g),f=d.link?decodeURIComponent(d.link):void 0,_=wi(f).link,S=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return wi(S).link||S||_||f||g}(d);if(S.includes("/__/auth/callback")){const N=wi(S),$=N.firebaseError?function Co(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,se=null===(_=null===(f=$?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Oe=se?me(se):null;return Oe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:S,postBody:null}}return null}(Wn,ht.url)),f.onEvent(zn||hr())});return function(Wn){return vt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,se);const Oe=S,Xe=`${N.packageName.toLowerCase()}://`;qs().handleOpenURL=function(){var vt=(0,I.Z)(function*(ht){if(ht.toLowerCase().startsWith(Xe)&&se({url:ht}),"function"==typeof Oe)try{Oe(ht)}catch(Wn){console.error(Wn)}});return function(ht){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vi,this._completeRedirectFn=J,this._overrideRedirectResult=jr}_initialize(d){var f=this;return(0,I.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(d,f,_,S)})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(d,f,_,S)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ao()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,I.Z)(function*(){if(d.underlyingResolver)return;const f=yield function bd(){return Ea.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Qh(g){return g.unwrap()}function Td(g){return Vu(g)}function Vu(g){const{_tokenResponse:d}=g instanceof k.ZR?g.customData:g;if(!d)return null;if(!(g instanceof k.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Jr.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=ru;break;case"facebook.com":_=qo;break;case"github.com":_=vc;break;case"twitter.com":_=Lr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:se,nonce:Oe}=d;return N||$||S||se?se?f.startsWith("saml.")?Ko._create(f,se):Ni._fromParams({providerId:f,signInMethod:f,pendingToken:se,idToken:S,accessToken:N}):new Ns(f).credential({idToken:S,accessToken:N,rawNonce:Oe}):null}return g instanceof k.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Gn(g,d){return d.catch(f=>{throw f instanceof k.ZR&&function Cd(g,d){var f,_;const S=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=d)||void 0===_?void 0:_.code))d.resolver=new Sd(g,function vn(g,d){var f;const _=(0,k.m9)(g),S=d;return V(d.customData.operationType,_,"argument-error"),V(null===(f=S.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Iu._fromError(_,S)}(g,d));else if(S){const N=Vu(d),$=d;N&&($.credential=N,$.tenantId=S.tenantId||void 0,$.email=S.email||void 0,$.phoneNumber=S.phoneNumber||void 0)}}(g,f),f}).then(f=>{const S=f.user;return{operationType:f.operationType,credential:Td(f),additionalUserInfo:_u(f),user:ji.getOrCreate(S)}})}function Ei(g,d){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,I.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>Gn(g,f.confirm(_))}})).apply(this,arguments)}class Sd{constructor(d,f){this.resolver=f,this.auth=function Jh(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Gn(Qh(this.auth),this.resolver.resolveSignIn(d))}}class ji{constructor(d){this._delegate=d,this.multiFactor=function ho(g){const d=(0,k.m9)(g);return lo.has(d)||lo.set(d,kh._fromUser(d)),lo.get(d)}(d)}static getOrCreate(d){return ji.USER_MAP.has(d)||ji.USER_MAP.set(d,new ji(d)),ji.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,I.Z)(function*(){return Gn(f.auth,uu(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,I.Z)(function*(){return Ei(_.auth,function Ir(g,d,f){return ar.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,I.Z)(function*(){return Gn(f.auth,function wo(g,d,f){return Sr.apply(this,arguments)}(f._delegate,d,ci))})()}linkWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield xo(hn(f.auth)),function E(g,d,f){return function b(g,d,f){return A.apply(this,arguments)}(g,d,f)}(f._delegate,d,ci)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,I.Z)(function*(){return Gn(f.auth,cu(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Ei(this.auth,function $n(g,d,f){return vo.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Gn(this.auth,function ge(g,d,f){return ai.apply(this,arguments)}(this._delegate,d,ci))}reauthenticateWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield xo(hn(f.auth)),function To(g,d,f){return function In(g,d,f){return Bi.apply(this,arguments)}(g,d,f)}(f._delegate,d,ci)})()}sendEmailVerification(d){return function Sc(g,d){return ta.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,I.Z)(function*(){return yield function vr(g,d){return iu.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function Yl(g,d){return Os((0,k.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function Ps(g,d){return Os((0,k.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ps(g,d){return fa.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Mc(g,d){return Nc.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Ac(g,d,f){return gu.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ji.USER_MAP=new WeakMap;const tn=V;let Mo=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=f.options;tn(S,"invalid-api-key",{appName:f.name}),tn(S,"invalid-api-key",{appName:f.name});const N=typeof window<"u"?ci:void 0;this._delegate=_.initialize({options:{persistence:$i(S,f.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function Xa(g,d,f){const _=hn(g);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const S=!!f?.disableWarnings,N=mi(d),{host:$,port:se}=function Nn(g){const d=mi(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:ts(_.substr(N.length+1))}}{const[N,$]=_.split(":");return{host:N,port:ts($)}}}(d);_.config.emulator={url:`${N}//${$}${null===se?"":`:${se}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:$,port:se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ns(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function Qr(g,d){return Yo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Qo(this._delegate,f)}confirmPasswordReset(f,_){return function fu(g,d,f){return ao.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var S=this;return(0,I.Z)(function*(){return Gn(S._delegate,function Jo(g,d,f){return _n.apply(this,arguments)}(S._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function pu(g,d){return ea.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Fi(g,d){return"EMAIL_SIGNIN"===nu.parseLink(d)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,I.Z)(function*(){tn(tl(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function P(g,d){return W.apply(this,arguments)}(f._delegate,ci);return _?Gn(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ip(g,d){hn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,S){const{next:N,error:$,complete:se}=No(f,_,S);return this._delegate.onAuthStateChanged(N,$,se)}onIdTokenChanged(f,_,S){const{next:N,error:$,complete:se}=No(f,_,S);return this._delegate.onIdTokenChanged(N,$,se)}sendSignInLinkToEmail(f,_){return function Tc(g,d,f){return ks.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function hu(g,d,f){return yn.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,I.Z)(function*(){let S;switch(function Dp(g,d){Ks(Object.values(ui).includes(d),g,"invalid-persistence-type"),(0,k.b$)()?Ks(d!==ui.SESSION,g,"unsupported-persistence-type"):(0,k.UG)()?Ks(d===ui.NONE,g,"unsupported-persistence-type"):So()?Ks(d===ui.NONE||d===ui.LOCAL&&(0,k.hl)(),g,"unsupported-persistence-type"):Ks(d===ui.NONE||el(),g,"unsupported-persistence-type")}(_._delegate,f),f){case ui.SESSION:S=vi;break;case ui.LOCAL:S=(yield ne(fo)._isAvailable())?fo:ra;break;case ui.NONE:S=F;break;default:return Te("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Gn(this._delegate,function Mh(g){return mn.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Gn(this._delegate,fn(this._delegate,f))}signInWithCustomToken(f){return Gn(this._delegate,function Ec(g,d){return Zo.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Gn(this._delegate,function _i(g,d,f){return fn((0,k.m9)(g),yi.credential(d,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return Gn(this._delegate,function cp(g,d,f){return Xo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Ei(this._delegate,function Bc(g,d,f){return oi.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,I.Z)(function*(){return tn(tl(),_._delegate,"operation-not-supported-in-this-environment"),Gn(_._delegate,function ud(g,d,f){return ga.apply(this,arguments)}(_._delegate,f,ci))})()}signInWithRedirect(f){var _=this;return(0,I.Z)(function*(){return tn(tl(),_._delegate,"operation-not-supported-in-this-environment"),yield xo(_._delegate),function kn(g,d,f){return function Oh(g,d,f){return Pn.apply(this,arguments)}(g,d,f)}(_._delegate,f,ci)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function bc(g,d){return Zl.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ui,g})();function No(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const S=_;return{next:$=>S($&&ji.getOrCreate($)),error:d,complete:f}}function $i(g,d){const f=function Fu(g,d){const f=Da();if(!f)return[];const _=z(Yh,g,d);switch(f.getItem(_)){case ui.NONE:return[F];case ui.LOCAL:return[fo,vi];case ui.SESSION:return[vi];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(fo)&&f.push(fo),typeof window<"u")for(const _ of[ra,vi])f.includes(_)||f.push(_);return f.includes(F)||f.push(F),f}class Xh{constructor(){this.providerId="phone",this._delegate=new Jr(Qh(ee.Z.auth()))}static credential(d,f){return Jr.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Xh.PHONE_SIGN_IN_METHOD=Jr.PHONE_SIGN_IN_METHOD,Xh.PROVIDER_ID=Jr.PROVIDER_ID;const bp=V;class Pv{constructor(d,f,_=ee.Z.app()){var S;bp(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new er(d,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ef(g){g.INTERNAL.registerComponent(new he.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new Mo(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yi,FacebookAuthProvider:qo,GithubAuthProvider:vc,GoogleAuthProvider:ru,OAuthProvider:Ns,SAMLAuthProvider:Zr,PhoneAuthProvider:Xh,PhoneMultiFactorGenerator:mp,RecaptchaVerifier:Pv,TwitterAuthProvider:Lr,Auth:Mo,AuthCredential:ir,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.24")}(ee.Z)},8306:(ft,Se,L)=>{L.d(Se,{y:()=>H});var I=L(2961),ee=L(727),k=L(8822),ae=L(4671);var he=L(2416),le=L(576),ve=L(2806);let H=(()=>{class xe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const fe=new xe;return fe.source=this,fe.operator=ze,fe}subscribe(ze,fe,pe){const qe=function We(xe){return xe&&xe instanceof I.Lv||function Z(xe){return xe&&(0,le.m)(xe.next)&&(0,le.m)(xe.error)&&(0,le.m)(xe.complete)}(xe)&&(0,ee.Nn)(xe)}(ze)?ze:new I.Hp(ze,fe,pe);return(0,ve.x)(()=>{const{operator:Qe,source:Te}=this;qe.add(Qe?Qe.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(ze){try{return this._subscribe(ze)}catch(fe){ze.error(fe)}}forEach(ze,fe){return new(fe=U(fe))((pe,qe)=>{const Qe=new I.Hp({next:Te=>{try{ze(Te)}catch(me){qe(me),Qe.unsubscribe()}},error:qe,complete:pe});this.subscribe(Qe)})}_subscribe(ze){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ze)}[k.L](){return this}pipe(...ze){return function de(xe){return 0===xe.length?ae.y:1===xe.length?xe[0]:function(ze){return xe.reduce((fe,pe)=>pe(fe),ze)}}(ze)(this)}toPromise(ze){return new(ze=U(ze))((fe,pe)=>{let qe;this.subscribe(Qe=>qe=Qe,Qe=>pe(Qe),()=>fe(qe))})}}return xe.create=Ae=>new xe(Ae),xe})();function U(xe){var Ae;return null!==(Ae=xe??he.v.Promise)&&void 0!==Ae?Ae:Promise}},7579:(ft,Se,L)=>{L.d(Se,{x:()=>he});var I=L(8306),ee=L(727);const ae=(0,L(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),de=L(2806);let he=(()=>{class ve extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Z=new le(this,this);return Z.operator=U,Z}_throwIfClosed(){if(this.closed)throw new ae}next(U){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(U)}})}error(U){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Z}=this;for(;Z.length;)Z.shift().error(U)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Z,isStopped:We,observers:xe}=this;return Z||We?ee.Lc:(this.currentObservers=null,xe.push(U),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(xe,U)}))}_checkFinalizedStatuses(U){const{hasError:Z,thrownError:We,isStopped:xe}=this;Z?U.error(We):xe&&U.complete()}asObservable(){const U=new I.y;return U.source=this,U}}return ve.create=(H,U)=>new le(H,U),ve})();class le extends he{constructor(H,U){super(),this.destination=H,this.source=U}next(H){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Z||Z.call(U,H)}error(H){var U,Z;null===(Z=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Z||Z.call(U,H)}complete(){var H,U;null===(U=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===U||U.call(H)}_subscribe(H){var U,Z;return null!==(Z=null===(U=this.source)||void 0===U?void 0:U.subscribe(H))&&void 0!==Z?Z:ee.Lc}}},2961:(ft,Se,L)=>{L.d(Se,{Hp:()=>ze,Lv:()=>Z});var I=L(576),ee=L(727),k=L(2416),ae=L(7849);function ie(){}const de=ve("C",void 0,void 0);function ve(Te,me,we){return{kind:Te,value:me,error:we}}var H=L(3410),U=L(2806);class Z extends ee.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,ee.Nn)(me)&&me.add(this)):this.destination=Qe}static create(me,we,je){return new ze(me,we,je)}next(me){this.isStopped?qe(function le(Te){return ve("N",Te,void 0)}(me),this):this._next(me)}error(me){this.isStopped?qe(function he(Te){return ve("E",void 0,Te)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?qe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function xe(Te,me){return We.call(Te,me)}class Ae{constructor(me){this.partialObserver=me}next(me){const{partialObserver:we}=this;if(we.next)try{we.next(me)}catch(je){fe(je)}}error(me){const{partialObserver:we}=this;if(we.error)try{we.error(me)}catch(je){fe(je)}else fe(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(we){fe(we)}}}class ze extends Z{constructor(me,we,je){let Be;if(super(),(0,I.m)(me)||!me)Be={next:me??void 0,error:we??void 0,complete:je??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(me),V.unsubscribe=()=>this.unsubscribe(),Be={next:me.next&&xe(me.next,V),error:me.error&&xe(me.error,V),complete:me.complete&&xe(me.complete,V)}):Be=me}this.destination=new Ae(Be)}}function fe(Te){k.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Te):(0,ae.h)(Te)}function qe(Te,me){const{onStoppedNotification:we}=k.v;we&&H.z.setTimeout(()=>we(Te,me))}const Qe={closed:!0,next:ie,error:function pe(Te){throw Te},complete:ie}},727:(ft,Se,L)=>{L.d(Se,{Lc:()=>de,w0:()=>ie,Nn:()=>he});var I=L(576);const k=(0,L(3888).d)(ve=>function(U){ve(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Z,We)=>`${We+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ae=L(8737);class ie{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const xe of U)xe.remove(this);else U.remove(this);const{initialTeardown:Z}=this;if((0,I.m)(Z))try{Z()}catch(xe){H=xe instanceof k?xe.errors:[xe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const xe of We)try{le(xe)}catch(Ae){H=H??[],Ae instanceof k?H=[...H,...Ae.errors]:H.push(Ae)}}if(H)throw new k(H)}}add(H){var U;if(H&&H!==this)if(this.closed)le(H);else{if(H instanceof ie){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(H)}}_hasParent(H){const{_parentage:U}=this;return U===H||Array.isArray(U)&&U.includes(H)}_addParent(H){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(H),U):U?[U,H]:H}_removeParent(H){const{_parentage:U}=this;U===H?this._parentage=null:Array.isArray(U)&&(0,ae.P)(U,H)}remove(H){const{_finalizers:U}=this;U&&(0,ae.P)(U,H),H instanceof ie&&H._removeParent(this)}}ie.EMPTY=(()=>{const ve=new ie;return ve.closed=!0,ve})();const de=ie.EMPTY;function he(ve){return ve instanceof ie||ve&&"closed"in ve&&(0,I.m)(ve.remove)&&(0,I.m)(ve.add)&&(0,I.m)(ve.unsubscribe)}function le(ve){(0,I.m)(ve)?ve():ve.unsubscribe()}},2416:(ft,Se,L)=>{L.d(Se,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Se,L)=>{L.d(Se,{E:()=>ee});const ee=new(L(8306).y)(ie=>ie.complete())},8996:(ft,Se,L)=>{L.d(Se,{D:()=>me});var I=L(8421),ee=L(5363),k=L(9468),de=L(8306),le=L(2202),ve=L(576),H=L(9672);function Z(we,je){if(!we)throw new Error("Iterable cannot be null");return new de.y(Be=>{(0,H.f)(Be,je,()=>{const V=we[Symbol.asyncIterator]();(0,H.f)(Be,je,()=>{V.next().then(ue=>{ue.done?Be.complete():Be.next(ue.value)})},0,!0)})})}var We=L(3670),xe=L(8239),Ae=L(1144),ze=L(6495),fe=L(2206),pe=L(4532),qe=L(3260);function me(we,je){return je?function Te(we,je){if(null!=we){if((0,We.c)(we))return function ae(we,je){return(0,I.Xf)(we).pipe((0,k.R)(je),(0,ee.Q)(je))}(we,je);if((0,Ae.z)(we))return function he(we,je){return new de.y(Be=>{let V=0;return je.schedule(function(){V===we.length?Be.complete():(Be.next(we[V++]),Be.closed||this.schedule())})})}(we,je);if((0,xe.t)(we))return function ie(we,je){return(0,I.Xf)(we).pipe((0,k.R)(je),(0,ee.Q)(je))}(we,je);if((0,fe.D)(we))return Z(we,je);if((0,ze.T)(we))return function U(we,je){return new de.y(Be=>{let V;return(0,H.f)(Be,je,()=>{V=we[le.h](),(0,H.f)(Be,je,()=>{let ue,G;try{({value:ue,done:G}=V.next())}catch(Y){return void Be.error(Y)}G?Be.complete():Be.next(ue)},0,!0)}),()=>(0,ve.m)(V?.return)&&V.return()})}(we,je);if((0,qe.L)(we))return function Qe(we,je){return Z((0,qe.Q)(we),je)}(we,je)}throw(0,pe.z)(we)}(we,je):(0,I.Xf)(we)}},8421:(ft,Se,L)=>{L.d(Se,{Xf:()=>We});var I=L(655),ee=L(1144),k=L(8239),ae=L(8306),ie=L(3670),de=L(2206),he=L(4532),le=L(6495),ve=L(3260),H=L(576),U=L(7849),Z=L(8822);function We(Te){if(Te instanceof ae.y)return Te;if(null!=Te){if((0,ie.c)(Te))return function xe(Te){return new ae.y(me=>{const we=Te[Z.L]();if((0,H.m)(we.subscribe))return we.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.z)(Te))return function Ae(Te){return new ae.y(me=>{for(let we=0;we<Te.length&&!me.closed;we++)me.next(Te[we]);me.complete()})}(Te);if((0,k.t)(Te))return function ze(Te){return new ae.y(me=>{Te.then(we=>{me.closed||(me.next(we),me.complete())},we=>me.error(we)).then(null,U.h)})}(Te);if((0,de.D)(Te))return pe(Te);if((0,le.T)(Te))return function fe(Te){return new ae.y(me=>{for(const we of Te)if(me.next(we),me.closed)return;me.complete()})}(Te);if((0,ve.L)(Te))return function qe(Te){return pe((0,ve.Q)(Te))}(Te)}throw(0,he.z)(Te)}function pe(Te){return new ae.y(me=>{(function Qe(Te,me){var we,je,Be,V;return(0,I.mG)(this,void 0,void 0,function*(){try{for(we=(0,I.KL)(Te);!(je=yield we.next()).done;)if(me.next(je.value),me.closed)return}catch(ue){Be={error:ue}}finally{try{je&&!je.done&&(V=we.return)&&(yield V.call(we))}finally{if(Be)throw Be.error}}me.complete()})})(Te,me).catch(we=>me.error(we))})}},6451:(ft,Se,L)=>{L.d(Se,{T:()=>de});var I=L(6131),ee=L(8421),k=L(515),ae=L(7669),ie=L(8996);function de(...he){const le=(0,ae.yG)(he),ve=(0,ae._6)(he,1/0),H=he;return H.length?1===H.length?(0,ee.Xf)(H[0]):(0,I.J)(ve)((0,ie.D)(H,le)):k.E}},5403:(ft,Se,L)=>{L.d(Se,{x:()=>ee});var I=L(2961);function ee(ae,ie,de,he,le){return new k(ae,ie,de,he,le)}class k extends I.Lv{constructor(ie,de,he,le,ve,H){super(ie),this.onFinalize=ve,this.shouldUnsubscribe=H,this._next=de?function(U){try{de(U)}catch(Z){ie.error(Z)}}:super._next,this._error=le?function(U){try{le(U)}catch(Z){ie.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(U){ie.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(ft,Se,L)=>{L.d(Se,{U:()=>k});var I=L(4482),ee=L(5403);function k(ae,ie){return(0,I.e)((de,he)=>{let le=0;de.subscribe((0,ee.x)(he,ve=>{he.next(ae.call(ie,ve,le++))}))})}},6131:(ft,Se,L)=>{L.d(Se,{J:()=>H});var I=L(4004),ee=L(8421),k=L(4482),ae=L(9672),ie=L(5403),he=L(576);function le(U,Z,We=1/0){return(0,he.m)(Z)?le((xe,Ae)=>(0,I.U)((ze,fe)=>Z(xe,ze,Ae,fe))((0,ee.Xf)(U(xe,Ae))),We):("number"==typeof Z&&(We=Z),(0,k.e)((xe,Ae)=>function de(U,Z,We,xe,Ae,ze,fe,pe){const qe=[];let Qe=0,Te=0,me=!1;const we=()=>{me&&!qe.length&&!Qe&&Z.complete()},je=V=>Qe<xe?Be(V):qe.push(V),Be=V=>{ze&&Z.next(V),Qe++;let ue=!1;(0,ee.Xf)(We(V,Te++)).subscribe((0,ie.x)(Z,G=>{Ae?.(G),ze?je(G):Z.next(G)},()=>{ue=!0},void 0,()=>{if(ue)try{for(Qe--;qe.length&&Qe<xe;){const G=qe.shift();fe?(0,ae.f)(Z,fe,()=>Be(G)):Be(G)}we()}catch(G){Z.error(G)}}))};return U.subscribe((0,ie.x)(Z,je,()=>{me=!0,we()})),()=>{pe?.()}}(xe,Ae,U,We)))}var ve=L(4671);function H(U=1/0){return le(ve.y,U)}},5363:(ft,Se,L)=>{L.d(Se,{Q:()=>ae});var I=L(9672),ee=L(4482),k=L(5403);function ae(ie,de=0){return(0,ee.e)((he,le)=>{he.subscribe((0,k.x)(le,ve=>(0,I.f)(le,ie,()=>le.next(ve),de),()=>(0,I.f)(le,ie,()=>le.complete(),de),ve=>(0,I.f)(le,ie,()=>le.error(ve),de)))})}},3099:(ft,Se,L)=>{L.d(Se,{B:()=>ie});var I=L(8421),ee=L(7579),k=L(2961),ae=L(4482);function ie(he={}){const{connector:le=(()=>new ee.x),resetOnError:ve=!0,resetOnComplete:H=!0,resetOnRefCountZero:U=!0}=he;return Z=>{let We,xe,Ae,ze=0,fe=!1,pe=!1;const qe=()=>{xe?.unsubscribe(),xe=void 0},Qe=()=>{qe(),We=Ae=void 0,fe=pe=!1},Te=()=>{const me=We;Qe(),me?.unsubscribe()};return(0,ae.e)((me,we)=>{ze++,!pe&&!fe&&qe();const je=Ae=Ae??le();we.add(()=>{ze--,0===ze&&!pe&&!fe&&(xe=de(Te,U))}),je.subscribe(we),!We&&ze>0&&(We=new k.Hp({next:Be=>je.next(Be),error:Be=>{pe=!0,qe(),xe=de(Qe,ve,Be),je.error(Be)},complete:()=>{fe=!0,qe(),xe=de(Qe,H),je.complete()}}),(0,I.Xf)(me).subscribe(We))})(Z)}}function de(he,le,...ve){if(!0===le)return void he();if(!1===le)return;const H=new k.Hp({next:()=>{H.unsubscribe(),he()}});return le(...ve).subscribe(H)}},9468:(ft,Se,L)=>{L.d(Se,{R:()=>ee});var I=L(4482);function ee(k,ae=0){return(0,I.e)((ie,de)=>{de.add(k.schedule(()=>ie.subscribe(de),ae))})}},4408:(ft,Se,L)=>{L.d(Se,{o:()=>ie});var I=L(727);class ee extends I.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const k={setInterval(de,he,...le){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(de,he,...le):setInterval(de,he,...le)},clearInterval(de){const{delegate:he}=k;return(he?.clearInterval||clearInterval)(de)},delegate:void 0};var ae=L(8737);class ie extends ee{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){var ve;if(this.closed)return this;this.state=he;const H=this.id,U=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(U,H,le)),this.pending=!0,this.delay=le,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(U,this.id,le),this}requestAsyncId(he,le,ve=0){return k.setInterval(he.flush.bind(he,this),ve)}recycleAsyncId(he,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(he,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let H,ve=!1;try{this.work(he)}catch(U){ve=!0,H=U||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Se,L)=>{L.d(Se,{v:()=>k});var I=L(6063);class ee{constructor(ie,de=ee.now){this.schedulerActionCtor=ie,this.now=de}schedule(ie,de=0,he){return new this.schedulerActionCtor(this,ie).schedule(he,de)}}ee.now=I.l.now;class k extends ee{constructor(ie,de=ee.now){super(ie,de),this.actions=[],this._active=!1}flush(ie){const{actions:de}=this;if(this._active)return void de.push(ie);let he;this._active=!0;do{if(he=ie.execute(ie.state,ie.delay))break}while(ie=de.shift());if(this._active=!1,he){for(;ie=de.shift();)ie.unsubscribe();throw he}}}},4986:(ft,Se,L)=>{L.d(Se,{z:()=>k});var I=L(4408);const k=new(L(7565).v)(I.o)},6063:(ft,Se,L)=>{L.d(Se,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(ft,Se,L)=>{L.d(Se,{z:()=>I});const I={setTimeout(ee,k,...ae){const{delegate:ie}=I;return ie?.setTimeout?ie.setTimeout(ee,k,...ae):setTimeout(ee,k,...ae)},clearTimeout(ee){const{delegate:k}=I;return(k?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(ft,Se,L)=>{L.d(Se,{h:()=>ee});const ee=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Se,L)=>{L.d(Se,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,Se,L)=>{L.d(Se,{_6:()=>de,yG:()=>ie});var I=L(576);function k(he){return he[he.length-1]}function ie(he){return function ee(he){return he&&(0,I.m)(he.schedule)}(k(he))?he.pop():void 0}function de(he,le){return"number"==typeof k(he)?he.pop():le}},8737:(ft,Se,L)=>{function I(ee,k){if(ee){const ae=ee.indexOf(k);0<=ae&&ee.splice(ae,1)}}L.d(Se,{P:()=>I})},3888:(ft,Se,L)=>{function I(ee){const ae=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Se,{d:()=>I})},2806:(ft,Se,L)=>{L.d(Se,{O:()=>ae,x:()=>k});var I=L(2416);let ee=null;function k(ie){if(I.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),ie(),de){const{errorThrown:he,error:le}=ee;if(ee=null,he)throw le}}else ie()}function ae(ie){I.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(ft,Se,L)=>{function I(ee,k,ae,ie=0,de=!1){const he=k.schedule(function(){ae(),de?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(he),!de)return he}L.d(Se,{f:()=>I})},4671:(ft,Se,L)=>{function I(ee){return ee}L.d(Se,{y:()=>I})},1144:(ft,Se,L)=>{L.d(Se,{z:()=>I});const I=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ft,Se,L)=>{L.d(Se,{D:()=>ee});var I=L(576);function ee(k){return Symbol.asyncIterator&&(0,I.m)(k?.[Symbol.asyncIterator])}},576:(ft,Se,L)=>{function I(ee){return"function"==typeof ee}L.d(Se,{m:()=>I})},3670:(ft,Se,L)=>{L.d(Se,{c:()=>k});var I=L(8822),ee=L(576);function k(ae){return(0,ee.m)(ae[I.L])}},6495:(ft,Se,L)=>{L.d(Se,{T:()=>k});var I=L(2202),ee=L(576);function k(ae){return(0,ee.m)(ae?.[I.h])}},8239:(ft,Se,L)=>{L.d(Se,{t:()=>ee});var I=L(576);function ee(k){return(0,I.m)(k?.then)}},3260:(ft,Se,L)=>{L.d(Se,{L:()=>ae,Q:()=>k});var I=L(655),ee=L(576);function k(ie){return(0,I.FC)(this,arguments,function*(){const he=ie.getReader();try{for(;;){const{value:le,done:ve}=yield(0,I.qq)(he.read());if(ve)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(le)}}finally{he.releaseLock()}})}function ae(ie){return(0,ee.m)(ie?.getReader)}},4482:(ft,Se,L)=>{L.d(Se,{e:()=>k});var I=L(576);function k(ae){return ie=>{if(function ee(ae){return(0,I.m)(ae?.lift)}(ie))return ie.lift(function(de){try{return ae(de,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ft,Se,L)=>{L.d(Se,{h:()=>k});var I=L(2416),ee=L(3410);function k(ae){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=I.v;if(!ie)throw ae;ie(ae)})}},4532:(ft,Se,L)=>{function I(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>I})},655:(ft,Se,L)=>{function ae(G,Y){var ne={};for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&Y.indexOf(te)<0&&(ne[te]=G[te]);if(null!=G&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(te=Object.getOwnPropertySymbols(G);Re<te.length;Re++)Y.indexOf(te[Re])<0&&Object.prototype.propertyIsEnumerable.call(G,te[Re])&&(ne[te[Re]]=G[te[Re]])}return ne}function le(G,Y,ne,te){return new(ne||(ne=Promise))(function(Ne,at){function zt(Xt){try{Ye(te.next(Xt))}catch(ln){at(ln)}}function Pt(Xt){try{Ye(te.throw(Xt))}catch(ln){at(ln)}}function Ye(Xt){Xt.done?Ne(Xt.value):function Re(Ne){return Ne instanceof ne?Ne:new ne(function(at){at(Ne)})}(Xt.value).then(zt,Pt)}Ye((te=te.apply(G,Y||[])).next())})}function fe(G){return this instanceof fe?(this.v=G,this):new fe(G)}function pe(G,Y,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,te=ne.apply(G,Y||[]),Ne=[];return Re={},at("next"),at("throw"),at("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function at(Gt){te[Gt]&&(Re[Gt]=function(qt){return new Promise(function(Dr,Ct){Ne.push([Gt,qt,Dr,Ct])>1||zt(Gt,qt)})})}function zt(Gt,qt){try{!function Pt(Gt){Gt.value instanceof fe?Promise.resolve(Gt.value.v).then(Ye,Xt):ln(Ne[0][2],Gt)}(te[Gt](qt))}catch(Dr){ln(Ne[0][3],Dr)}}function Ye(Gt){zt("next",Gt)}function Xt(Gt){zt("throw",Gt)}function ln(Gt,qt){Gt(qt),Ne.shift(),Ne.length&&zt(Ne[0][0],Ne[0][1])}}function Qe(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Y=G[Symbol.asyncIterator];return Y?Y.call(G):(G=function Z(G){var Y="function"==typeof Symbol&&Symbol.iterator,ne=Y&&G[Y],te=0;if(ne)return ne.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&te>=G.length&&(G=void 0),{value:G&&G[te++],done:!G}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Ne){ne[Ne]=G[Ne]&&function(at){return new Promise(function(zt,Pt){!function Re(Ne,at,zt,Pt){Promise.resolve(Pt).then(function(Ye){Ne({value:Ye,done:zt})},at)}(zt,Pt,(at=G[Ne](at)).done,at.value)})}}}L.d(Se,{FC:()=>pe,KL:()=>Qe,_T:()=>ae,mG:()=>le,qq:()=>fe})},4650:(ft,Se,L)=>{L.d(Se,{$8M:()=>xu,AFp:()=>OD,AaK:()=>le,CHM:()=>du,CZH:()=>Ih,EJc:()=>qb,EpF:()=>CI,F4k:()=>cg,FYo:()=>ty,FiY:()=>P,G48:()=>Qb,GfV:()=>wn,JOm:()=>Ui,KtG:()=>hu,LFG:()=>kn,Lbi:()=>FD,Lck:()=>U_,MAs:()=>rh,NdJ:()=>Fy,OlP:()=>un,Q6J:()=>Ba,QGY:()=>Ly,Qsj:()=>At,R0b:()=>Yi,RDi:()=>g,Rgc:()=>qf,SBq:()=>df,TTD:()=>ki,TgZ:()=>ag,X6Q:()=>gv,Xpm:()=>De,Y36:()=>Ud,YNc:()=>Ry,Yjl:()=>_e,Yz7:()=>qt,ZZ4:()=>pm,_UZ:()=>Py,_c5:()=>Av,_uU:()=>Zy,aQg:()=>Sv,cJS:()=>Ct,cg1:()=>Al,dDg:()=>Dh,dqk:()=>Jt,eFA:()=>uw,eoX:()=>lc,g9A:()=>Qa,h0i:()=>uc,hGG:()=>ww,hij:()=>Ga,ifc:()=>ot,ip1:()=>Fl,kL8:()=>a_,lG2:()=>z,lri:()=>sw,oAB:()=>xt,oxw:()=>Uy,q4F:()=>wt,qLn:()=>Ue,qZA:()=>ug,rWj:()=>cm,sBO:()=>Xb,sIi:()=>xf,s_b:()=>zg,soG:()=>sm,vHH:()=>Ae,wAp:()=>lt,xp6:()=>cn,zSh:()=>Rd,zs3:()=>ll});var I=L(7579),ee=L(727),k=L(8306),ae=L(6451),ie=L(3099);function de(r){for(let s in r)if(r[s]===de)return s;throw Error("Could not find renamed property on target object.")}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ve(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const H=de({__forward_ref__:de});function U(r){return r.__forward_ref__=U,r.toString=function(){return le(this())},r}function Z(r){return function We(r){return"function"==typeof r&&r.hasOwnProperty(H)&&r.__forward_ref__===U}(r)?r():r}class Ae extends Error{constructor(s,o){super(function ze(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function fe(r){return"string"==typeof r?r:null==r?"":String(r)}function me(r,s){throw new Ae(-201,!1)}function Pt(r,s){null==r&&function Ye(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function qt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Ct(r){return{providers:r.providers||[],imports:r.imports||[]}}function rn(r){return ti(r,ni)||ti(r,qr)}function ti(r,s){return r.hasOwnProperty(s)?r[s]:null}function Cs(r){return r&&(r.hasOwnProperty(zr)||r.hasOwnProperty(Go))?r[zr]:null}const ni=de({\u0275prov:de}),zr=de({\u0275inj:de}),qr=de({ngInjectableDef:de}),Go=de({ngInjectorDef:de});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let yr;function Fn(r){const s=yr;return yr=r,s}function Kr(r,s,o){const u=rn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Je.Optional?null:void 0!==s?s:void me(le(r))}function Cn(r){return{toString:r}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),ot=(()=>{return(r=ot||(ot={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",ot;var r})();const Jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pr={},Tt=[],Xi=de({\u0275cmp:de}),Zt=de({\u0275dir:de}),gi=de({\u0275pipe:de}),Yt=de({\u0275mod:de}),Vn=de({\u0275fac:de}),Tr=de({__NG_ELEMENT_ID__:de});let tt=0;function De(r){return Cn(()=>{const o=!0===r.standalone,u={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||Tt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||ot.Emulated,id:"c"+tt++,styles:r.styles||Tt,_:null,setInput:null,schemas:r.schemas||null,tView:null},h=r.dependencies,m=r.features;return l.inputs=F(r.inputs,u),l.outputs=F(r.outputs),m&&m.forEach(v=>v(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(It).filter(_t):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(ut).filter(_t):null,l})}function It(r){return K(r)||He(r)}function _t(r){return null!==r}function xt(r){return Cn(()=>({type:r.type,bootstrap:r.bootstrap||Tt,declarations:r.declarations||Tt,imports:r.imports||Tt,exports:r.exports||Tt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function F(r,s){if(null==r)return Pr;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,s&&(s[l]=h)}return o}const z=De;function _e(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function K(r){return r[Xi]||null}function He(r){return r[Zt]||null}function ut(r){return r[gi]||null}function Jn(r){return Array.isArray(r)&&"object"==typeof r[1]}function Cr(r){return Array.isArray(r)&&!0===r[1]}function tu(r){return 0!=(8&r.flags)}function zo(r){return 2==(2&r.flags)}function gc(r){return 1==(1&r.flags)}function _r(r){return null!==r.template}function Th(r){return 0!=(256&r[2])}function yi(r,s){return r.hasOwnProperty(Vn)?r[Vn]:null}class Ri{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ki(){return Ns}function Ns(r){return r.type.prototype.ngOnChanges&&(r.setInput=ru),qo}function qo(){const r=Ah(this),s=r?.current;if(s){const o=r.previous;if(o===Pr)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function ru(r,s,o,u){const l=Ah(r)||function Ko(r,s){return r[vc]=s}(r,{previous:Pr,current:null}),h=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],w=m[v];h[v]=new Ri(w&&w.currentValue,s,m===Pr),r[u]=s}ki.ngInherit=!0;const vc="__ngSimpleChanges__";function Ah(r){return r[vc]||null}function mn(r){for(;Array.isArray(r);)r=r[0];return r}function vr(r,s){return mn(s[r.index])}function oo(r,s){return r.data[s]}function $t(r,s){const o=s[r];return Jn(o)?o:o[0]}function Rs(r){return 64==(64&r[2])}function ii(r,s){return null==s?null:r[s]}function au(r){r[18]=0}function fn(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const Dt={lFrame:Mc(null),bindingsEnabled:!0};function Li(){return Dt.bindingsEnabled}function Ee(){return Dt.lFrame.lView}function Ft(){return Dt.lFrame.tView}function du(r){return Dt.lFrame.contextLView=r,r[8]}function hu(r){return Dt.lFrame.contextLView=null,r}function yn(){let r=fu();for(;null!==r&&64===r.type;)r=r.parent;return r}function fu(){return Dt.lFrame.currentTNode}function Qr(r,s){const o=Dt.lFrame;o.currentTNode=r,o.isParent=s}function Yo(){return Dt.lFrame.isParent}function ks(){return Dt.lFrame.bindingIndex++}function lp(r,s){const o=Dt.lFrame;o.bindingIndex=o.bindingRootIndex=r,pu(s)}function pu(r){Dt.lFrame.currentDirectiveIndex=r}function ta(r){Dt.lFrame.currentQueryIndex=r}function Ac(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function gu(r,s,o){if(o&Je.SkipSelf){let l=s,h=r;for(;!(l=l.parent,null!==l||o&Je.Host||(l=Ac(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,r=h}const u=Dt.lFrame=xc();return u.currentTNode=s,u.lView=r,!0}function mu(r){const s=xc(),o=r[1];Dt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function xc(){const r=Dt.lFrame,s=null===r?null:r.child;return null===s?Mc(r):s}function Mc(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Nc(){const r=Dt.lFrame;return Dt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Yl=Nc;function Ps(){const r=Nc();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function jn(){return Dt.lFrame.selectedIndex}function Fr(r){Dt.lFrame.selectedIndex=r}function vu(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:x}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=x&&(r.destroyHooks||(r.destroyHooks=[])).push(o,x)}}function Ls(r,s,o){co(r,s,3,o)}function uo(r,s,o,u){(3&r[2])===o&&co(r,s,o,u)}function Xl(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function co(r,s,o,u){const h=u??-1,m=s.length-1;let v=0;for(let w=void 0!==u?65535&r[18]:0;w<m;w++)if("number"==typeof s[w+1]){if(v=s[w],null!=u&&v>=u)break}else s[w]<0&&(r[18]+=65536),(v<h||-1==h)&&(ed(r,o,s,w),r[18]=(4294901760&r[18])+w+2),w++}function ed(r,s,o,u){const l=o[u]<0,h=o[u+1],v=r[l?-o[u]:o[u]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class as{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function ho(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],v=o[u++];r.setAttribute(s,m,v,h)}else{const h=l,m=o[++u];Du(h)?r.setProperty(s,h,m):r.setAttribute(s,h,m),u++}}return u}function Vs(r){return 3===r||4===r||6===r}function Du(r){return 64===r.charCodeAt(0)}function na(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||nd(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function nd(r,s,o,u,l){let h=0,m=r.length;if(-1===s)m=-1;else for(;h<r.length;){const v=r[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<r.length;){const v=r[h];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(r[h+1]=l));if(u===r[h+1])return void(r[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(r.splice(m,0,s),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==l&&r.splice(h++,0,l)}function rd(r){return-1!==r}function Xn(r){return 32767&r}function ia(r,s){let o=function ra(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let vi=!0;function sa(r){const s=vi;return vi=r,s}let Sn=0;const si={};function Bs(r,s){const o=Tu(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,aa(u.data,r),aa(s,null),aa(u.blueprint,null));const l=Cu(r,s),h=r.injectorIndex;if(rd(l)){const m=Xn(l),v=ia(l,s),w=v[1].data;for(let C=0;C<8;C++)s[h+C]=v[m+C]|w[m+C]}return s[h+8]=l,h}function aa(r,s){r.push(0,0,0,0,0,0,0,0,s)}function Tu(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Cu(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=po(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function us(r,s,o){!function bu(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Tr)&&(u=o[Tr]),null==u&&(u=o[Tr]=Sn++);const l=255&u;s.data[r+(l>>5)]|=1<<l}(r,s,o)}function cs(r,s,o){if(o&Je.Optional||void 0!==r)return r;me()}function Oc(r,s,o,u){if(o&Je.Optional&&void 0===u&&(u=null),0==(o&(Je.Self|Je.Host))){const l=r[9],h=Fn(void 0);try{return l?l.get(s,u,o&Je.Optional):Kr(s,u,o&Je.Optional)}finally{Fn(h)}}return cs(u,0,o)}function Us(r,s,o,u=Je.Default,l){if(null!==r){if(1024&s[2]){const m=function fo(r,s,o,u,l){let h=r,m=s;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const v=ua(h,m,o,u|Je.Self,si);if(v!==si)return v;let w=h.parent;if(!w){const C=m[21];if(C){const x=C.get(o,si,u);if(x!==si)return x}w=po(m),m=m[15]}h=w}return l}(r,s,o,u,si);if(m!==si)return m}const h=ua(r,s,o,u,si);if(h!==si)return h}return Oc(s,o,u,l)}function ua(r,s,o,u,l){const h=function Lc(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Tr)?r[Tr]:void 0;return"number"==typeof s?s>=0?255&s:Fc:s}(o);if("function"==typeof h){if(!gu(s,r,u))return u&Je.Host?cs(l,0,u):Oc(s,o,u,l);try{const m=h(u);if(null!=m||u&Je.Optional)return m;me()}finally{Yl()}}else if("number"==typeof h){let m=null,v=Tu(r,s),w=-1,C=u&Je.Host?s[16][6]:null;for((-1===v||u&Je.SkipSelf)&&(w=-1===v?Cu(r,s):s[v+8],-1!==w&&la(u,!1)?(m=s[1],v=Xn(w),s=ia(w,s)):v=-1);-1!==v;){const x=s[1];if(Su(h,v,x.data)){const R=od(v,s,o,m,u,C);if(R!==si)return R}w=s[v+8],-1!==w&&la(u,s[1].data[v+8]===C)&&Su(h,v,s)?(m=x,v=Xn(w),s=ia(w,s)):v=-1}}return l}function od(r,s,o,u,l,h){const m=s[1],v=m.data[r+8],x=function ca(r,s,o,u,l){const h=r.providerIndexes,m=s.data,v=1048575&h,w=r.directiveStart,x=h>>20,j=l?v+x:r.directiveEnd;for(let Q=u?v:v+x;Q<j;Q++){const ye=m[Q];if(Q<w&&o===ye||Q>=w&&ye.type===o)return Q}if(l){const Q=m[w];if(Q&&_r(Q)&&Q.type===o)return w}return null}(v,m,o,null==u?zo(v)&&vi:u!=m&&0!=(3&v.type),l&Je.Host&&h===v);return null!==x?ls(s,m,x,v):si}function ls(r,s,o,u){let l=r[o];const h=s.data;if(function Fs(r){return r instanceof as}(l)){const m=l;m.resolving&&function qe(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${r}${o}`)}(function pe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():fe(r)}(h[o]));const v=sa(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?Fn(m.injectImpl):null;gu(r,u,Je.Default);try{l=r[o]=m.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Jl(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Ns(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==w&&Fn(w),sa(v),m.resolving=!1,Yl()}}return l}function Su(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function la(r,s){return!(r&Je.Self||r&Je.Host&&s)}class js{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Us(this._tNode,this._lView,s,u,o)}}function Fc(){return new js(yn(),Ee())}function po(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function xu(r){return function sd(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(Vs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===s)return o[l+1];l+=2}}}return null}(yn(),r)}const hs="__parameters__";function yo(r,s,o){return Cn(()=>{const u=function Mu(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return v.annotation=m,v;function v(w,C,x){const R=w.hasOwnProperty(hs)?w[hs]:Object.defineProperty(w,hs,{value:[]})[hs];for(;R.length<=x;)R.push(null);return(R[x]=R[x]||[]).push(m),w}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class un{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=qt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ar(r,s){r.forEach(o=>Array.isArray(o)?ar(o,s):s(o))}function $n(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function vo(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}const cr={},nt="__NG_DI_FLAG__",Eo="ngTempTokenPath",Gs=/\n/gm,bo="__source";let jr;function Vi(r){const s=jr;return jr=r,s}function ms(r,s=Je.Default){if(void 0===jr)throw new Ae(-203,!1);return null===jr?Kr(r,void 0,s):jr.get(r,s&Je.Optional?null:void 0,s)}function kn(r,s=Je.Default){return(function Ji(){return yr}()||ms)(Z(r),s)}function To(r){const s=[];for(let o=0;o<r.length;o++){const u=Z(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Ae(900,!1);let l,h=Je.Default;for(let m=0;m<u.length;m++){const v=u[m],w=Bi(v);"number"==typeof w?-1===w?l=v.token:h|=w:l=v}s.push(kn(l,h))}else s.push(kn(u))}return s}function In(r,s){return r[nt]=s,r.prototype[nt]=s,r}function Bi(r){return r[nt]}const P=In(yo("Optional"),8),J=In(yo("SkipSelf"),4);var Ui=(()=>((Ui=Ui||{})[Ui.Important=1]="Important",Ui[Ui.DashCase=2]="DashCase",Ui))();const Ru=new Map;let gd=0;const qs="__ngContext__";function Mr(r,s){Jn(s)?(r[qs]=s[20],function lr(r){Ru.set(r[20],r)}(s)):r[qs]=s}function vd(r,s){return undefined(r,s)}function va(r){const s=r[3];return Cr(s)?s[3]:s}function Yc(r){return Co(r[13])}function Qc(r){return Co(r[4])}function Co(r){for(;null!==r&&!Cr(r);)r=r[4];return r}function wi(r,s,o,u,l){if(null!=u){let h,m=!1;Cr(u)?h=u:Jn(u)&&(m=!0,u=u[0]);const v=mn(u);0===r&&null!==o?null==l?bd(s,o,v):Ao(s,o,v,l||null,!0):1===r&&null!==o?Ao(s,o,v,l||null,!0):2===r?function Td(r,s,o){const u=Ks(r,s);u&&function Zh(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,v,m):3===r&&s.destroyNode(v),null!=h&&function Bu(r,s,o,u,l){const h=o[7];h!==mn(o)&&wi(s,r,u,h,l);for(let v=10;v<o.length;v++){const w=o[v];Vu(w[1],w,r,s,u,h)}}(s,r,h,o,l)}}function hr(r,s,o){return r.createElement(s,o)}function Ed(r,s){const o=r[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,fn(l,-1)),o.splice(u,1)}function wa(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const l=u[17];null!==l&&l!==r&&Ed(l,u),s>0&&(r[o-1][4]=u[4]);const h=vo(r,10+s);!function Ip(r,s){Vu(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Dd(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Vu(r,s,o,3,null,null),function wp(r){let s=r[13];if(!s)return Xc(r[1],r);for(;s;){let o=null;if(Jn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)Jn(s)&&Xc(s[1],s),s=s[3];null===s&&(s=r),Jn(s)&&Xc(s[1],s),o=s&&s[4]}s=o}}(s)}}function Xc(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function el(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof as)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=l[h[m]],w=h[m+1];try{w.call(v)}finally{}}else try{h.call(l)}finally{}}}}(r,s),function Kh(r,s){const o=r.cleanup,u=s[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],v="function"==typeof m?m(s):mn(s[m]),w=u[l=o[h+2]],C=o[h+3];"boolean"==typeof C?v.removeEventListener(o[h],w,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&Cr(s[3])){o!==s[3]&&Ed(o,s);const u=s[19];null!==u&&u.detachView(r)}!function md(r){Ru.delete(r[20])}(s)}}function So(r,s,o){return function tl(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=r.data[u.directiveStart].encapsulation;if(l===ot.None||l===ot.Emulated)return null}return vr(u,o)}(r,s.parent,o)}function Ao(r,s,o,u,l){r.insertBefore(s,o,u,l)}function bd(r,s,o){r.appendChild(s,o)}function Ea(r,s,o,u,l){null!==u?Ao(r,s,o,u,l):bd(r,s,o)}function Ks(r,s){return r.parentNode(s)}let ef,nl=function xo(r,s,o){return 40&r.type?vr(r,o):null};function vs(r,s,o,u){const l=So(r,u,s),h=s[11],v=function Dp(r,s,o){return nl(r,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let w=0;w<o.length;w++)Ea(h,l,o[w],v,!1);else Ea(h,l,o,v,!1)}function ci(r,s){if(null!==s){const o=s.type;if(3&o)return vr(s,r);if(4&o)return Jh(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return ci(r,u);{const l=r[s.index];return Cr(l)?Jh(-1,l):mn(l)}}if(32&o)return vd(s,r)()||mn(r[s.index]);{const u=Qh(r,s);return null!==u?Array.isArray(u)?u[0]:ci(va(r[16]),u):ci(r,s.next)}}return null}function Qh(r,s){return null!==s?r[16][6].projection[s.projection]:null}function Jh(r,s){const o=10+r+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return ci(u,l)}return s[7]}function Cd(r,s,o,u,l,h,m){for(;null!=o;){const v=u[o.index],w=o.type;if(m&&0===s&&(v&&Mr(mn(v),u),o.flags|=4),64!=(64&o.flags))if(8&w)Cd(r,s,o.child,u,l,h,!1),wi(s,r,l,v,h);else if(32&w){const C=vd(o,u);let x;for(;x=C();)wi(s,r,l,x,h);wi(s,r,l,v,h)}else 16&w?Ei(r,s,u,o,l,h):wi(s,r,l,v,h);o=m?o.projectionNext:o.next}}function Vu(r,s,o,u,l,h){Cd(o,u,r.firstChild,s,l,h,!1)}function Ei(r,s,o,u,l,h){const m=o[16],w=m[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)wi(s,r,l,w[C],h);else Cd(r,s,w,m[3],l,h,!0)}function ji(r,s,o){r.setAttribute(s,"style",o)}function tn(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function g(r){ef=r}const Zm=new un("ENVIRONMENT_INITIALIZER"),Ym=new un("INJECTOR",-1),Qm=new un("INJECTOR_DEF_TYPES");class cf{get(s,o=cr){if(o===cr){const u=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw u.name="NullInjectorError",u}return o}}function Gi(...r){return{\u0275providers:Jm(0,r)}}function Jm(r,...s){const o=[],u=new Set;let l;return ar(s,h=>{const m=h;ju(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Xm(l,o),o}function Xm(r,s){for(let o=0;o<r.length;o++){const{providers:l}=r[o];ar(l,h=>{s.push(h)})}}function ju(r,s,o,u){if(!(r=Z(r)))return!1;let l=null,h=Cs(r);const m=!h&&K(r);if(h||m){if(m&&!m.standalone)return!1;l=r}else{const w=r.ngModule;if(h=Cs(w),!h)return!1;l=w}const v=u.has(l);if(m){if(v)return!1;if(u.add(l),m.dependencies){const w="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const C of w)ju(C,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!v){let C;u.add(l);try{ar(h.imports,x=>{ju(x,s,o,u)&&(C||(C=[]),C.push(x))})}finally{}void 0!==C&&Xm(C,s)}if(!v){const C=yi(l)||(()=>new l);s.push({provide:l,useFactory:C,deps:Tt},{provide:Qm,useValue:l,multi:!0},{provide:Zm,useValue:()=>kn(l),multi:!0})}const w=h.providers;null==w||v||ar(w,x=>{s.push(x)})}}return l!==r&&void 0!==r.providers}const Rw=de({provide:String,useValue:de});function lf(r){return null!==r&&"object"==typeof r&&Rw in r}function $u(r){return"function"==typeof r}const Rd=new un("Set Injector scope."),Rp={},Hv={};let pr;function Ca(){return void 0===pr&&(pr=new cf),pr}class Wi{}class kp extends Wi{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oe(s,m=>this.processProvider(m)),this.records.set(Ym,Gu(void 0,this)),l.has("environment")&&this.records.set(Wi,Gu(void 0,this));const h=this.records.get(Rd);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Qm.multi,Tt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=Vi(this),u=Fn(void 0);try{return s()}finally{Vi(o),Fn(u)}}get(s,o=cr,u=Je.Default){this.assertNotDestroyed();const l=Vi(this),h=Fn(void 0);try{if(!(u&Je.SkipSelf)){let v=this.records.get(s);if(void 0===v){const w=function Pw(r){return"function"==typeof r||"object"==typeof r&&r instanceof un}(s)&&rn(s);v=w&&this.injectableDefInScope(w)?Gu(ey(s),Rp):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Je.Self?Ca():this.parent).get(s,o=u&Je.Optional&&o===cr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Eo]=m[Eo]||[]).unshift(le(s)),l)throw m;return function E(r,s,o,u){const l=r[Eo];throw s[bo]&&l.unshift(s[bo]),r.message=function b(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=le(s);if(Array.isArray(s))l=s.map(le).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):le(v)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(Gs,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[Eo]=null,r}(m,s,"R3InjectorError",this.source)}throw m}finally{Fn(h),Vi(l)}}resolveInjectorInitializers(){const s=Vi(this),o=Fn(void 0);try{const u=this.get(Zm.multi,Tt,Je.Self);for(const l of u)l()}finally{Vi(s),Fn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(le(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(s){let o=$u(s=Z(s))?s:Z(s&&s.provide);const u=function nr(r){return lf(r)?Gu(void 0,r.useValue):Gu(function Hu(r,s,o){let u;if($u(r)){const l=Z(r);return yi(l)||ey(l)}if(lf(r))u=()=>Z(r.useValue);else if(function $v(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...To(r.deps||[]));else if(function jv(r){return!(!r||!r.useExisting)}(r))u=()=>kn(Z(r.useExisting));else{const l=Z(r&&(r.useClass||r.provide));if(!function rt(r){return!!r.deps}(r))return yi(l)||ey(l);u=()=>new l(...To(r.deps))}return u}(r),Rp)}(s);if($u(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Gu(void 0,Rp,!0),l.factory=()=>To(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===Rp&&(o.value=Hv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function bt(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=Z(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function ey(r){const s=rn(r),o=null!==s?s.factory:yi(r);if(null!==o)return o;if(r instanceof un)throw new Ae(204,!1);if(r instanceof Function)return function Me(r){const s=r.length;if(s>0)throw function fs(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new Ae(204,!1);const o=function br(r){const s=r&&(r[ni]||r[qr]);if(s){const o=function kr(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Ae(204,!1)}function Gu(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Ze(r){return!!r.\u0275providers}function oe(r,s){for(const o of r)Array.isArray(o)?oe(o,s):Ze(o)?oe(o.\u0275providers,s):s(o)}class gr{}class Ow{resolveComponentFactory(s){throw function Gv(r){const s=Error(`No component factory found for ${le(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Pp=(()=>{class r{}return r.NULL=new Ow,r})();function Lw(){return il(yn(),Ee())}function il(r,s){return new df(vr(r,s))}let df=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Lw,r})();class ty{}let At=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function kd(){const r=Ee(),o=$t(yn().index,r);return(Jn(o)?o:r)[11]}(),r})(),zv=(()=>{class r{}return r.\u0275prov=qt({token:r,providedIn:"root",factory:()=>null}),r})();class wn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const wt=new wn("14.2.12"),sl={};function An(r){return r.ngOriginalError}class Ue{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&An(s);for(;o&&An(o);)o=An(o);return o||null}}function re(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||r.charCodeAt(l+h)<=32)return l}o=l+1}}const ws="ng-template";function $w(r,s,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==re(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Pd(r){return 4===r.type&&r.value!==ws}function Wu(r,s,o){return s===(4!==r.type||o?r.value:ws)}function Hw(r,s,o){let u=4;const l=r.attrs||[],h=function Ww(r){for(let s=0;s<r.length;s++)if(Vs(r[s]))return s;return r.length}(l);let m=!1;for(let v=0;v<s.length;v++){const w=s[v];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!Wu(r,w,o)||""===w&&1===s.length){if($r(u))return!1;m=!0}}else{const C=8&u?w:s[++v];if(8&u&&null!==r.attrs){if(!$w(r.attrs,C,o)){if($r(u))return!1;m=!0}continue}const R=Kv(8&u?"class":w,l,Pd(r),o);if(-1===R){if($r(u))return!1;m=!0;continue}if(""!==C){let j;j=R>h?"":l[R+1].toLowerCase();const Q=8&u?j:null;if(Q&&-1!==re(Q,C,0)||2&u&&C!==j){if($r(u))return!1;m=!0}}}}else{if(!m&&!$r(u)&&!$r(w))return!1;if(m&&$r(w))continue;m=!1,u=w|1&u}}return $r(u)||m}function $r(r){return 0==(1&r)}function Kv(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let h=!1;for(;l<s.length;){const m=s[l];if(m===r)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Di(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Fp(r,s,o=!1){for(let u=0;u<s.length;u++)if(Hw(r,s[u],o))return!0;return!1}function zu(r,s){return r?":not("+s.trim()+")":s}function Yv(r){let s=r[0],o=1,u=2,l="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const v=r[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!$r(m)&&(s+=zu(h,l),l=""),u=m,h=h||!$r(u);o++}return""!==l&&(s+=zu(h,l)),s}const ct={};function cn(r){sy(Ft(),Ee(),jn()+r,!1)}function sy(r,s,o,u){if(!u)if(3==(3&s[2])){const h=r.preOrderCheckHooks;null!==h&&Ls(s,h,o)}else{const h=r.preOrderHooks;null!==h&&uo(s,h,0,o)}Fr(o)}function oy(r,s=null,o=null,u){const l=Od(r,s,o,u);return l.resolveInjectorInitializers(),l}function Od(r,s=null,o=null,u,l=new Set){const h=[o||Tt,Gi(r)];return u=u||("object"==typeof r?void 0:le(r)),new kp(h,s||Ca(),u||null,l)}let ll=(()=>{class r{static create(o,u){if(Array.isArray(o))return oy({name:""},u,o,"");{const l=o.name??"";return oy({name:l},o.parent,o.providers,l)}}}return r.THROW_IF_NOT_FOUND=cr,r.NULL=new cf,r.\u0275prov=qt({token:r,providedIn:"any",factory:()=>kn(Ym)}),r.__NG_ELEMENT_ID__=-1,r})();function Ud(r,s=Je.Default){const o=Ee();return null===o?kn(r,s):Us(yn(),o,Z(r),s)}function Dn(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],h=o[u+1];if(-1!==h){const m=r.data[h];ta(l),m.contentQueries(2,s[h],h)}}}function vf(r,s,o,u,l,h,m,v,w,C,x){const R=s.blueprint.slice();return R[0]=l,R[2]=76|u,(null!==x||r&&1024&r[2])&&(R[2]|=1024),au(R),R[3]=R[15]=r,R[8]=o,R[10]=m||r&&r[10],R[11]=v||r&&r[11],R[12]=w||r&&r[12]||null,R[9]=C||r&&r[9]||null,R[6]=h,R[20]=function $h(){return gd++}(),R[21]=x,R[16]=2==s.type?r[16]:R,R}function Wd(r,s,o,u,l){let h=r.data[s];if(null===h)h=function yl(r,s,o,u,l){const h=fu(),m=Yo(),w=r.data[s]=function hI(r,s,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=w),null!==h&&(m?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w)),w}(r,s,o,u,l),function cp(){return Dt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function ao(){const r=Dt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Qr(h,!0),h}function zd(r,s,o,u){if(0===o)return-1;const l=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function zp(r,s,o){mu(s);try{const u=r.viewQuery;null!==u&&Jp(1,u,o);const l=r.template;null!==l&&Oo(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Dn(r,s),r.staticViewQueries&&Jp(2,r.viewQuery,o);const h=r.components;null!==h&&function Wp(r,s){for(let o=0;o<s.length;o++)vI(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,Ps()}}function Pa(r,s,o,u){const l=s[2];if(128!=(128&l)){mu(s);try{au(s),function Tc(r){return Dt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Oo(r,s,o,2,u);const m=3==(3&l);if(m){const C=r.preOrderCheckHooks;null!==C&&Ls(s,C,null)}else{const C=r.preOrderHooks;null!==C&&uo(s,C,0,null),Xl(s,0)}if(function uE(r){for(let s=Yc(r);null!==s;s=Qc(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],h=l[3];0==(512&l[2])&&fn(h,1),l[2]|=512}}}(s),function _I(r){for(let s=Yc(r);null!==s;s=Qc(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Rs(u)&&Pa(l,u,l.template,u[8])}}(s),null!==r.contentQueries&&Dn(r,s),m){const C=r.contentCheckHooks;null!==C&&Ls(s,C)}else{const C=r.contentHooks;null!==C&&uo(s,C,1),Xl(s,1)}!function tE(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Fr(~l);else{const h=l,m=o[++u],v=o[++u];lp(m,h),v(2,s[h])}}}finally{Fr(-1)}}(r,s);const v=r.components;null!==v&&function Gp(r,s){for(let o=0;o<s.length;o++)Rr(r,s[o])}(s,v);const w=r.viewQuery;if(null!==w&&Jp(2,w,u),m){const C=r.viewCheckHooks;null!==C&&Ls(s,C)}else{const C=r.viewHooks;null!==C&&uo(s,C,2),Xl(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,fn(s[3],-1))}finally{Ps()}}}function Oo(r,s,o,u,l){const h=jn(),m=2&u;try{Fr(-1),m&&s.length>22&&sy(r,s,22,!1),o(u,l)}finally{Fr(h)}}function qp(r,s,o){!Li()||(function Ot(r,s,o,u){const l=o.directiveStart,h=o.directiveEnd;r.firstCreatePass||Bs(o,s),Mr(u,s);const m=o.initialInputs;for(let v=l;v<h;v++){const w=r.data[v],C=_r(w);C&&sE(s,o,w);const x=ls(s,r,v,o);Mr(x,s),null!==m&&oE(0,v-l,x,w,0,m),C&&($t(o.index,s)[8]=x)}}(r,s,o,vr(o,s)),128==(128&o.flags)&&function iE(r,s,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function Cc(){return Dt.lFrame.currentDirectiveIndex}();try{Fr(h);for(let v=u;v<l;v++){const w=r.data[v],C=s[v];pu(v),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&wf(w,C)}}finally{Fr(-1),pu(m)}}(r,s,o))}function Kp(r,s,o=vr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],v=-1===m?o(s,r):r[m];r[l++]=v}}}function _l(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=If(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function If(r,s,o,u,l,h,m,v,w,C){const x=22+u,R=x+l,j=function nE(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:ct);return o}(x,R),Q="function"==typeof C?C():C;return j[1]={type:r,blueprint:j,template:o,queries:null,viewQuery:v,declTNode:s,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:Q,incompleteFirstPass:!1}}function Oa(r,s,o){for(let u in r)if(r.hasOwnProperty(u)){const l=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function fI(r,s){const u=s.directiveEnd,l=r.data,h=s.attrs,m=[];let v=null,w=null;for(let C=s.directiveStart;C<u;C++){const x=l[C],R=x.inputs,j=null===h||Pd(s)?null:aE(R,h);m.push(j),v=Oa(R,C,v),w=Oa(x.outputs,C,w)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=w}function qd(r,s){const o=$t(s,r);16&o[2]||(o[2]|=32)}function vl(r,s,o,u){let l=!1;if(Li()){const h=function Ef(r,s,o){const u=r.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Fp(o,m.selectors,!1)&&(l||(l=[]),us(Bs(o,s),r,m.type),_r(m)?(Kd(r,o),l.unshift(m)):l.push(m))}return l}(r,s,o),m=null===u?null:{"":-1};if(null!==h){l=!0,by(o,r.data.length,h.length);for(let x=0;x<h.length;x++){const R=h[x];R.providersResolver&&R.providersResolver(R)}let v=!1,w=!1,C=zd(r,s,h.length,null);for(let x=0;x<h.length;x++){const R=h[x];o.mergedAttrs=na(o.mergedAttrs,R.hostAttrs),Ty(r,o,s,C,R),yI(C,R,m),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const j=R.type.prototype;!v&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!w&&(j.ngOnChanges||j.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}fI(r,o)}m&&function Zp(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const h=o[s[l+1]];if(null==h)throw new Ae(-301,!1);u.push(s[l],h)}}}(o,u,m)}return o.mergedAttrs=na(o.mergedAttrs,o.attrs),l}function mI(r,s,o,u,l,h){const m=h.hostBindings;if(m){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const w=~s.index;(function rE(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=w&&v.push(w),v.push(u,l,m)}}function wf(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Kd(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function yI(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;_r(s)&&(o[""]=r)}}function by(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function Ty(r,s,o,u,l){r.data[u]=l;const h=l.factory||(l.factory=yi(l.type)),m=new as(h,_r(l),Ud);r.blueprint[u]=m,o[u]=m,mI(r,s,0,u,zd(r,o,l.hostVars,ct),l)}function sE(r,s,o){const u=vr(s,r),l=_l(o),h=r[10],m=Ki(r,vf(r,l,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=m}function oE(r,s,o,u,l,h){const m=h[s];if(null!==m){const v=u.setInput;for(let w=0;w<m.length;){const C=m[w++],x=m[w++],R=m[w++];null!==v?u.setInput(o,R,C,x):o[x]=R}}}function aE(r,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,r[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function Zd(r,s,o,u){return new Array(r,!0,!1,s,null,0,u,o,null,null)}function Rr(r,s){const o=$t(s,r);if(Rs(o)){const u=o[1];48&o[2]?Pa(u,o,u.template,o[8]):o[5]>0&&Df(o)}}function Df(r){for(let u=Yc(r);null!==u;u=Qc(u))for(let l=10;l<u.length;l++){const h=u[l];if(Rs(h))if(512&h[2]){const m=h[1];Pa(m,h,m.template,h[8])}else h[5]>0&&Df(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=$t(o[u],r);Rs(l)&&l[5]>0&&Df(l)}}function vI(r,s){const o=$t(s,r),u=o[1];(function bf(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),zp(u,o,o[8])}function Ki(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Tf(r){for(;r;){r[2]|=32;const s=va(r);if(Th(r)&&!s)return r;r=s}return null}function Cf(r,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{Pa(r,s,r.template,o)}catch(m){throw u&&Yd(s,m),m}finally{l.end&&l.end()}}function Jp(r,s,o){ta(0),s(r,o)}function Cy(r){return r[7]||(r[7]=[])}function II(r){return r.cleanup||(r.cleanup=[])}function Yd(r,s){const o=r[9],u=o?o.get(Ue,null):null;u&&u.handleError(s)}function Sf(r,s,o,u,l){for(let h=0;h<o.length;){const m=o[h++],v=o[h++],w=s[m],C=r.data[m];null!==C.setInput?C.setInput(w,l,u,v):w[v]=l}}function Fa(r,s,o){const u=function Yr(r,s){return mn(s[r])}(s,r);!function Lu(r,s,o){r.setValue(s,o)}(r[11],u,o)}function Af(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?l=ve(l,v):2==h&&(u=ve(u,v+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function Qd(r,s,o,u,l=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(mn(h)),Cr(h))for(let v=10;v<h.length;v++){const w=h[v],C=w[1].firstChild;null!==C&&Qd(w[1],w,C,u)}const m=o.type;if(8&m)Qd(r,s,o.child,u);else if(32&m){const v=vd(o,s);let w;for(;w=v();)u.push(w)}else if(16&m){const v=Qh(s,o);if(Array.isArray(v))u.push(...v);else{const w=va(s[16]);Qd(w[1],w,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Jd{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Qd(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Cr(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(wa(s,u),vo(o,u))}this._attachedToViewContainer=!1}Dd(this._lView[1],this._lView)}onDestroy(s){!function Dy(r,s,o,u){const l=Cy(s);null===o?l.push(u):(l.push(o),r.firstCreatePass&&II(r).push(u,l.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){Tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Cf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wd(r,s){Vu(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=s}}class lE extends Jd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Cf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Xp extends Pp{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=K(s);return new Lo(o,this.ngModule)}}function EI(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Xd{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,sl,u);return l!==sl||o===sl?l:this.parentInjector.get(s,o,u)}}class Lo extends gr{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function qn(r){return r.map(Yv).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return EI(this.componentDef.inputs)}get outputs(){return EI(this.componentDef.outputs)}create(s,o,u,l){let h=(l=l||this.ngModule)instanceof Wi?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Xd(s,h):s,v=m.get(ty,null);if(null===v)throw new Ae(407,!1);const w=m.get(zv,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=u?function Qt(r,s,o){return r.selectRootElement(s,o===ot.ShadowDom)}(C,u,this.componentDef.encapsulation):hr(C,x,function dE(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),j=this.componentDef.onPush?288:272,Q=If(0,null,null,1,0,null,null,null,null,null),ye=vf(null,Q,null,j,null,null,v,C,w,m,null);let ke,Ge;mu(ye);try{const st=function li(r,s,o,u,l,h){const m=o[1];o[22]=r;const w=Wd(m,22,2,"#host",null),C=w.mergedAttrs=s.hostAttrs;null!==C&&(Af(w,C,!0),null!==r&&(ho(l,r,C),null!==w.classes&&tn(l,r,w.classes),null!==w.styles&&ji(l,r,w.styles)));const x=u.createRenderer(r,s),R=vf(o,_l(s),null,s.onPush?32:16,o[22],w,u,x,h||null,null,null);return m.firstCreatePass&&(us(Bs(w,o),m,s.type),Kd(m,w),by(w,o.length,1)),Ki(o,R),o[22]=R}(R,this.componentDef,ye,v,C);if(R)if(u)ho(C,R,["ng-version",wt.full]);else{const{attrs:yt,classes:be}=function Vp(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===l?""!==h&&s.push(h,r[++u]):8===l&&o.push(h);else{if(!$r(l))break;l=h}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);yt&&ho(C,R,yt),be&&be.length>0&&tn(C,R,be.join(" "))}if(Ge=oo(Q,22),void 0!==o){const yt=Ge.projection=[];for(let be=0;be<this.ngContentSelectors.length;be++){const Et=o[be];yt.push(null!=Et?Array.from(Et):null)}}ke=function gE(r,s,o,u){const l=o[1],h=function gI(r,s,o){const u=yn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Ty(r,u,s,zd(r,s,1,null),o),fI(r,u));const l=ls(s,r,u.directiveStart,u);Mr(l,s);const h=vr(u,s);return h&&Mr(h,s),l}(l,o,s);if(r[8]=o[8]=h,null!==u)for(const v of u)v(h,s);if(s.contentQueries){const v=yn();s.contentQueries(1,h,v.directiveStart)}const m=yn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Fr(m.index),mI(o[1],m,0,m.directiveStart,m.directiveEnd,s),wf(s,h)),h}(st,this.componentDef,ye,[DI]),zp(Q,ye,null)}finally{Ps()}return new fE(this.componentType,ke,il(Ge,ye),ye,Ge)}}class fE extends class Ce{}{constructor(s,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new lE(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const h=this._rootLView;Sf(h[1],h,l,s,o),qd(h,this._tNode.index)}}get injector(){return new js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function DI(){const r=yn();vu(Ee()[1],r)}let ng=null;function Il(){if(!ng){const r=Jt.Symbol;if(r&&r.iterator)ng=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(ng=u)}}}return ng}function xf(r){return!!Ay(r)&&(Array.isArray(r)||!(r instanceof Map)&&Il()in r)}function Ay(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Xr(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Ry(r,s,o,u,l,h,m,v){const w=Ee(),C=Ft(),x=r+22,R=C.firstCreatePass?function bI(r,s,o,u,l,h,m,v,w){const C=s.consts,x=Wd(s,r,4,m||null,ii(C,v));vl(s,o,x,ii(C,w)),vu(s,x);const R=x.tViews=If(2,x,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,x),R.queries=s.queries.embeddedTView(x)),x}(x,C,w,s,o,u,l,h,m):C.data[x];Qr(R,!1);const j=w[11].createComment("");vs(C,w,j,R),Mr(j,w),Ki(w,w[x]=Zd(j,w,j,R)),gc(R)&&qp(C,w,R),null!=m&&Kp(w,R,v)}function rh(r){return function Oi(r,s){return r[s]}(function bc(){return Dt.lFrame.contextLView}(),22+r)}function Ba(r,s,o){const u=Ee();return Xr(u,ks(),s)&&function Ci(r,s,o,u,l,h,m,v){const w=vr(s,o);let x,C=s.inputs;!v&&null!=C&&(x=C[u])?(Sf(r,o,x,u,l),zo(s)&&qd(o,s.index)):3&s.type&&(u=function Ti(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,s.value||"",u):l,h.setProperty(w,u,l))}(Ft(),function an(){const r=Dt.lFrame;return oo(r.tView,r.selectedIndex)}(),u,r,s,u[11],o,!1),Ba}function ky(r,s,o,u,l){const m=l?"class":"style";Sf(r,o,s.inputs[m],m,u)}function ag(r,s,o,u){const l=Ee(),h=Ft(),m=22+r,v=l[11],w=l[m]=hr(v,s,function _u(){return Dt.lFrame.currentNamespace}()),C=h.firstCreatePass?function TI(r,s,o,u,l,h,m){const v=s.consts,C=Wd(s,r,2,l,ii(v,h));return vl(s,o,C,ii(v,m)),null!==C.attrs&&Af(C,C.attrs,!1),null!==C.mergedAttrs&&Af(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,h,l,0,s,o,u):h.data[m];Qr(C,!0);const x=C.mergedAttrs;null!==x&&ho(v,w,x);const R=C.classes;null!==R&&tn(v,w,R);const j=C.styles;return null!==j&&ji(v,w,j),64!=(64&C.flags)&&vs(h,l,w,C),0===function cu(){return Dt.lFrame.elementDepthCount}()&&Mr(w,l),function lu(){Dt.lFrame.elementDepthCount++}(),gc(C)&&(qp(h,l,C),function Ey(r,s,o){if(tu(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,C,l)),null!==u&&Kp(l,C),ag}function ug(){let r=yn();Yo()?function Qo(){Dt.lFrame.isParent=!1}():(r=r.parent,Qr(r,!1));const s=r;!function wc(){Dt.lFrame.elementDepthCount--}();const o=Ft();return o.firstCreatePass&&(vu(o,r),tu(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Eu(r){return 0!=(16&r.flags)}(s)&&ky(o,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function td(r){return 0!=(32&r.flags)}(s)&&ky(o,s,Ee(),s.stylesWithoutHost,!1),ug}function Py(r,s,o,u){return ag(r,s,o,u),ug(),Py}function CI(){return Ee()}function Ly(r){return!!r&&"function"==typeof r.then}function cg(r){return!!r&&"function"==typeof r.subscribe}const lg=cg;function Fy(r,s,o,u){const l=Ee(),h=Ft(),m=yn();return function kf(r,s,o,u,l,h,m,v){const w=gc(u),x=r.firstCreatePass&&II(r),R=s[8],j=Cy(s);let Q=!0;if(3&u.type||v){const Ge=vr(u,s),st=v?v(Ge):Ge,yt=j.length,be=v?nn=>v(mn(nn[u.index])):u.index;let Et=null;if(!v&&w&&(Et=function Rf(r,s,o,u){const l=r.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const v=s[7],w=l[h+2];return v.length>w?v[w]:null}"string"==typeof m&&(h+=2)}return null}(r,s,l,u.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=h,Et.__ngLastListenerFn__=h,Q=!1;else{h=By(u,s,R,h,!1);const nn=o.listen(st,l,h);j.push(h,nn),x&&x.push(l,be,yt,yt+1)}}else h=By(u,s,R,h,!1);const ye=u.outputs;let ke;if(Q&&null!==ye&&(ke=ye[l])){const Ge=ke.length;if(Ge)for(let st=0;st<Ge;st+=2){const gn=s[ke[st]][ke[st+1]].subscribe(h),Ul=j.length;j.push(h,gn),x&&x.push(l,u.index,Ul,-(Ul+1))}}}(h,l,l[11],m,r,s,0,u),Fy}function ih(r,s,o,u){try{return!1!==o(u)}catch(l){return Yd(r,l),!1}}function By(r,s,o,u,l){return function h(m){if(m===Function)return u;Tf(2&r.flags?$t(r.index,s):s);let w=ih(s,0,u,m),C=h.__ngNextListenerFn__;for(;C;)w=ih(s,0,C,m)&&w,C=C.__ngNextListenerFn__;return l&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function Uy(r=1){return function Os(r){return(Dt.lFrame.contextLView=function yu(r,s){for(;r>0;)s=s[15],r--;return s}(r,Dt.lFrame.contextLView))[8]}(r)}function Zy(r,s=""){const o=Ee(),u=Ft(),l=r+22,h=u.firstCreatePass?Wd(u,l,1,s,null):u.data[l],m=o[l]=function Id(r,s){return r.createText(s)}(o[11],s);vs(u,o,m,h),Qr(h,!1)}function Ga(r,s,o){const u=Ee(),l=function Xu(r,s,o,u){return Xr(r,ks(),o)?s+fe(o)+u:ct}(u,r,s,o);return l!==ct&&Fa(u,jn(),l),Ga}const to=void 0;var ah=["en",[["a","p"],["AM","PM"],to],[["AM","PM"],to,to],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],to,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],to,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",to,"{1} 'at' {0}",to],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function s_(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ac={};function Al(r){const s=function s0(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Eg(s);if(o)return o;const u=s.split("-")[0];if(o=Eg(u),o)return o;if("en"===u)return ah;throw new Ae(701,!1)}function a_(r){return Al(r)[lt.PluralCase]}function Eg(r){return r in ac||(ac[r]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[r]),ac[r]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const uh="en-US";let l_=uh;class uc{}function U_(r,s){return new j_(r,s??null)}class j_ extends uc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xp(this);const u=function sn(r,s){const o=r[Yt]||null;if(!o&&!0===s)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function ko(r){return r instanceof Function?r():r}(u.bootstrap),this._r3Injector=Od(s,o,[{provide:uc,useValue:this},{provide:Pp,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Og extends class B_{}{constructor(s){super(),this.moduleType=s}create(s){return new j_(this.moduleType,s)}}function Gg(r){return s=>{setTimeout(r,void 0,s)}}const za=class mD extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,h=o||(()=>null),m=u;if(s&&"object"==typeof s){const w=s;l=w.next?.bind(w),h=w.error?.bind(w),m=w.complete?.bind(w)}this.__isAsync&&(h=Gg(h),l&&(l=Gg(l)),m&&(m=Gg(m)));const v=super.subscribe({next:l,error:h,complete:m});return s instanceof ee.w0&&s.add(v),v}};let qf=(()=>{class r{}return r.__NG_ELEMENT_ID__=Q_,r})();const yD=qf,_D=class extends yD{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=vf(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),zp(u,l,s),new Jd(l)}};function Q_(){return function Wg(r,s){return 4&r.type?new _D(s,r,il(r,s)):null}(yn(),Ee())}let zg=(()=>{class r{}return r.__NG_ELEMENT_ID__=Tn,r})();function Tn(){return function P0(r,s){let o;const u=s[r.index];if(Cr(u))o=u;else{let l;if(8&r.type)l=mn(u);else{const h=s[11];l=h.createComment("");const m=vr(r,s);Ao(h,Ks(h,m),l,function Yh(r,s){return r.nextSibling(s)}(h,m),!1)}s[r.index]=o=Zd(u,s,l,r),Ki(s,o)}return new vD(o,r,s)}(yn(),Ee())}const Nb=zg,vD=class extends Nb{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new js(this._hostTNode,this._hostLView)}get parentInjector(){const s=Cu(this._hostTNode,this._hostLView);if(rd(s)){const o=ia(s,this._hostLView),u=Xn(s);return new js(o[1].data[u+8],o)}return new js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=Yn(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=s.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(s,o,u,l,h){const m=s&&!function _o(r){return"function"==typeof r}(s);let v;if(m)v=o;else{const R=o||{};v=R.index,u=R.injector,l=R.projectableNodes,h=R.environmentInjector||R.ngModuleRef}const w=m?s:new Lo(K(s)),C=u||this.parentInjector;if(!h&&null==w.ngModule){const j=(m?C:this.parentInjector).get(Wi,null);j&&(h=j)}const x=w.create(C,l,void 0,h);return this.insert(x.hostView,v),x}insert(s,o){const u=s._lView,l=u[1];if(function ou(r){return Cr(r[3])}(u)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const R=u[3],j=new vD(R,R[6],R[3]);j.detach(j.indexOf(s))}}const h=this._adjustIndex(o),m=this._lContainer;!function Ia(r,s,o,u){const l=10+u,h=o.length;u>0&&(o[l-1][4]=s),u<h-10?(s[4]=o[l],$n(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function Ep(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(r),s[2]|=64}(l,u,m,h);const v=Jh(h,m),w=u[11],C=Ks(w,m[7]);return null!==C&&function Jc(r,s,o,u,l,h){u[0]=l,u[6]=s,Vu(r,u,o,1,l,h)}(l,m[6],w,u,C,v),s.attachToViewContainerRef(),$n(qg(m),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=Yn(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=wa(this._lContainer,o);u&&(vo(qg(this._lContainer),o),Dd(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=wa(this._lContainer,o);return u&&null!=vo(qg(this._lContainer),o)?new Jd(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function Yn(r){return r[8]}function qg(r){return r[8]||(r[8]=[])}function Qf(...r){}const Fl=new un("Application Initializer");let Ih=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Qf,this.reject=Qf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Ly(h))o.push(h);else if(lg(h)){const m=new Promise((v,w)=>{h.subscribe({complete:v,error:w})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(kn(Fl,8))},r.\u0275prov=qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const OD=new un("AppId",{providedIn:"root",factory:function LD(){return`${im()}${im()}${im()}`}});function im(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qa=new un("Platform Initializer"),FD=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VD=new un("appBootstrapListener"),sm=new un("LocaleId",{providedIn:"root",factory:()=>function Pn(r,s=Je.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),kn(r,s)}(sm,Je.Optional|Je.SkipSelf)||function BD(){return typeof $localize<"u"&&$localize.locale||uh}()}),qb=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),am=(()=>Promise.resolve(0))();function cv(r){typeof Zone>"u"?am.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new za(!1),this.onMicrotaskEmpty=new za(!1),this.onStable=new za(!1),this.onError=new za(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function rw(){let r=Jt.requestAnimationFrame,s=Jt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function iw(r){const s=()=>{!function hi(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Jt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,um(r),r.isCheckStableRunning=!0,xi(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),um(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,v)=>{try{return wh(r),o.invokeTask(l,h,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),Eh(r)}},onInvoke:(o,u,l,h,m,v,w)=>{try{return wh(r),o.invoke(l,h,m,v,w)}finally{r.shouldCoalesceRunChangeDetection&&s(),Eh(r)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,um(r),xi(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Ae(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,Vl,Qf,Qf);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Vl={};function xi(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function um(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function wh(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Eh(r){r._nesting--,xi(r)}class fi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new za,this.onMicrotaskEmpty=new za,this.onStable=new za,this.onError=new za}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const sw=new un(""),cm=new un("");let Ja,Dh=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ja||(function lv(r){Ja=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),cv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)(kn(Yi),kn(lc),kn(cm))},r.\u0275prov=qt({token:r,factory:r.\u0275fac}),r})(),lc=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Ja?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),dc=null;const ow=new un("AllowMultipleToken"),dv=new un("PlatformDestroyListeners");function uw(r,s,o=[]){const u=`Platform: ${s}`,l=new un(u);return(h=[])=>{let m=fv();if(!m||m.injector.get(ow,!1)){const v=[...o,...h,{provide:l,useValue:!0}];r?r(v):function WD(r){if(dc&&!dc.get(ow,!1))throw new Ae(400,!1);dc=r;const s=r.get(dw);(function aw(r){const s=r.get(Qa,null);s&&s.forEach(o=>o())})(r)}(function lw(r=[],s){return ll.create({name:s,providers:[{provide:Rd,useValue:"platform"},{provide:dv,useValue:new Set([()=>dc=null])},...r]})}(v,u))}return function cw(r){const s=fv();if(!s)throw new Ae(401,!1);return s}()}}function fv(){return dc?.get(dw)??null}let dw=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function fw(r,s){let o;return o="noop"===r?new fi:("zone.js"===r?void 0:r)||new Yi(s),o}(u?.ngZone,function hw(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Yi,useValue:l}];return l.run(()=>{const m=ll.create({providers:h,parent:this.injector,name:o.moduleType.name}),v=o.create(m),w=v.injector.get(Ue,null);if(!w)throw new Ae(402,!1);return l.runOutsideAngular(()=>{const C=l.onError.subscribe({next:x=>{w.handleError(x)}});v.onDestroy(()=>{ep(this._modules,v),C.unsubscribe()})}),function pw(r,s,o){try{const u=o();return Ly(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(w,l,()=>{const C=v.injector.get(Ih);return C.runInitializers(),C.donePromise.then(()=>(function xl(r){Pt(r,"Expected localeId to be defined"),"string"==typeof r&&(l_=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(sm,uh)||uh),this._moduleDoBootstrap(v),v))})})}bootstrapModule(o,u=[]){const l=pv({},u);return function HD(r,s,o){const u=new Og(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(Xf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Ae(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(dv,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(kn(ll))},r.\u0275prov=qt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function pv(r,s){return Array.isArray(s)?s.reduce(pv,r):{...r,...s}}let Xf=(()=>{class r{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new k.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new k.y(v=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),cv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{w.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ae.T)(h,m.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof gr;if(!this._injector.get(Ih).done)throw!l&&function Kt(r){const s=K(r)||He(r)||ut(r);return null!==s&&s.standalone}(o),new Ae(405,false);let m;m=l?o:this._injector.get(Pp).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const v=function GD(r){return r.isBoundToModule}(m)?void 0:this._injector.get(uc),C=m.create(ll.NULL,[],u||m.selector,v),x=C.location.nativeElement,R=C.injector.get(sw,null);return R?.registerApplication(x),C.onDestroy(()=>{this.detachView(C.hostView),ep(this.components,C),R?.unregisterApplication(x)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;ep(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(VD,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ep(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ae(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(kn(Yi),kn(Wi),kn(Ue))},r.\u0275prov=qt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ep(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let ZD=!0,gw=!1;function gv(){return gw=!0,ZD}function Qb(){if(gw)throw new Error("Cannot enable prod mode after platform setup.");ZD=!1}let Xb=(()=>{class r{}return r.__NG_ELEMENT_ID__=eT,r})();function eT(r){return function tT(r,s,o){if(zo(r)&&!o){const u=$t(r.index,s);return new Jd(u,u)}return 47&r.type?new Jd(s[16],s):null}(yn(),Ee(),16==(16&r))}class wv{constructor(){}supports(s){return xf(s)}create(s){return new fm(s)}}const Ev=(r,s)=>s;class fm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Ev}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<vw(u,l,h)?o:u,v=vw(m,l,h),w=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const C=v-l,x=w-l;if(C!=x){for(let j=0;j<C;j++){const Q=j<h.length?h[j]:h[j]=0,ye=Q+j;x<=ye&&ye<C&&(h[j]=Q+1)}h[m.previousIndex]=x-C}}v!==w&&s(m,v,w)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!xf(s))throw new Ae(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,v),u=!0),o=o._next}else l=0,function DE(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Il()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,l)):s=this._addAfter(new Dv(o,u),h,l),s}_verifyReinsertion(s,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new _w),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _w),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Dv{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class _w{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new bv,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vw(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class Iw{constructor(){}supports(s){return s instanceof Map||Ay(s)}create(){return new JD}}class JD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Ay(s)))throw new Ae(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new XD(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class XD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bh(){return new pm([new wv])}let pm=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||bh()),deps:[[r,new J,new P]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Ae(901,!1)}}return r.\u0275prov=qt({token:r,providedIn:"root",factory:bh}),r})();function Cv(){return new Sv([new Iw])}let Sv=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Cv()),deps:[[r,new J,new P]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Ae(901,!1)}}return r.\u0275prov=qt({token:r,providedIn:"root",factory:Cv}),r})();const Av=uw(null,"core",[]);let ww=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(kn(Xf))},r.\u0275mod=xt({type:r}),r.\u0275inj=Ct({}),r})()},3942:(ft,Se,L)=>{L.d(Se,{Z:()=>Ae});var I=L(2090),ee=L(4859),k=L(9681),ae=L(1877);class ie{constructor(fe,pe){this._delegate=fe,this.firebase=pe,(0,k._addComponent)(fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,pe=k._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(fe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(qe=Qe.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:pe})}_removeServiceInstance(fe,pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(pe)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ve(){const ze=function le(ze){const fe={},pe={__esModule:!0,initializeApp:function Te(Be,V={}){const ue=k.initializeApp(Be,V);if((0,I.r3)(fe,ue.name))return fe[ue.name];const G=new ze(ue,pe);return fe[ue.name]=G,G},app:Qe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function we(Be){const V=Be.name,ue=V.replace("-compat","");if(k._registerComponent(Be)&&"PUBLIC"===Be.type){const G=(Y=Qe())=>{if("function"!=typeof Y[ue])throw he.create("invalid-app-argument",{appName:V});return Y[ue]()};void 0!==Be.serviceProps&&(0,I.ZB)(G,Be.serviceProps),pe[ue]=G,ze.prototype[ue]=function(...Y){return this._getService.bind(this,V).apply(this,Be.multipleInstances?Y:[])}}return"PUBLIC"===Be.type?pe[ue]:null},removeApp:function qe(Be){delete fe[Be]},useAsService:function je(Be,V){return"serverAuth"===V?null:V},modularAPIs:k}};function Qe(Be){if(!(0,I.r3)(fe,Be=Be||k._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Be});return fe[Be]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function me(){return Object.keys(fe).map(Be=>fe[Be])}}),Qe.App=ze,pe}(ie);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function fe(pe){(0,I.ZB)(ze,pe)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),ze}(),U=new ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=H;!function xe(ze){(0,k.registerVersion)("@firebase/app-compat","0.1.39",ze)}()},9681:(ft,Se,L)=>{L.r(Se),L.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Cs,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>Gt,_addOrOverwriteComponent:()=>qt,_apps:()=>Xt,_clearComponents:()=>Qi,_components:()=>ln,_getProvider:()=>Ct,_registerComponent:()=>Dr,_removeServiceInstance:()=>rn,deleteApp:()=>Go,getApp:()=>zr,getApps:()=>qr,initializeApp:()=>ni,onLog:()=>Ji,registerVersion:()=>yr,setLogLevel:()=>Fn});var I=L(5861),ee=L(4859),k=L(1877),ae=L(2090),ie=L(8766);class de{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function he(tt){return"VERSION"===tt.getComponent()?.type}(et)){const It=et.getImmediate();return`${It.library}/${It.version}`}return null}).filter(et=>et).join(" ")}}const le="@firebase/app",H=new k.Yd("@firebase/app"),Pt="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,ln=new Map;function Gt(tt,De){try{tt.container.addComponent(De)}catch(et){H.debug(`Component ${De.name} failed to register with FirebaseApp ${tt.name}`,et)}}function qt(tt,De){tt.container.addOrOverwriteComponent(De)}function Dr(tt){const De=tt.name;if(ln.has(De))return H.debug(`There were multiple attempts to register component ${De}.`),!1;ln.set(De,tt);for(const et of Xt.values())Gt(et,tt);return!0}function Ct(tt,De){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(De)}function rn(tt,De,et=Pt){Ct(tt,De).clearInstance(et)}function Qi(){ln.clear()}const br=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kr{constructor(De,et,It){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const Cs="9.14.0";function ni(tt,De={}){let et=tt;"object"!=typeof De&&(De={name:De});const It=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},De),_t=It.name;if("string"!=typeof _t||!_t)throw br.create("bad-app-name",{appName:String(_t)});if(et||(et=(0,ae.aH)()),!et)throw br.create("no-options");const xt=Xt.get(_t);if(xt){if((0,ae.vZ)(et,xt.options)&&(0,ae.vZ)(It,xt.config))return xt;throw br.create("duplicate-app",{appName:_t})}const B=new ee.H0(_t);for(const z of ln.values())B.addComponent(z);const F=new kr(et,It,B);return Xt.set(_t,F),F}function zr(tt=Pt){const De=Xt.get(tt);if(!De&&tt===Pt)return ni();if(!De)throw br.create("no-app",{appName:tt});return De}function qr(){return Array.from(Xt.values())}function Go(tt){return Je.apply(this,arguments)}function Je(){return(Je=(0,I.Z)(function*(tt){const De=tt.name;Xt.has(De)&&(Xt.delete(De),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function yr(tt,De,et){var It;let _t=null!==(It=Ye[tt])&&void 0!==It?It:tt;et&&(_t+=`-${et}`);const xt=_t.match(/\s|\//),B=De.match(/\s|\//);if(xt||B){const F=[`Unable to register library "${_t}" with version "${De}":`];return xt&&F.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),xt&&B&&F.push("and"),B&&F.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void H.warn(F.join(" "))}Dr(new ee.wA(`${_t}-version`,()=>({library:_t,version:De}),"VERSION"))}function Ji(tt,De){if(null!==tt&&"function"!=typeof tt)throw br.create("invalid-log-argument");(0,k.Am)(tt,De)}function Fn(tt){(0,k.Ub)(tt)}const Cn="firebase-heartbeat-store";let xn=null;function on(){return xn||(xn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(tt,De)=>{0===De&&tt.createObjectStore(Cn)}}).catch(tt=>{throw br.create("idb-open",{originalErrorMessage:tt.message})})),xn}function ot(){return(ot=(0,I.Z)(function*(tt){var De;try{return(yield on()).transaction(Cn).objectStore(Cn).get(Mn(tt))}catch(et){if(et instanceof ae.ZR)H.warn(et.message);else{const It=br.create("idb-get",{originalErrorMessage:null===(De=et)||void 0===De?void 0:De.message});H.warn(It.message)}}})).apply(this,arguments)}function Jt(tt,De){return rr.apply(this,arguments)}function rr(){return(rr=(0,I.Z)(function*(tt,De){var et;try{const _t=(yield on()).transaction(Cn,"readwrite");return yield _t.objectStore(Cn).put(De,Mn(tt)),_t.done}catch(It){if(It instanceof ae.ZR)H.warn(It.message);else{const _t=br.create("idb-set",{originalErrorMessage:null===(et=It)||void 0===et?void 0:et.message});H.warn(_t.message)}}})).apply(this,arguments)}function Mn(tt){return`${tt.name}!${tt.options.appId}`}class Xi{constructor(De){this.container=De,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Yt(et),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var De=this;return(0,I.Z)(function*(){const It=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Zt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==_t&&!De._heartbeatsCache.heartbeats.some(xt=>xt.date===_t))return De._heartbeatsCache.heartbeats.push({date:_t,agent:It}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(xt=>{const B=new Date(xt.date).valueOf();return Date.now()-B<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,I.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const et=Zt(),{heartbeatsToSend:It,unsentEntries:_t}=function gi(tt,De=1024){const et=[];let It=tt.slice();for(const _t of tt){const xt=et.find(B=>B.agent===_t.agent);if(xt){if(xt.dates.push(_t.date),Vn(et)>De){xt.dates.pop();break}}else if(et.push({agent:_t.agent,dates:[_t.date]}),Vn(et)>De){et.pop();break}It=It.slice(1)}return{heartbeatsToSend:et,unsentEntries:It}}(De._heartbeatsCache.heartbeats),xt=(0,ae.L)(JSON.stringify({version:2,heartbeats:It}));return De._heartbeatsCache.lastSentHeartbeatDate=et,_t.length>0?(De._heartbeatsCache.heartbeats=_t,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),xt})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,I.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function pt(tt){return ot.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var et=this;return(0,I.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const xt=yield et.read();return Jt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:xt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var et=this;return(0,I.Z)(function*(){var It;if(yield et._canUseIndexedDBPromise){const xt=yield et.read();return Jt(et.app,{lastSentHeartbeatDate:null!==(It=De.lastSentHeartbeatDate)&&void 0!==It?It:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...De.heartbeats]})}})()}}function Vn(tt){return(0,ae.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Tr(tt){Dr(new ee.wA("platform-logger",De=>new de(De),"PRIVATE")),Dr(new ee.wA("heartbeat",De=>new Xi(De),"PRIVATE")),yr(le,"0.8.4",tt),yr(le,"0.8.4","esm2017"),yr("fire-js","")}("")},4859:(ft,Se,L)=>{L.d(Se,{H0:()=>le,wA:()=>k});var I=L(5861),ee=L(2090);class k{constructor(H,U,Z){this.name=H,this.instanceFactory=U,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class ie{constructor(H,U){this.name=H,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const U=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(U)){const Z=new ee.BH;if(this.instancesDeferred.set(U,Z),this.isInitialized(U)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:U});We&&Z.resolve(We)}catch{}}return this.instancesDeferred.get(U).promise}getImmediate(H){var U;const Z=this.normalizeInstanceIdentifier(H?.identifier),We=null!==(U=H?.optional)&&void 0!==U&&U;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function he(ve){return"EAGER"===ve.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[U,Z]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(U);try{const xe=this.getOrInitializeService({instanceIdentifier:We});Z.resolve(xe)}catch{}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,I.Z)(function*(){const U=Array.from(H.instances.values());yield Promise.all([...U.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...U.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:U={}}=H,Z=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:Z,options:U});for(const[xe,Ae]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(xe)&&Ae.resolve(We);return We}onInit(H,U){var Z;const We=this.normalizeInstanceIdentifier(U),xe=null!==(Z=this.onInitCallbacks.get(We))&&void 0!==Z?Z:new Set;xe.add(H),this.onInitCallbacks.set(We,xe);const Ae=this.instances.get(We);return Ae&&H(Ae,We),()=>{xe.delete(H)}}invokeOnInitCallbacks(H,U){const Z=this.onInitCallbacks.get(U);if(Z)for(const We of Z)try{We(H,U)}catch{}}getOrInitializeService({instanceIdentifier:H,options:U={}}){let Z=this.instances.get(H);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=H,ve===ae?void 0:ve),options:U}),this.instances.set(H,Z),this.instancesOptions.set(H,U),this.invokeOnInitCallbacks(Z,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Z)}catch{}var ve;return Z||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const U=this.getProvider(H.name);if(U.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);U.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const U=new ie(H,this);return this.providers.set(H,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Se,L)=>{L.d(Se,{Am:()=>ve,Ub:()=>le,Yd:()=>he,in:()=>ee});const I=[];var ee=(()=>{return(H=ee||(ee={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",ee;var H})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ae=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(H,U,...Z)=>{if(U<H.logLevel)return;const We=(new Date).toISOString(),xe=ie[U];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[xe](`[${We}]  ${H.name}:`,...Z)};class he{constructor(U){this.name=U,this._logLevel=ae,this._logHandler=de,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in ee))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?k[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...U),this._logHandler(this,ee.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...U),this._logHandler(this,ee.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...U),this._logHandler(this,ee.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...U),this._logHandler(this,ee.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...U),this._logHandler(this,ee.ERROR,...U)}}function le(H){I.forEach(U=>{U.setLogLevel(H)})}function ve(H,U){for(const Z of I){let We=null;U&&U.level&&(We=k[U.level]),Z.userLogHandler=null===H?null:(xe,Ae,...ze)=>{const fe=ze.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ae>=(We??xe.logLevel)&&H({level:ee[Ae].toLowerCase(),message:fe,args:ze,type:xe.name})}}}},8766:(ft,Se,L)=>{L.d(Se,{Lj:()=>Te,X3:()=>Qe});var I=L(5861);let k,ae;const he=new WeakMap,le=new WeakMap,ve=new WeakMap,H=new WeakMap,U=new WeakMap;let xe={get(V,ue,G){if(V instanceof IDBTransaction){if("done"===ue)return le.get(V);if("objectStoreNames"===ue)return V.objectStoreNames||ve.get(V);if("store"===ue)return G.objectStoreNames[1]?void 0:G.objectStore(G.objectStoreNames[0])}return pe(V[ue])},set:(V,ue,G)=>(V[ue]=G,!0),has:(V,ue)=>V instanceof IDBTransaction&&("done"===ue||"store"===ue)||ue in V};function fe(V){return"function"==typeof V?function ze(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ue){return V.apply(qe(this),ue),pe(he.get(this))}:function(...ue){return pe(V.apply(qe(this),ue))}:function(ue,...G){const Y=V.call(qe(this),ue,...G);return ve.set(Y,ue.sort?ue.sort():[ue]),pe(Y)}}(V):(V instanceof IDBTransaction&&function We(V){if(le.has(V))return;const ue=new Promise((G,Y)=>{const ne=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Re),V.removeEventListener("abort",Re)},te=()=>{G(),ne()},Re=()=>{Y(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",te),V.addEventListener("error",Re),V.addEventListener("abort",Re)});le.set(V,ue)}(V),((V,ue)=>ue.some(G=>V instanceof G))(V,function ie(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,xe):V)}function pe(V){if(V instanceof IDBRequest)return function Z(V){const ue=new Promise((G,Y)=>{const ne=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Re)},te=()=>{G(pe(V.result)),ne()},Re=()=>{Y(V.error),ne()};V.addEventListener("success",te),V.addEventListener("error",Re)});return ue.then(G=>{G instanceof IDBCursor&&he.set(G,V)}).catch(()=>{}),U.set(ue,V),ue}(V);if(H.has(V))return H.get(V);const ue=fe(V);return ue!==V&&(H.set(V,ue),U.set(ue,V)),ue}const qe=V=>U.get(V);function Qe(V,ue,{blocked:G,upgrade:Y,blocking:ne,terminated:te}={}){const Re=indexedDB.open(V,ue),Ne=pe(Re);return Y&&Re.addEventListener("upgradeneeded",at=>{Y(pe(Re.result),at.oldVersion,at.newVersion,pe(Re.transaction))}),G&&Re.addEventListener("blocked",()=>G()),Ne.then(at=>{te&&at.addEventListener("close",()=>te()),ne&&at.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Ne}function Te(V,{blocked:ue}={}){const G=indexedDB.deleteDatabase(V);return ue&&G.addEventListener("blocked",()=>ue()),pe(G).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],je=new Map;function Be(V,ue){if(!(V instanceof IDBDatabase)||ue in V||"string"!=typeof ue)return;if(je.get(ue))return je.get(ue);const G=ue.replace(/FromIndex$/,""),Y=ue!==G,ne=we.includes(G);if(!(G in(Y?IDBIndex:IDBObjectStore).prototype)||!ne&&!me.includes(G))return;const te=function(){var Re=(0,I.Z)(function*(Ne,...at){const zt=this.transaction(Ne,ne?"readwrite":"readonly");let Pt=zt.store;return Y&&(Pt=Pt.index(at.shift())),(yield Promise.all([Pt[G](...at),ne&&zt.done]))[0]});return function(at){return Re.apply(this,arguments)}}();return je.set(ue,te),te}!function Ae(V){xe=V(xe)}(V=>({...V,get:(ue,G,Y)=>Be(ue,G)||V.get(ue,G,Y),has:(ue,G)=>!!Be(ue,G)||V.has(ue,G)}))},5861:(ft,Se,L)=>{function I(k,ae,ie,de,he,le,ve){try{var H=k[le](ve),U=H.value}catch(Z){return void ie(Z)}H.done?ae(U):Promise.resolve(U).then(de,he)}function ee(k){return function(){var ae=this,ie=arguments;return new Promise(function(de,he){var le=k.apply(ae,ie);function ve(U){I(le,de,he,ve,H,"next",U)}function H(U){I(le,de,he,ve,H,"throw",U)}ve(void 0)})}}L.d(Se,{Z:()=>ee})}},ft=>{ft(ft.s=1258)}]);